var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(n,r){function s(t){try{h(o.next(t))}catch(e){r(e)}}function a(t){try{h(o["throw"](t))}catch(e){r(e)}}function h(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(s,a)}h((o=o.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return o([t,e])}}function o(i){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,r&&(s=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,r=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){h.label=i[1];break}if(6===i[0]&&h.label<s[1]){h.label=s[1],s=i;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(i);break}s[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(o){i=[6,o],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,r,s,a,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;o>i;i++){e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},EuiView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return"resource/exml/SkinName.exml"},e.prototype.load=function(){this.loadSkin(this.getSkinName())},e.prototype.loadSkin=function(t){var e=this;return this._loaded=!1,new Promise(function(i,o){e._eui=new eui.Component,e._eui.once(eui.UIEvent.COMPLETE,function(){e._loaded=!0,-1===EuiViewData.skins.indexOf(t)&&EuiViewData.skins.push(t),e.onSkinLoadComplete(),i()},e),e._eui.skinName=t,e.addChild(e._eui)})},e.prototype.onSkinLoadComplete=function(){this.dispatchViewReady()},e.prototype.dispatchViewReady=function(){this.dispatchEventWith("EuiViewReady")},e.prototype.isLoaded=function(){return this._loaded},e.prototype.destroy=function(){this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(EuiView.prototype,"EuiView",["IEuiView"]);var SlotSymbolPrototype=function(t){function e(){var e=t.call(this)||this;return e.create(),e}return __extends(e,t),e.prototype.create=function(){this.createCustomMethod()},e.prototype.init=function(){this.initCustomMethod()},e.prototype.updateViewId=function(t){},e.prototype.updateStatus=function(t,e,i){switch(t){case"SymbolChannel":this.symbolStatusHandler(e,i)}},e.prototype.destroy=function(){this.destroyCustomMethod(),this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(SlotSymbolPrototype.prototype,"SlotSymbolPrototype");var GamePrototype=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.dispatchGameReadyEvent()},e.prototype.dispatchGameReadyEvent=function(){this.dispatchEventWith("GameReady")},e.prototype.destroy=function(){this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(GamePrototype.prototype,"GamePrototype",["IGame"]);var SlotSymbol=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createCustomMethod=function(){this.createViewBitmap()},e.prototype.createViewBitmap=function(){this._viewBmp=new egret.Bitmap,this.addChild(this._viewBmp);var t=GameData.SymbolBmpWidth,e=GameData.SymbolBmpHeight;this._viewBmp.anchorOffsetX=t/2,this._viewBmp.anchorOffsetY=e/2,this._viewBmp.smoothing=!0},e.prototype.initCustomMethod=function(){this._viewBmp.visible=!0},e.prototype.updateViewId=function(t){this.viewId=t,this.updateView()},e.prototype.updateView=function(){var t=SymbolManager.getTexture(this.viewId);this._viewBmp.texture=t},e.prototype.symbolStatusHandler=function(t,e){switch(this._status=t,t){case 0:this.idleMethod();break;case 1:case 4:case 3:case 5:case 6:case 2:this.showWinMethod();break;case 7:this.hitBaseMethod();break;case 8:this.alertMethod();break;case 9:this.triggerMethod()}},e.prototype.idleMethod=function(){this._viewBmp.visible=!0,TweenMax.killDelayedCallsTo(this.animationCompleteHandler)},e.prototype.hitBaseMethod=function(){this.animationCompleteHandler("SymbolChannel",7)},e.prototype.alertMethod=function(){this.animationCompleteHandler("SymbolChannel",8)},e.prototype.showWinMethod=function(){TweenMax.delayedCall(2,this.animationCompleteHandler,["SymbolChannel",1],this)},e.prototype.triggerMethod=function(){this._viewBmp.visible=!1},e.prototype.animationCompleteHandler=function(t,e){switch(e){case 1:case 4:case 3:case 5:case 6:case 2:this.dispatchEventWith("WinMethodComplete");break;case 9:this.dispatchEventWith("TriggerMethodComplete")}},e.prototype.destroyCustomMethod=function(){},e}(SlotSymbolPrototype);__reflect(SlotSymbol.prototype,"SlotSymbol",["ISlotSymbol","IEventListener"]);var OverlayPrototype=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.initCustomMethod.apply(this,t)},e.prototype.updateStatus=function(t,e,i){},e.prototype.show=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.showCustomMethod.apply(this,t)},e.prototype.hide=function(){this.hideCustomMethod()},e.prototype.dispatchHideComplete=function(){this.dispatchEventWith("HideComplete")},e.prototype.destroy=function(){this.destroyCustomMethod(),this.removeChildren()},e}(EuiView);__reflect(OverlayPrototype.prototype,"OverlayPrototype",["IOverlay","IEventListener"]);var PayLinePrototype=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this._positions=t,this._color=e,this.initCustomMethod()},e.prototype.show=function(){this.showCustomMethod()},e.prototype.hide=function(){this.hideCustomMethod()},e.prototype.destroy=function(){this.destroyCustomMethod(),this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(PayLinePrototype.prototype,"PayLinePrototype");var GameViewPrototype=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.load=function(){this.loadCustomMethod(),t.prototype.load.call(this)},e.prototype.init=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.create(),this.initCustomMethod.apply(this,t)},e.prototype.create=function(){this.createCustomMethod(),this.cacheMovieClips()},e.prototype.cacheMovieClips=function(){for(var t=SymbolManager.getMovieClipSymbolsList(),e=0,i=t;e<i.length;e++){var o=i[e],n=new MovieClip("s"+o);this.addChildAt(n,0),TweenMax.delayedCall(.1,this.removeChild,[n],this)}},e.prototype.start=function(){this.startCustomMethod()},e.prototype.stop=function(){this.stopCustomMethod()},e.prototype.pause=function(){this.pauseCustomMethod()},e.prototype.resume=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.resumeCustomMethod.apply(this,t)},e.prototype.updateStatus=function(t,e,i){},e.prototype.destroy=function(){this.destroyCustomMethod(),t.prototype.destroy.call(this)},e}(EuiView);__reflect(GameViewPrototype.prototype,"GameViewPrototype");var SequenceControllerPrototype=function(){function t(){}return t.prototype.init=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.initCustomMethod.apply(this,[t].concat(e))},t.prototype.updateStatus=function(t,e,i){switch(t){case"SpinChannel":this.spinStatusHandler(e,i);break;case"ResultChannel":this.resultStatusHandler(e,i)}},t.prototype.spinStatusHandler=function(t,e){switch(t){case 1:this.onSpinStart();break;case 0:this.onSpinComplete()}},t.prototype.resultStatusHandler=function(t,e){switch(t){case 2:this.onResultReady()}},t.prototype.notify=function(t,e,i,o){void 0===o&&(o=!0),EventManager.notify(t,e,i,o)},t.prototype.destroy=function(){this.destroyCustomMethod()},t}();__reflect(SequenceControllerPrototype.prototype,"SequenceControllerPrototype");var GameViewEnter=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.initCustomMethod()},e.prototype.updateStatus=function(t,e,i){},e.prototype.show=function(){this.showCustomMethod()},e.prototype.hide=function(){this.hideCustomMethod()},e.prototype.destroy=function(){this.destroyCustomMethod(),t.prototype.destroy.call(this)},e}(EuiView);__reflect(GameViewEnter.prototype,"GameViewEnter",["IGameViewEnter","IOverlay","IEventListener"]);var Application=function(t){function e(){var e=t.call(this)||this;return e.once(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){ApplicationData.stage=this.stage,ApplicationData.defaultWidth=this.stage.stageWidth,ApplicationData.defaultHeight=this.stage.stageHeight,ApplicationData.deviceScreenWidth=window.screen.width,ApplicationData.deviceScreenHeight=window.screen.height,egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.checkDevice(),this.initLoading()["catch"](function(t){console.error(t)})},e.prototype.checkDevice=function(){var t=ApplicationData.isPc="Windows PC"==egret.Capabilities.os||"Mac OS"==egret.Capabilities.os;t?this.initWeb():this.initMobile()},e.prototype.retrieveMobileApplicationViewController=function(){return new MobileAppViewController},e.prototype.initMobile=function(){this.stage.scaleMode=egret.StageScaleMode.FIXED_HEIGHT;var t=this.retrieveMobileApplicationViewController();t.init(this,!1),this.appViewCtrl=t},e.prototype.retrieveApplicationViewController=function(){return new AppViewController},e.prototype.initWeb=function(){this.stage.scaleMode=egret.StageScaleMode.FIXED_HEIGHT;var t=this.retrieveApplicationViewController();t.init(this,!1),this.appViewCtrl=t},e.prototype.initLoading=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return t.sent(),[4,this.loadThemeConfig()];case 2:return t.sent(),this.loadPreloaderResource(),[2]}})})},e.prototype.loadThemeConfig=function(){var t=this;return new Promise(function(e,i){var o=new eui.Theme("resource/default.thm.json",t.stage);o.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.loadPreloaderResource=function(){RES.setMaxLoadingThread(4);var t=new Loader;t.once("LoadComplete",this.initPreloaderView,this),t.getGroup("preload")},e.prototype.retrievePreloaderView=function(){return new PreloaderView},e.prototype.initPreloaderView=function(t){this.preloaderView=this.retrievePreloaderView(),this.preloaderView.once("LoadComplete",this.preloadComplete,this),this.preloaderView.loadGroups("app"),this.stage.addChild(this.preloaderView),this.appViewCtrl.register(this.preloaderView)},e.prototype.preloadComplete=function(t){this.createSceneHandler()},e.prototype.createSceneHandler=function(){this.createScene(),this.destroyPreloaderView()},e.prototype.destroyPreloaderView=function(){this.stage.removeChild(this.preloaderView),this.appViewCtrl.unregister(this.preloaderView),this.preloaderView.destroy()},e}(egret.DisplayObjectContainer);__reflect(Application.prototype,"Application");var PayLine=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){this.drawLineShadow(),this.drawLine()},e.prototype.drawLine=function(){var t=this.retrieveLine(),e=this._positions[0],i=e[0],o=e[1];t.graphics.moveTo(i,o);for(var n=0,r=this._positions;n<r.length;n++){var s=r[n],a=s[0],h=s[1];t.graphics.lineTo(a,h)}this.addChild(t)},e.prototype.drawLineShadow=function(){var t=this.retrieveLineShadow(),e=this._positions[0],i=e[0],o=e[1];t.graphics.moveTo(i,o);for(var n=0,r=this._positions;n<r.length;n++){var s=r[n],a=s[0],h=s[1];t.graphics.lineTo(a,h)}this.addChild(t)},e.prototype.retrieveLine=function(){var t=new egret.Shape;return t.graphics.lineStyle(5,this._color,1,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.MITER),t},e.prototype.retrieveLineShadow=function(){var t=new egret.Shape;return t.graphics.lineStyle(8,0,.4,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.MITER),t},e.prototype.showCustomMethod=function(){this.visible=!0},e.prototype.hideCustomMethod=function(){this.visible=!1},e.prototype.destroyCustomMethod=function(){},e}(PayLinePrototype);__reflect(PayLine.prototype,"PayLine",["IPayLine"]);var DraggerPrototype=function(t){function e(){var e=t.call(this)||this;return e._isTouch=!1,e}return __extends(e,t),e.prototype.init=function(t){var e=this._target=t;e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),e.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchBegin=function(t){ApplicationData.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this);var e=this._target;e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this._isTouch=!0,this._currentX=this._currentY=void 0,this._initX=t.stageX-e.x,this._initY=t.stageY-e.y},e.prototype.onTouchEnd=function(t){ApplicationData.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this);var e=this._target;e.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this._isTouch=!1,this._currentX=this._currentY=void 0,this._endX=t.stageX,this._endY=t.stageY},e.prototype.onTouchMove=function(t){if(this._isTouch){var e=this._target;e.x=t.stageX-this._initX,e.y=t.stageY-this._initY,this._currentX=t.stageX,this._currentY=t.stageY}},e.prototype.destroy=function(){ApplicationData.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this);var t=this._target;t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e}(egret.EventDispatcher);__reflect(DraggerPrototype.prototype,"DraggerPrototype");var GameView=function(t){function e(){var e=t.call(this)||this;return e._spinnings=[],e._resultReels=[],e._symbols=[],e}return __extends(e,t),e.prototype.getSkinName=function(){return"resource/exml/view/GameView.exml"+GameUtil.preventCache("GameView")},e.prototype.retrieveBigWinOverlay=function(){return new ProgressiveBigWinOverlay},e.prototype.retrieveAutoSpinPanel=function(){return new AutoSpinPanel},e.prototype.retrieveSpinPanel=function(){return new BetPanel},e.prototype.loadCustomMethod=function(){this._panel=this.retrieveSpinPanel(),this._panel.once("EuiViewReady",this.onSkinLoadComplete,this),this._panel.load(),this._autoSpinPan=this.retrieveAutoSpinPanel(),this._autoSpinPan.once("EuiViewReady",this.onSkinLoadComplete,this),this._autoSpinPan.load(),this._bigWin=this.retrieveBigWinOverlay(),this._bigWin.once("EuiViewReady",this.onSkinLoadComplete,this),this._bigWin.load()},e.prototype.onSkinLoadComplete=function(){this.isLoaded()&&this._panel.isLoaded()&&this._bigWin.isLoaded()&&this._autoSpinPan.isLoaded()&&this.dispatchViewReady()},e.prototype.viewConfigurations=function(){},e.prototype.createCustomMethod=function(){this.viewConfigurations(),this.createBetPanel(),this.createSpinningReels(),this.createResultsGroup(),this.createInactiveGroup(),this.cacheMovieClips()},e.prototype.createBetPanel=function(){var t=this._eui.BetPanelContainer;t.addChild(this._panel)},e.prototype.retrieveSpinningReel=function(){return new SpinningBitmapReel},e.prototype.createSpinningReels=function(){for(var t=GameData.TotalReels,e=this._eui.SpinningReelsContainer,i=0;t>i;i++){var o=this.retrieveSpinningReel();e.addChild(o),this._spinnings.push(o)}},e.prototype.retrieveResultReel=function(){return new ResultReel},e.prototype.retrieveSymbol=function(){return new SlotSymbol},e.prototype.createResultsGroup=function(){for(var t=GameData.TotalReels,e=GameData.TotalRows,i=this._eui.ResultReelsContainer,o=0,n=0;t>n;n++){var r=this.retrieveResultReel();this._resultReels.push(r);for(var s=0;e>s;s++){var a=this.retrieveSymbol();a.id=o++,i.addChild(a),r.symbols.push(a),this._symbols.push(a)}}},e.prototype.retrieveInactiveSymbol=function(){return new egret.Bitmap},e.prototype.createInactiveGroup=function(){for(var t=GameData.TotalReels,e=GameData.TotalRows,i=this._eui.InactiveReelsContainer,o=0;t>o;o++)for(var n=this._resultReels[o],r=0;e>r;r++){var s=this.retrieveInactiveSymbol();i.addChild(s),n.inactiveSymbols.push(s)}},e.prototype.retrieveResultDataHandler=function(){return new ResultDataHandler},e.prototype.retrieveSoundController=function(){return new SoundController},e.prototype.retrieveSpinningClimax=function(){return new SpinningClimax},e.prototype.retrieveConnector=function(){return new SpinConnector},e.prototype.retrieveWinPanel=function(){return new WinPanel},e.prototype.initCustomMethod=function(t,e){this._appView=t,this._pay=e,this._connector=this.retrieveConnector(),this._dataHdlr=this.retrieveResultDataHandler(),this._dataHdlr.init(),this._snd=this.retrieveSoundController(),this._snd.init(),this._winPan=this.retrieveWinPanel(),this._winPan.init(this._eui.WinContainer),this._panel.init(),this.initSymbols(),this.initSpinningClimax(),this.initOverlays(),this.initAutoSpinPanel(),this.initInactiveGroup(),this.initSpinningReels(),this.initResultsGroup(),this.initSpinController(),this.initSequenceController()},e.prototype.initSymbols=function(){for(var t=0,e=this._symbols;t<e.length;t++){var i=e[t];i.init()}},e.prototype.initSpinningClimax=function(){this._spinningClimax=this.retrieveSpinningClimax(),this._spinningClimax.init();var t=this._eui.ClimaxContainer;t.addChild(this._spinningClimax),this._spinningClimax.y=t.height/2},e.prototype.initAutoSpinPanel=function(){var t=this._appView.AutoSpinContainer;t.addChild(this._autoSpinPan),this._autoSpinPan.init()},e.prototype.initOverlays=function(){var t=this._appView.OverlaysContainer;t.addChild(this._bigWin),this._bigWin.init()},e.prototype.initSpinningReels=function(){for(var t=GameData.TotalRows,e=GameData.SymbolBmpWidth,i=GameData.SymbolWidth,o=GameData.SymbolHeight,n=this._eui.SpinningReelsContainer,r=this._resultReels.length,s=n.width/r-i,a=-(t*o-n.height)/2,h=0;h<this._spinnings.length;h++){var l=this._spinnings[h];l.visible=!1,l.x=(i+s)*h,l.x-=(e-i)/2,l.y+=a,l.id=h,l.init()}},e.prototype.initResultsGroup=function(){for(var t=GameData.TotalRows,e=GameData.SymbolWidth,i=GameData.SymbolHeight,o=this._eui.ResultReelsContainer,n=this._resultReels.length,r=o.width/n-e,s=-(t*i-o.height)/2,a=0;a<this._resultReels.length;a++){for(var h=this._resultReels[a],l=h.symbols,p=0;p<l.length;p++){var u=l[p];u.reelId=a,u.rowId=p,u.name=a+p.toString(),u.x=(e+r)*a,u.x+=e/2,u.y=i*p,u.y+=i/2,u.y+=s}var c=this._spinnings[a];h.init(c),h.id=a}},e.prototype.initInactiveGroup=function(){for(var t=GameData.TotalRows,e=GameData.SymbolBmpWidth,i=GameData.SymbolBmpHeight,o=GameData.SymbolWidth,n=GameData.SymbolHeight,r=this._eui.InactiveReelsContainer,s=this._resultReels.length,a=r.width/s-o,h=-(t*n-r.height)/2,l=0;l<this._resultReels.length;l++)for(var p=this._resultReels[l],u=p.inactiveSymbols,c=0;c<u.length;c++){var d=u[c];d.x=(o+a)*l,d.x-=(e-o)/2,d.y=n*c,d.y-=(i-n)/2,d.y+=h,d.visible=!1}},e.prototype.retrieveSpinController=function(){return new SpinController},e.prototype.initSpinController=function(){this._spinCtrl=this.retrieveSpinController(),this._spinCtrl.init(this._spinnings,this._resultReels,this._spinningClimax)},e.prototype.retrieveSequenceController=function(){return new SequenceController},e.prototype.initSequenceController=function(){this._seqCtrl=this.retrieveSequenceController(),this._seqCtrl.init(this._resultReels,this._bigWin,this._panel,this._pay)},e.prototype.startCustomMethod=function(){this.registerListeners(),this._panel.updateStatus("SpinPanelChannel",106),this._panel.updateStatus("SpinPanelChannel",100),this._panel.updateStatus("SpinPanelChannel",104),this._snd.updateStatus("GameViewChannel",0)},e.prototype.stopCustomMethod=function(){this.unregisterListeners()},e.prototype.pauseCustomMethod=function(){this.unregisterListeners(),this._winPan.updateStatus("GameViewChannel",1)},e.prototype.resumeCustomMethod=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.notify("GameViewChannel",6),this.resumeResults(),ResultData.TriggerSymbolsMap.size>0?this.continueFreeGameHandler():AutoSpinData.isActive&&AutoSpinData.Total>0?(this.continueAutoSpinHandler(),this._snd.updateStatus("GameViewChannel",0)):this.startCustomMethod()},e.prototype.resumeResults=function(){this._resultReels.forEach(function(t,e){t.parseResults(ResultData.ResultGrid[e]),t.updateStatus("SequenceChannel",13)}),this._spinnings.forEach(function(t,e){t.updateResultSymbols(ResultData.ResultGrid[e])})},e.prototype.continueFreeGameHandler=function(){ResultData.GameMode=1,this._seqCtrl.updateStatus("SequenceChannel",11)},e.prototype.continueAutoSpinHandler=function(){var t=this;this.registerListeners(),this._panel.updateStatus("SpinPanelChannel",106),TweenMax.delayedCall(1,function(){return t._spinCtrl.updateStatus("SequenceChannel",9)})},e.prototype.registerListeners=function(){EventManager.register("ConnectorChannel",this),EventManager.register("ConnectorChannel",this._dataHdlr),EventManager.register("SpinChannel",this._panel),EventManager.register("SpinChannel",this._seqCtrl),EventManager.register("SpinChannel",this._winPan),EventManager.register("SpinChannel",this._snd),EventManager.register("ResultChannel",this._spinCtrl),EventManager.register("ResultChannel",this._seqCtrl),EventManager.register("SpinPanelChannel",this._spinCtrl),EventManager.register("SpinPanelChannel",this._panel),EventManager.register("SpinPanelChannel",this._snd),EventManager.register("SpinPanelChannel",this),EventManager.register("SequenceChannel",this._spinCtrl),EventManager.register("SequenceChannel",this._winPan),EventManager.register("SequenceChannel",this._snd),EventManager.register("NoticeChannel",this),EventManager.register("keyboard",this._panel)},e.prototype.unregisterListeners=function(){EventManager.unregisterChannel("ConnectorChannel"),EventManager.unregisterChannel("SpinChannel"),EventManager.unregisterChannel("ResultChannel"),EventManager.unregisterChannel("SpinPanelChannel"),EventManager.unregisterChannel("SequenceChannel"),EventManager.unregister("NoticeChannel",this),EventManager.unregisterChannel("keyboard")},e.prototype.updateStatus=function(t,e,i){switch(t){case"NoticeChannel":1005===e&&(this._panel.updateStatus("SpinPanelChannel",106),this._panel.updateStatus("SpinPanelChannel",108),this._panel.updateStatus("SpinPanelChannel",100),this._panel.updateStatus("SpinPanelChannel",104)),this._snd.updateStatus(t,e);break;case"ConnectorChannel":2===e&&this._connector.connect();break;case"SpinPanelChannel":switch(e){case 5:this._autoSpinPan.show()}}},e.prototype.notify=function(t,e,i){EventManager.notify(t,e,i)},e.prototype.destroyCustomMethod=function(){this.stopCustomMethod(),this._dataHdlr.destroy(),this._seqCtrl.destroy(),this._spinCtrl.destroy(),this._snd.destroy(),this._panel.destroy(),this._spinCtrl.destroy(),this._spinningClimax.destroy();for(var t=0,e=this._spinnings;t<e.length;t++){var i=e[t];i.destroy()}for(var o=0,n=this._resultReels;o<n.length;o++){var r=n[o];r.destroy()}for(var s=0,a=this._symbols;s<a.length;s++){var h=a[s];h.destroy()}this._bigWin.destroy(),this._winPan.destroy(),this._autoSpinPan.destroy()},e}(GameViewPrototype);__reflect(GameView.prototype,"GameView",["IGameView"]);var BonusGameViewPrototype=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return"resource/exml/view/BonusGameView.exml"+GameUtil.preventCache("BonusGameView")},e.prototype.init=function(){this.initCustomMethod()},e.prototype.start=function(){this.startCustomMethod()},e.prototype.stop=function(){this.stopCustomMethod()},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.updateStatus=function(t,e,i){},e.prototype.notify=function(t,e,i,o){void 0===o&&(o=!0),EventManager.notify(t,e,i,o)},e.prototype.destroy=function(){this.destroyCustomMethod()},e}(EuiView);__reflect(BonusGameViewPrototype.prototype,"BonusGameViewPrototype");var MovieClipSymbol=function(t){function e(){var e=t.call(this)||this;return e._isMc=!1,e}return __extends(e,t),e.prototype.createCustomMethod=function(){this.createViewBitmap(),this.createViewMovieClip()},e.prototype.createViewMovieClip=function(){this._viewMc=new MovieClip,this.addChild(this._viewMc);var t=GameData.SymbolMcWidth,e=GameData.SymbolMcHeight;this._viewMc.anchorOffsetX=t/2,this._viewMc.anchorOffsetY=e/2,this._viewMc.addEventListener("MovieclipAnimationComplete",this.onViewMcAnimationComplete,this)},e.prototype.initCustomMethod=function(){this._viewBmp.visible=!0,this._viewMc.visible=!1},e.prototype.updateView=function(){var t=SymbolManager.getTexture(this.viewId);this._viewBmp.texture=t,this._isMc=SymbolManager.isMovieClip(this.viewId),this._isMc&&(void 0===this._viewMc.currentClip?this._viewMc.addNewClip("s"+this.viewId):this._viewMc.currentClip.update("s"+this.viewId))},e.prototype.idleMethod=function(){this._viewBmp.visible=!0,this._viewMc.visible=!1,this._viewMc.currentClip&&this._viewMc.gotoAndStop(1),TweenMax.killDelayedCallsTo(this.animationCompleteHandler)},e.prototype.showWinMethod=function(){this._isMc?(this._viewBmp.visible=!1,this._viewMc.visible=!0,this._viewMc.gotoAndPlay(1)):TweenMax.delayedCall(2,this.animationCompleteHandler,["SymbolChannel",1],this)},e.prototype.triggerMethod=function(){this._viewBmp.visible=!1,this._viewMc.visible=!0,this._viewMc.gotoAndPlay(1)},e.prototype.onViewMcAnimationComplete=function(){this.animationCompleteHandler("SymbolChannel",this._status)},e.prototype.destroyCustomMethod=function(){this._viewMc.removeEventListener("MovieclipAnimationComplete",this.onViewMcAnimationComplete,this),this._viewMc.destroy()},e}(SlotSymbol);__reflect(MovieClipSymbol.prototype,"MovieClipSymbol");var Game=function(t){function e(){var e=t.call(this)||this;return e.create(),e}return __extends(e,t),e.prototype.create=function(){this._view=this.retrieveGameView(),this.addChild(this._view)},e.prototype.init=function(){this.initCustomMethod(),this._view.init(),this.dispatchGameReadyEvent()},e.prototype.destroy=function(){this.destroyCustomMethod(),this._view.destroy(),this._view=null,t.prototype.destroy.call(this)},e}(GamePrototype);__reflect(Game.prototype,"Game");var SequenceController=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._resultReels=[],e._activeReels=[],e}return __extends(e,t),e.prototype.initCustomMethod=function(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this._resultReels=t;for(var n=0,r=this._resultReels;n<r.length;n++){var s=r[n];s.addEventListener("WinMethodComplete",this.onReelWinMethodComplete,this),s.addEventListener("TriggerMethodComplete",this.onReelTriggerMethodComplete,this)}this._bigWin=e,this._bigWin.addEventListener("HideComplete",this.onBigWinComplete,this)},e.prototype.onResultReady=function(){this.onStopReady(),TweenMax.delayedCall(1,this.requestStop,[],this)},e.prototype.onSpinStart=function(){this._status=0,this._activeReels.length=0,TweenMax.killDelayedCallsTo(this.requestSpin),this.notify("SequenceChannel",1)},e.prototype.onSpinComplete=function(){var t=this;TweenMax.delayedCall(0,function(e){return t.startSequence()})},e.prototype.startSequence=function(){this.isWin()?this.winHandler():this.noWinHandler()},e.prototype.winHandler=function(){if(AutoSpinData.isTrackWin&&(AutoSpinData.AllowedWin-=ResultData.CurrentWin,AutoSpinData.AllowedWin<=0&&this.notify("SpinPanelChannel",108)),AutoSpinData.isTrackLoss){var t=GameData.TotalBet-ResultData.CurrentWin;t>0&&(AutoSpinData.AllowedLoss-=t,AutoSpinData.AllowedLoss<=0&&this.notify("SpinPanelChannel",108))}this.winSequenceMethod()},e.prototype.winSequenceMethod=function(){this.isBigWin()?this.showBigWin():this.showAllWinSymbols()},e.prototype.showBigWin=function(){this._status=6,this._bigWin.show(ResultData.CurrentWin),this.notify("SequenceChannel",6)},e.prototype.onBigWinComplete=function(){this.showAllWinSymbols()},e.prototype.showAllWinSymbols=function(){this._status=4,this.showAllWinSymbolsMethod(),this.updateWinAmountHandler(),this.notify("SequenceChannel",4)},e.prototype.showAllWinSymbolsMethod=function(){(n=this._activeReels).push.apply(n,this._resultReels);for(var t=GameData.TotalReels,e=this.getWinningSymbols(),i=0;t>i;i++){var o=this._resultReels[i];o.updateStatus("SequenceChannel",4,e[i])}var n},e.prototype.updateWinAmountHandler=function(){var t;switch(!0){case 0===GameData.CurrentGameMode&&this.isFreeSpin()&&0===GameData.FreeSpins[0]:t=102;break;default:t=101}this.notify("SequenceChannel",t,null,!1),101===t&&this.notify("SequenceChannel",100,null,!1)},e.prototype.onReelWinMethodComplete=function(t){var e=t.currentTarget,i=this._activeReels.indexOf(e);-1===i?!1:this._activeReels.splice(i,1),0===this._activeReels.length&&this.onAllWinSymbolsComplete()},e.prototype.onAllWinSymbolsComplete=function(){this.notify("SequenceChannel",5),this.sequenceEndHandler()},e.prototype.noWinHandler=function(){AutoSpinData.isTrackLoss&&(AutoSpinData.AllowedLoss-=GameData.TotalBet,AutoSpinData.AllowedLoss<=0&&this.notify("SpinPanelChannel",108)),this.sequenceEndHandler()},e.prototype.sequenceEndHandler=function(){switch(this._status=13,!0){case this.isNextGameMode():this.onNextGameMode();break;case this.isFreeSpin():this.triggerFreeSpin();break;case this.isAutoNextSpin():this.triggerNextAutoSpin();break;default:this.onSpinReady(),this.onBetReady()}},e.prototype.triggerFreeSpin=function(){TweenMax.delayedCall(.3,this.requestSpin,[],this)},e.prototype.triggerNextAutoSpin=function(){this.onSpinReady(),TweenMax.delayedCall(.3,this.requestSpin,[],this)},e.prototype.requestSpin=function(){this.notify("SequenceChannel",9)},e.prototype.requestStop=function(){this.notify("SequenceChannel",2)},e.prototype.onNextGameMode=function(){AutoSpinData.isActive&&AutoSpinData.StopOnGameMode.indexOf(ResultData.GameMode)>-1&&AutoSpinData.Total>0&&EventManager.notify("SpinPanelChannel",108),this.showTriggerSymbols()},e.prototype.showTriggerSymbols=function(){this._status=11,this.showTriggerSymbolsMethod(),this.notify("SequenceChannel",11)},e.prototype.showTriggerSymbolsMethod=function(){(n=this._activeReels).push.apply(n,this._resultReels);for(var t=GameData.TotalReels,e=this.getTriggerSymbols(),i=0;t>i;i++){var o=this._resultReels[i];o.updateStatus("SequenceChannel",105,e[i])}var n},e.prototype.getTriggerSymbols=function(){var t=ResultData.GameMode,e=ResultData.TriggerSymbolsMap;return 4===t?e.get(3):1===t?e.get(2):void 0},e.prototype.onReelTriggerMethodComplete=function(t){var e=t.currentTarget,i=this._activeReels.indexOf(e);-1===i?!1:this._activeReels.splice(i,1),0===this._activeReels.length&&this.onTriggerSymbolsComplete()},e.prototype.onTriggerSymbolsComplete=function(){this._status=12,this.notify("SequenceChannel",12),this.notify("GameViewChannel",5,ResultData.GameMode)},e.prototype.onSpinReady=function(){this.isFreeSpin()||this.isNextGameMode()||(this.notify("SpinPanelChannel",100),this.notify("SpinPanelChannel",106))},e.prototype.onStopReady=function(){this.notify("SpinPanelChannel",102)},e.prototype.onBetReady=function(){AutoSpinData.Total>0||this.isFreeSpin()||this.isNextGameMode()||this.notify("SpinPanelChannel",104)},e.prototype.updateStatus=function(e,i,o){"SequenceChannel"===e&&11===i?this.showTriggerSymbols():t.prototype.updateStatus.call(this,e,i,o)
},e.prototype.isFreeSpin=function(){return 0===GameData.CurrentGameMode?0===ResultData.GameMode&&GameData.FreeSpins>0:1===ResultData.GameMode},e.prototype.isWin=function(){return ResultData.CurrentWin>0},e.prototype.isBigWin=function(){return ResultData.WinRatio>=GameData.BigWinRatio[0]},e.prototype.getWinningSymbols=function(){return ResultData.WinningSymbols},e.prototype.isAutoNextSpin=function(){return AutoSpinData.isActive&&AutoSpinData.Total>0},e.prototype.isNextGameMode=function(){return ResultData.TriggerSymbolsMap.size>0},e.prototype.destroyCustomMethod=function(){for(var t=0,e=this._resultReels;t<e.length;t++){var i=e[t];i.removeEventListener("WinMethodComplete",this.onReelWinMethodComplete,this),i.removeEventListener("TriggerMethodComplete",this.onReelTriggerMethodComplete,this)}this._bigWin.removeEventListener("HideComplete",this.onBigWinComplete,this)},e}(SequenceControllerPrototype);__reflect(SequenceController.prototype,"SequenceController",["ISequenceController","IEventListener"]);var SpinningReelPrototype=function(t){function e(){var e=t.call(this)||this;return e._totalRows=1,e._symbols=[],e.create(),e}return __extends(e,t),e.prototype.create=function(){for(var t=GameData.TotalSymbolsPerReels,e=0;t>e;e++){var i=this.retrieveSymbol();this.addChild(i),this._symbols.push(i)}},e.prototype.init=function(){this.initCustomMethod(),this._maxY=this.getMaxY(),this.loopHack(),this.initCamera(),this.initSymbolsProperties(),this.initTweens()},e.prototype.loopHack=function(){for(var t=0;t<this._totalRows;t++){var e=this._symbols[t],i=DisplayObjectUtil.clone(e);this._symbols.push(i),this.addChild(i)}},e.prototype.initCamera=function(){this._camera=this.retrieveCamera(),this.scrollRect=this._camera},e.prototype.getMaxY=function(){return GameData.SymbolHeight*this._symbols.length},e.prototype.initSymbolsProperties=function(){for(var t=GameData.SymbolHeight,e=0;e<this._symbols.length;e++){var i=this._symbols[e];i.y=-t*e}},e.prototype.initTweens=function(){this._loopTween=this.retrieveLoopTween()},e.prototype.onAnimationUpdate=function(){this.scrollRect=this._camera},e.prototype.start=function(){this.startMethod()},e.prototype.stop=function(t){this.stopMethod()},e.prototype.instantStop=function(t){this.instantStopMethod()},e.prototype.destroy=function(){this.destroyCustomMethod(),this._loopTween.kill(),this._stopTween&&this._stopTween.kill(),this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(SpinningReelPrototype.prototype,"SpinningReelPrototype");var SpinControllerPrototype=function(){function t(){}return t.prototype.init=function(t,e,i){for(var o=[],n=3;n<arguments.length;n++)o[n-3]=arguments[n];this.initCustomMethod.apply(this,[t,e,i].concat(o))},t.prototype.updateStatus=function(t,e,i){switch(t){case"ResultChannel":this.resultStatusHandler(e,i);break;case"SpinPanelChannel":this.buttonStatusHandler(e,i);break;case"SequenceChannel":this.sequenceStatusHandler(e,i)}},t.prototype.resultStatusHandler=function(t,e){1===t&&this.parseResults(e)},t.prototype.buttonStatusHandler=function(t,e){switch(t){case 0:this.start();break;case 1:this.stop(!0)}},t.prototype.start=function(){this.startSpinMethod(),this.notify("SpinChannel",1)},t.prototype.stop=function(t){this.stopSpinMethod()},t.prototype.sequenceStatusHandler=function(t,e){switch(t){case 9:this.requestStartSpin();break;case 2:this.requestStopSpin()}},t.prototype.notify=function(t,e,i,o){void 0===o&&(o=!0),EventManager.notify(t,e,i,o)},t.prototype.destroy=function(){this.destroyCustomMethod()},t}();__reflect(SpinControllerPrototype.prototype,"SpinControllerPrototype");var SpinPanelPrototype=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.initCustomMethod()},e.prototype.updateStatus=function(t,e,i){switch(t){case"SpinChannel":this.spinStatusHandler(e,i);break;case"SpinPanelChannel":this.panelStatusHandler(e,i);break;case"keyboard":this.keyboardStatusHandler(e,i)}},e.prototype.spinStatusHandler=function(t,e){switch(t){case 0:this.onSpinComplete();break;case 1:this.onSpinStart()}},e.prototype.notify=function(t,e,i){EventManager.notify(t,e,i)},e.prototype.destroy=function(){this.destroyCustomMethod(),t.prototype.destroy.call(this)},e}(EuiView);__reflect(SpinPanelPrototype.prototype,"SpinPanelPrototype");var Paytable=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Panels+"Paytable.exml"+GameUtil.preventCache("Paytable")},e.prototype.retrievePayRatesController=function(){return new PayRatesController},e.prototype.initCustomMethod=function(){this._backdrop=this._eui.Backdrop,this._backdrop.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._closeBtn=this._eui.BtnClose,this._closeBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._ratesCtrl=this.retrievePayRatesController(),this._ratesCtrl.init(this._eui),this._isActive=this.visible=!1,this._isAllowSpin=!1},e.prototype.onCloseTouch=function(t){this.hide()},e.prototype.showCustomMethod=function(){this._isActive=this.visible=!0},e.prototype.hideCustomMethod=function(){this._isActive=this.visible=!1,this.dispatchHideComplete()},e.prototype.updateStatus=function(t,e,i){this._ratesCtrl.updateStatus(t,e,i)},e.prototype.isActive=function(){return this._isActive},e.prototype.isAllowAutoSpin=function(){return this._isAllowSpin},e.prototype.destroyCustomMethod=function(){this._backdrop.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._closeBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._ratesCtrl.destroy()},e}(OverlayPrototype);__reflect(Paytable.prototype,"Paytable",["IPaytable","IEuiView"]);var SpinningClimaxPrototype=function(t){function e(){var e=t.call(this)||this;return e.create(),e}return __extends(e,t),e.prototype.create=function(){this.createCustomMethod()},e.prototype.init=function(){this.initCustomMethod()},e.prototype.show=function(){this.showCustomMethod()},e.prototype.hide=function(){this.hideCustomMethod()},e.prototype.destroy=function(){this.destroyCustomMethod(),this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(SpinningClimaxPrototype.prototype,"SpinningClimaxPrototype");var LineWinGameView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.retrievePayLineController=function(){return new PayLineController},e.prototype.retrieveLineWinIndicator=function(){return new LineWinIndicator},e.prototype.retrievePaytable=function(){return new LineWinPaytable},e.prototype.retrievePayLine=function(){return new PayLine},e.prototype.createCustomMethod=function(){this.createPayLines(),t.prototype.createCustomMethod.call(this)},e.prototype.createPayLines=function(){this._payLineCtrl=this.retrievePayLineController();for(var t=this._eui.PayLinesContainer,e=GameData.PayLines.length,i=0;e>i;i++){var o=this.retrievePayLine();t.addChild(o),o.id=i,this._payLineCtrl.register(o)}},e.prototype.initCustomMethod=function(e,i){t.prototype.initCustomMethod.call(this,e,i),this._lineWinInd=this.retrieveLineWinIndicator();var o=this._eui.LineWinIndicator;this._lineWinInd.init(o),this._payLineCtrl.init(this._resultReels)},e.prototype.registerListeners=function(){t.prototype.registerListeners.call(this),EventManager.register("SpinChannel",this._payLineCtrl),EventManager.register("SpinChannel",this),EventManager.register("SequenceChannel",this._payLineCtrl),EventManager.register("SequenceChannel",this)},e.prototype.updateStatus=function(e,i,o){t.prototype.updateStatus.call(this,e,i,o),"SpinChannel"===e&&1===i?this._lineWinInd.hide():"SequenceChannel"===e&&201===i&&this.showWinSequence(o)},e.prototype.showWinSequence=function(t){this._lineWinInd.show(t);var e=GameData.TotalReels,i=GameData.SymbolWidth,o=GameData.SymbolHeight,n=t.SymbolsId.length,r=Math.floor(e/2),s=r>n?n:r,a=t.Position[s][0];s*=i,s+=i/2,a*=o,a+=o/2;var h=this._eui.LineWinIndicator;h.x=s,h.y=a},e.prototype.destroyCustomMethod=function(){this._lineWinInd.destroy(),this._payLineCtrl.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(GameView);__reflect(LineWinGameView.prototype,"LineWinGameView");var LineWinPaytable=function(t){function e(){var e=t.call(this)||this;return e._linesInd=[],e}return __extends(e,t),e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this),this.createPayLines()},e.prototype.createPayLines=function(){for(var t=GameData.PayLines,e=GameData.TotalRows,i=GameData.TotalReels,o=RES.getRes("config_json").PayLines,n=t.length,r=0;n>r;r++){for(var s=[],a=0,h=t[r];a<h.length;a++){var l=h[a],p=Math.floor(l/i)%e;s.push(p)}var u=o.colors[r]||o.colors[0];this.createPayLineIndicator(r,s,u)}},e.prototype.retrievePayLineIndicator=function(){return new ConnectedPayLineIndicator},e.prototype.createPayLineIndicator=function(t,e,i){var o=this._eui["Line"+t],n=o.getChildByName("index");n.text=(t+1).toString();var r=this.retrievePayLineIndicator();o.addChild(r),this._linesInd.push(r);var s=2;r.width=o.width-n.width-s,r.height=o.height,r.init(e,i),r.x=n.x+n.width+s,r.cacheAsBitmap=!0},e.prototype.updateStatus=function(t,e,i){switch(this._ratesCtrl.updateStatus(t,e,i),t){case"SpinChannel":1===e&&this.onSpinStart();break;case"SequenceChannel":switch(e){case 4:this.hideAllWinLines(),this.showAllWinLines();break;case 201:this.hideAllWinLines(),this.showLine(i);break;case 11:case 13:this.resetLineWin()}}},e.prototype.showAllWinLines=function(){var t=this,e=ResultData.WinSequenceMap;e.forEach(function(e){return t.showLine(e)})},e.prototype.hideAllWinLines=function(){for(var t=0,e=this._linesInd;t<e.length;t++){var i=e[t];i.hide()}},e.prototype.showLine=function(t){var e=t;this._linesInd[e.LineId].show(e.SymbolsId.length,e.Direction)},e.prototype.resetLineWin=function(){for(var t=0,e=this._linesInd;t<e.length;t++){var i=e[t];i.reset()}},e.prototype.onSpinStart=function(){this.resetLineWin()},e.prototype.destroyCustomMethod=function(){for(var e=0,i=this._linesInd;e<i.length;e++){var o=i[e];o.destroy()}t.prototype.destroyCustomMethod.call(this)},e}(Paytable);__reflect(LineWinPaytable.prototype,"LineWinPaytable");var BonusGameView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){},e.prototype.startCustomMethod=function(){ResultData.TriggerSymbolsMap["delete"](3),this.notify("GameViewChannel",6)},e.prototype.onButtonTouch=function(t){},e.prototype.stopCustomMethod=function(){},e.prototype.pauseCustomMethod=function(){},e.prototype.resumeCustomMethod=function(){},e.prototype.onBonusGameComplete=function(){ResultData.Balance+=BonusGameData.TotalWin,this.dispatchSwitchEvent()},e.prototype.dispatchSwitchEvent=function(){this.notify("GameViewChannel",5,0)},e.prototype.destroyCustomMethod=function(){this.removeChildren()},e}(BonusGameViewPrototype);__reflect(BonusGameView.prototype,"BonusGameView",["IGameView"]);var WinIndicatorPrototype=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.retriveWinCounter=function(){return new WinCounter},e.prototype.init=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.initCustomMethod.apply(this,t)},e.prototype.show=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.showCustotmMethod.apply(this,t)},e.prototype.hide=function(){this.hideCustomMethod()},e.prototype.destroy=function(){this.destroyCustomMethod(),this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(WinIndicatorPrototype.prototype,"WinIndicatorPrototype");var GameViewControllerPrototype=function(){function t(){this._views=new Map}return t.prototype.init=function(t,e,i){this._eui=t,this._mainPan=e,this._pay=i},t.prototype.register=function(t,e){var i;switch(t){case 0:i=this._eui.BaseGameContainer;break;case 1:i=this._eui.FreeGameContainer;break;case 4:i=this._eui.BonusGameContainer;break;case 5:case 6:case 2:case 3:i=this._eui.EnterExitViewContainer}i.addChild(e),this._views.set(t,e)},t.prototype.initView=function(t){this._views.get(t).init(this._eui,this._pay)},t.prototype.updateStatus=function(t,e,i){if("GameViewChannel"==t)switch(e){case 0:this.startGameView(i);break;case 1:this.pauseGameView(i);break;case 2:this.resumeGameView(i);break;case 4:this.destroyGameView(i);break;case 5:this.onSwitchGameView(i)}},t.prototype.destroy=function(){this.destroyCustomMethod(),this._views.forEach(function(t){return t.destroy()})},t}();__reflect(GameViewControllerPrototype.prototype,"GameViewControllerPrototype");var DBMovieClipPrototype=function(t){function e(e,i,o,n){var r=t.call(this)||this,s=r._factory=new dragonBones.EgretFactory;r.addArmatureToFactory(e,n),r._dbClip=s.buildArmatureDisplay(i),r.addChild(r._dbClip),r._currentClip=r._dbClip.animation.animationNames[0];var a=r._dbClip.armature.armatureData.frameRate;return o?(r._frameRate=o,r._dbClip.animation.timeScale=r._frameRate/a):r._frameRate=a,r._dbClip.addEventListener(dragonBones.AnimationEvent.COMPLETE,r.onAnimationComplete,r),r._dbClip.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,r.onLoopAnimationComplete,r),r}return __extends(e,t),e.prototype.addArmatureToFactory=function(t,e){var i=this._factory,o=RES.getRes(t+"_ske_json");if(i.addDragonBonesData(i.parseDragonBonesData(o)),e>0)for(var n=0;e>n;n++){var r=RES.getRes(t+"_tex_"+n+"_json"),s=RES.getRes(t+"_tex_"+n+"_png");i.addTextureAtlasData(i.parseTextureAtlasData(r,s))}else{var r=RES.getRes(t+"_tex_json"),s=RES.getRes(t+"_tex_png");i.addTextureAtlasData(i.parseTextureAtlasData(r,s))}},e.prototype.currentClipHandler=function(t){this._toFrame=1,"string"==typeof t?this._currentClip=t:this._toFrame=t},e.prototype.loopHandler=function(t){void 0===t?this._loopCounter=-1:-1===t?this._loopCounter=0:this._loopCounter=t+1},e.prototype.onLoopAnimationComplete=function(t){this.dispatchEventLoopAnimationComplete()},e.prototype.onAnimationComplete=function(t){this.dispatchAnimationComplete()},e.prototype.dispatchAnimationComplete=function(){this.dispatchEvent(new DBMovieClipEvent(DBMovieClipEvent.ANIMATION_COMPLETE))},e.prototype.dispatchEventLoopAnimationComplete=function(){this.dispatchEvent(new DBMovieClipEvent(DBMovieClipEvent.LOOP_ANIMATION_COMPLETE))},Object.defineProperty(e.prototype,"currentFrame",{get:function(){if(this._dbClip.animation.lastAnimationState){var t=this._dbClip.animation.lastAnimationState.totalTime,e=this._dbClip.animation.lastAnimationState.currentTime,i=e*this._frameRate/t;return Math.floor(i)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentClip",{get:function(){return this._dbClip.animation.lastAnimationState},enumerable:!0,configurable:!0}),e.prototype.isPlaying=function(){return this._dbClip.animation.isPlaying},e.prototype.destroy=function(){this._dbClip.removeEventListener(dragonBones.AnimationEvent.COMPLETE,this.onAnimationComplete,this),this._dbClip.removeEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onLoopAnimationComplete,this),dragonBones.WorldClock.clock.remove(this._dbClip.armature),this._dbClip.armature.dispose(),this._dbClip.dispose(),this._factory.clear(!0),this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(DBMovieClipPrototype.prototype,"DBMovieClipPrototype");var EVGame=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.load=function(){var t=this._view;t.once("EuiViewReady",this.onViewReady,this),t.load()},e.prototype.onViewReady=function(t){var e=this._view;e.isLoaded()&&this.dispatchGameReadyEvent()},e}(Game);__reflect(EVGame.prototype,"EVGame");var WinFrameMovieClipSymbol=function(t){function e(){var e=t.call(this)||this;return e._isMcFrame=!1,e}return __extends(e,t),e.prototype.createWinFrameMethod=function(){RES.hasRes("winframe")?(this._frame=RES.createBitmapByName("winframe"),this._isMcFrame=!1):(this._frame=RES.createMovieClipByName("winframe"),this._isMcFrame=!0),this.addChild(this._frame)},e.prototype.initWinFrameMethod=function(){this._frame.anchorOffsetX=this._frame.width/2,this._frame.anchorOffsetY=this._frame.height/2,this.hideWinFrameMethod()},e.prototype.idleWinFrameMethod=function(){this.hideWinFrameMethod()},e.prototype.showWinFrameMethod=function(){this._isMcFrame&&this._frame.gotoAndPlay(1,-1),this._frame.visible=!0},e.prototype.hideWinFrameMethod=function(){this._isMcFrame&&this._frame.gotoAndStop(1),this._frame.visible=!1},e.prototype.destroyWinFrameMethod=function(){this._isMcFrame&&this._frame.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(MovieClipSymbol);__reflect(WinFrameMovieClipSymbol.prototype,"WinFrameMovieClipSymbol");var GameViewEnterLoader=function(t){function e(){var e=t.call(this)||this;return e._totalItems=0,e._loadedItems=0,e._viewQueu=[],e.create(),e}return __extends(e,t),e.prototype.retrieveLoader=function(){return new GroupLoader},e.prototype.retrievePreloader=function(){return new Preloader},e.prototype.create=function(){this._loader=new GroupLoader,this._loader.init(this.onResourceLoadComplete,this.onResourceProgress,this.onResourceLoadError,this),this._preload=this.retrievePreloader(),this.addChild(this._preload),this._sndLoader=new Sound.SoundLoader,this._sndLoader.addEventListener("GroupLoadComplete",this.onResourceLoadComplete,this),this._sndLoader.addEventListener("SoundLoadComplete",this.onResourceProgress,this),this._sndLoader.addEventListener("SoundLoadError",this.onSoundResourceError,this)},e.prototype.loadGroups=function(t,e,i){if(void 0===i&&(i=!1),this._init=i,"string"==typeof t){var o=RES.getGroupByName(t).length;0!==o&&(this._totalItems+=o,this._loader.getGroup(t,e))}else for(var n=0,r=t;n<r.length;n++){var s=r[n];this.loadGroups(s,e)}},e.prototype.loadSoundGroups=function(t,e){if(void 0===e&&(e=!1),this._init=e,"string"==typeof t){var i=Sound.SoundManager.getGroupList(t).length;0!==i&&(this._totalItems+=i,this._sndLoader.loadGroup(t))}else for(var o=0,n=t;o<n.length;o++){var r=n[o];this.loadSoundGroups(r)}},e.prototype.loadEuiView=function(t,e){return void 0===e&&(e=!1),this._init=e,-1!=EuiViewData.skins.indexOf(t.getSkinName())?void t.load():(this._viewQueu.push(t),void this._totalItems++)},e.prototype.onSkinLoadComplete=function(){this.dispatchViewReady(),this._loaded=!1},e.prototype.onViewLoaded=function(t){this.onResourceProgress(),this.onResourceLoadComplete()},e.prototype.onResourceProgress=function(){this._loadedItems++,this._preload.updateProgress(this._loadedItems,this._totalItems)},e.prototype.onSoundResourceError=function(t){},e.prototype.onResourceLoadComplete=function(){if(this._init&&this.isViewLoaded())this.onLoadComplete(),this.reset();else if(this._loadedItems===this._totalItems-this._viewQueu.length){for(var t=0,e=this._viewQueu;t<e.length;t++){var i=e[t];i.once("EuiViewReady",this.onViewLoaded,this),i.load()}this._viewQueu.length=0}},e.prototype.onResourceLoadError=function(t){this.dispatchEventWith("LoadError")},e.prototype.onLoadComplete=function(){this.dispatchEventWith("LoadComplete")},e.prototype.isViewLoaded=function(){return this._loadedItems===this._totalItems&&this._totalItems>0&&this._loadedItems>0&&0===this._viewQueu.length},e.prototype.reset=function(){this._totalItems=0,this._loadedItems=0,this._viewQueu.length=0,this._init=!1},e.prototype.initCustomMethod=function(){this.visible=!1},e.prototype.showCustomMethod=function(){this.visible=!0},e.prototype.hideCustomMethod=function(){this.visible=!1,this.dispatchHideComplete()},e.prototype.dispatchHideComplete=function(){this.dispatchEventWith("HideComplete")},e.prototype.destroyCustomMethod=function(){this._sndLoader.removeEventListener("GroupLoadComplete",this.onResourceLoadComplete,this),this._sndLoader.removeEventListener("SoundLoadComplete",this.onResourceProgress,this),this._sndLoader.removeEventListener("SoundLoadError",this.onSoundResourceError,this),this._sndLoader.destroy(),this._preload.destroy(),this._loader.destroy()},e}(GameViewEnter);__reflect(GameViewEnterLoader.prototype,"GameViewEnterLoader",["IGameViewEnterLoader","IEuiView"]);var GameViewExit=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.initCustomMethod()},e.prototype.updateStatus=function(t,e,i){},e.prototype.show=function(){this.showCustomMethod()},e.prototype.hide=function(){this.hideCustomMethod()},e.prototype.destroy=function(){this.destroyCustomMethod(),this.removeChildren()},e}(EuiView);__reflect(GameViewExit.prototype,"GameViewExit",["IGameViewExit","IOverlay","IEventListener"]);var GameViewStage=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t){this._eui=t},e.prototype.updateStatus=function(t,e,i){},e.prototype.destroy=function(){},e}(egret.EventDispatcher);__reflect(GameViewStage.prototype,"GameViewStage",["IGameViewStage","IEventListener"]);var GameApplication=function(t){function e(){var e=t.call(this)||this;return e._isAssetsLoaded=!1,e._isSoundLoaded=!1,e}return __extends(e,t),e.prototype.initMobile=function(){t.prototype.initMobile.call(this),this.initLifeCycle()},e.prototype.initLifeCycle=function(){egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause(),Sound.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume(),Sound.resume()}},e.prototype.retrievePreloaderView=function(){return new GameLoaderView},e.prototype.initPreloaderView=function(t){Sound.SoundManager.init("sound_json"),this.preloaderView=this.retrievePreloaderView(),this.preloaderView.once("LoadComplete",this.preloadComplete,this),this.preloaderView.loadGroups("game"),this.preloaderView.loadSoundGroups("game"),this.stage.addChild(this.preloaderView),this.appViewCtrl.register(this.preloaderView)},e.prototype.preloadComplete=function(t){this._isAssetsLoaded=!0,this.createSceneHandler()},e.prototype.loadSoundComplete=function(){this._isSoundLoaded=!0,this.createSceneHandler()},e.prototype.createSceneHandler=function(){this._isAssetsLoaded&&this._isSoundLoaded&&(ApplicationData.isPc&&(this.initMouse(),this.initKeyboard()),this.createScene())},e.prototype.initMouse=function(){Mouse.enable(this.stage)},e.prototype.initKeyboard=function(){var t=new Keyboard.Keyboard;t.init()},e.prototype.retrieveGame=function(){return new GamePrototype},e.prototype.createScene=function(){var t=this.retrieveGame();t.once("GameReady",this.onGameReady,this),this.addChildAt(t,0),t.init(),this.appViewCtrl.register(t)},e.prototype.onGameReady=function(t){this.destroyPreloaderView()},e}(Application);__reflect(GameApplication.prototype,"GameApplication");var ResultDataHandler=function(){function t(){}return t.prototype.init=function(){GameData.FreeSpins=0,ResultData.ResultGrid.length=0},t.prototype.updateStatus=function(t,e,i){"ConnectorChannel"===t&&3===e&&this.parseResultData(i)},t.prototype.parseResultData=function(t){ResultData.ResultGrid.length=0,ResultData.WinRatio=0,ResultData.CurrentWin=0,ResultData.WinningSymbols.length=0,ResultData.WinSequenceMap.clear(),ResultData.TriggerSymbolsMap.clear(),ResultData.Balance=t.currentBalance,t.baseGameResult.totalWinAmount>0&&this.onWinDataHandler(t.baseGameResult),this.gameModeHandler(t),this.parseSpinResult(t.baseGameResult)},t.prototype.onWinDataHandler=function(t){ResultData.WinningSymbols=GameUtil.getEmptyNumArr(),t.winLines&&this.parseWinLines(t),ResultData.CurrentWin=t.totalWinAmount,ResultData.WinRatio=t.totalWinAmount/GameData.TotalBet},t.prototype.parseWinLines=function(t){for(var e=t.resultGrid,i=t.winLines,o=GameData.TotalRows,n=GameData.TotalReels,r=ResultData.WinningSymbols,s=ResultData.WinSequenceMap,a=0;a<i.length;a++){for(var h=GameUtil.getEmptyNumArr(),l=[],p=i[a],u=p.winLineInfo.iconIndexList,c=0;c<u.length;c++){var d=u[c]-1,_=d%n,y=Math.floor(d/n)%o;h[_].push(y),l.push(e[d]),-1===r[_].indexOf(y)&&r[_].push(y)}var m=void 0;h[0].length>0&&h[n-1].length>0?m=0:h[0].length>0?m=1:h[n-1].length>0&&(m=-1,l.reverse());var f={Index:a,Type:300,Position:h,SymbolId:p.winLineInfo.iconId,SymbolsId:l,Coin:p.winAmount,LineId:p.winLineInfo.lineId-1,Direction:m};s.set(a,f)}},t.prototype.gameModeHandler=function(t){ResultData.GameMode=0,t.freeTimeResultList&&this.onFreeGameHandler(t),t.bonusGameResult&&this.onBonusGameHandler(t)},t.prototype.onBonusGameHandler=function(t){},t.prototype.onFreeGameHandler=function(t){},t.prototype.getTriggerSymbol=function(t){var e;switch(t){case 1:e=2;break;case 4:e=3}return e},t.prototype.parseSpinResult=function(t){var e=t.resultGrid,i=GameData.TotalReels;ResultData.ResultGrid=ArrayUtil.toMatrix2(e,i),this.dispatchSpinResult(ResultData.ResultGrid)},t.prototype.getTriggerSymbols=function(){var t=[];switch(ResultData.GameMode){case 1:t=[2];break;case 4:t=[3]}return t},t.prototype.dispatchSpinResult=function(t){EventManager.notify("ResultChannel",1,t)},t.prototype.destroy=function(){},t}();__reflect(ResultDataHandler.prototype,"ResultDataHandler",["IResultDataHandler","IEventListener"]);var ParticleSystem;!function(t){var e=function(e){function i(t,i){void 0===t&&(t=[]),void 0===i&&(i=60);var o=e.call(this)||this;return o._isActive=!1,o._isStop=!0,o._isDestroy=!1,o._particlesPool=[],o._activePools=[],null===t&&(t=[]),o.create(),o.generateParticlesPool(t,i),o}return __extends(i,e),i.prototype.create=function(){this._src=new t.Source,this.addChild(this._src),this._src.alpha=0},i.prototype.addParticles=function(t,e){this.generateParticlesPool(t,e)},i.prototype.generateParticlesPool=function(t,e){for(var i=0;e>i;i++){var o=this.retrieveParticle(t);this.addChild(o),o.visible=!1,this._particlesPool.push(o),this._isStop||(this.assignParticle(o),this._activePools.push(o))}},i.prototype.init=function(t,e){this.width=t,this.height=e,this.initCustomMethod(),this._isStop=!1;for(var i=0,o=this._particlesPool;i<o.length;i++){var n=o[i];n.init()}},i.prototype.start=function(){this._isStop=!1,this._isActive||(this._isActive=!0,egret.Ticker.getInstance().register(this.onEnterFrame,this),this.startCustomMethod())},i.prototype.activeParticle=function(t){this._activePools.push(t),this.assignParticle(t),t.start()},i.prototype.stopTicker=function(){this._isActive=!1,egret.Ticker.getInstance().unregister(this.onEnterFrame,this)},i.prototype.pause=function(){egret.Ticker.getInstance().pause()},i.prototype.resume=function(){egret.Ticker.getInstance().resume()},i.prototype.stopCustomMethod=function(){},i.prototype.stop=function(){this.stopCustomMethod(),this._isStop=!0},i.prototype.stopAndDestroy=function(){this.stop(),this._isDestroy=!0},i.prototype.destroyCustomMethod=function(){},i.prototype.destroy=function(){this.destroyCustomMethod(),egret.Ticker.getInstance().unregister(this.onEnterFrame,this);for(var t=0,e=this._particlesPool;t<e.length;t++){var i=e[t];i.destroy()}this._particlesPool=null,this._activePools=null,this._src=null,this.removeChildren()},i}(egret.DisplayObjectContainer);t.ParticlesViewPrototype=e,__reflect(e.prototype,"ParticleSystem.ParticlesViewPrototype",["IParticlesView"])}(ParticleSystem||(ParticleSystem={}));var ProgressiveBigWinOverlayPrototype=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Overlays+"ProgressiveBigWinOverlay.exml"+GameUtil.preventCache("ProgressiveBigWin")},e.prototype.initCustomMethod=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._container=this._eui.Container,this._total=this._eui.Total,this.visible=!1},e.prototype.showCustomMethod=function(t){this.visible=!0,this._total.text=GameUtil.formatNumber(t),this.hide()},e.prototype.hideCustomMethod=function(){this.visible=!1,this.dispatchHideComplete()},e.prototype.destroyCustomMethod=function(){},e}(OverlayPrototype);__reflect(ProgressiveBigWinOverlayPrototype.prototype,"ProgressiveBigWinOverlayPrototype");var WinSoundHandlerPrototype=function(){function t(){}return t.prototype.init=function(){this.initCustomMethod()},t.prototype.updateStatus=function(t,e,i){switch(t){case"SpinChannel":this.spinStatustHandler(e,i);break;case"SequenceChannel":this.sequenceStatusHandler(e,i)}},t.prototype.spinStatustHandler=function(t,e){switch(t){case 1:this.onSpinStart()}},t.prototype.sequenceStatusHandler=function(t,e){switch(t){case 200:this.showProgressiveWin(e);break;case 4:this.onShowAllWinSymbols();break;case 202:case 201:case 203:case 204:this.onShowSequenceWin(e);break;case 101:this.onUpdateWin();break;case 103:this.onUpdateWinComplete();break;case 104:this.onCollectWin();break;case 105:this.onTrigger()}},t.prototype.destroy=function(){this.destroyCustomMethod()},t}();__reflect(WinSoundHandlerPrototype.prototype,"WinSoundHandlerPrototype");var SpinSoundHandlerPrototype=function(){function t(){}return t.prototype.init=function(){this.initCustomMethod()},t.prototype.updateStatus=function(t,e,i){switch(t){case"SpinChannel":this.spinStatustHandler(e,i)}},t.prototype.spinStatustHandler=function(t,e){switch(t){case 1:this.onSpinStart();break;case 3:this.onInstantStop();break;case 4:this.onSpinHitBase(e);break;case 0:this.onSpinComplete();break;case 5:this.onTriggerClimax(e);break;case 6:this.onClimaxResult()}},t.prototype.destroy=function(){this.destroyCustomMethod()},t}();__reflect(SpinSoundHandlerPrototype.prototype,"SpinSoundHandlerPrototype");var PanelSoundHandlerPrototype=function(){function t(){}return t.prototype.init=function(){this.initCustomMethod()},t.prototype.updateStatus=function(t,e,i){switch(t){case"SpinPanelChannel":this.spinPanelStatusHandler(e,i)}},t.prototype.destroy=function(){this.destroyCustomMethod()},t}();__reflect(PanelSoundHandlerPrototype.prototype,"PanelSoundHandlerPrototype");var BackgroundSoundHandlerPrototype=function(){function t(){}return t.prototype.init=function(){this.initCustomMethod()},t.prototype.updateStatus=function(t,e,i){switch(t){case"GameViewChannel":this.gameviewStatusHandler(e,i);break;case"SpinChannel":this.spinStatustHandler(e,i);break;case"SequenceChannel":this.sequenceStatusHandler(e,i)}},t.prototype.gameviewStatusHandler=function(t,e){switch(t){case 0:this.onGameViewStart()}},t.prototype.spinStatustHandler=function(t,e){switch(t){case 1:this.onSpinStart();break;case 3:this.onInstantStop();break;case 4:this.onSpinHitBase(e);break;case 0:this.onSpinComplete();break;case 5:this.onTriggerClimax(e);break;case 6:this.onClimaxResult()}},t.prototype.sequenceStatusHandler=function(t,e){switch(t){case 6:this.onShowBigWin();break;case 4:this.onShowAllWinSymbols();break;case 202:case 201:case 203:case 204:this.onShowSequenceWin();break;case 11:this.onTriggerGameView()}},t.prototype.destroy=function(){this.destroyCustomMethod()},t}();__reflect(BackgroundSoundHandlerPrototype.prototype,"BackgroundSoundHandlerPrototype");var WinSequenceController=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initCustomMethod=function(e,i,o,n){for(var r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];this._panel=o,this._pay=n,this._pay.addEventListener("HideComplete",this.onPaytableHidden,this),t.prototype.initCustomMethod.call(this,e,i)},e.prototype.onSpinStart=function(){this._loopCounter=0,this._isLoop=!1,t.prototype.onSpinStart.call(this)},e.prototype.onReelWinMethodComplete=function(t){var e=t.currentTarget,i=this._activeReels.indexOf(e);-1===i?!1:this._activeReels.splice(i,1),0===this._activeReels.length&&(this._isLoop?this.onShowWinComplete():this.onAllWinSymbolsComplete())},e.prototype.sequenceEndHandler=function(){switch(this._status=13,!0){case this.isNextGameMode():this.onNextGameMode();break;case this.isFreeSpin():this.triggerFreeSpin();break;case this.isAutoNextSpin():this.triggerNextAutoSpin();break;default:this.showWinSequenceHandler(),this.onSpinReady(),this.onBetReady()}},e.prototype.showTriggerSymbols=function(){t.prototype.showTriggerSymbols.call(this),this._pay.isActive()&&this._pay.hide(),this._panel.updateStatus("SpinPanelChannel",107),this.notify("SequenceChannel",105)},e.prototype.triggerNextAutoSpin=function(){this._pay.isActive()&&!this._pay.isAllowAutoSpin()?this.showWinSequenceHandler():t.prototype.triggerNextAutoSpin.call(this)
},e.prototype.onPaytableHidden=function(){(8===this._status||13===this._status)&&this.isAutoNextSpin()&&(this.isWin()?8===this._status&&this.triggerNextAutoSpin():0===this._activeReels.length&&this.triggerNextAutoSpin())},e.prototype.showWinSequenceHandler=function(){ResultData.WinSequenceMap.size>0&&this.showWinSequence()},e.prototype.showWinSequence=function(){this._status=8,this._isLoop=!0,this.showWinSequenceMethod();var t=ResultData.WinSequenceMap.get(this._loopCounter),e=this.getWinSequenceStatus();this.notify("SequenceChannel",e,t,!1)},e.prototype.showWinSequenceMethod=function(){(r=this._activeReels).push.apply(r,this._resultReels);for(var t=GameData.TotalReels,e=this.getSequenceWinningSymbolsPosition(),i=this.getWinSequenceStatus(),o=0;t>o;o++){var n=this._resultReels[o];n.updateStatus("SequenceChannel",i,e[o])}var r},e.prototype.getSequenceWinningSymbolsPosition=function(){var t=ResultData.WinSequenceMap.get(this._loopCounter);return t.Position},e.prototype.getWinSequenceStatus=function(){var t,e=ResultData.WinSequenceMap.get(this._loopCounter);switch(e.Type){case 300:t=201;break;case 301:t=202;break;case 302:t=203;break;case 303:t=204}return t},e.prototype.onShowWinComplete=function(){this._loopCounter=(this._loopCounter+1)%ResultData.WinSequenceMap.size,this.showWinSequence()},e.prototype.destroyCustomMethod=function(){this._pay.removeEventListener("HideComplete",this.onPaytableHidden,this),t.prototype.destroyCustomMethod.call(this)},e}(SequenceController);__reflect(WinSequenceController.prototype,"WinSequenceController");var PreloaderView=function(t){function e(){var e=t.call(this)||this;return e.create(),e}return __extends(e,t),e.prototype.retrieveLoader=function(){return new GroupLoader},e.prototype.retrievePreloader=function(){return new Preloader},e.prototype.create=function(){this._loader=new GroupLoader,this._loader.init(this.onResourceLoadComplete,this.onResourceProgress,this.onResourceLoadError,this),this._preload=this.retrievePreloader(),this.addChild(this._preload)},e.prototype.loadGroups=function(t,e){if("string"==typeof t)this._loader.getGroup(t,e);else for(var i=0,o=t;i<o.length;i++){var n=o[i];this.loadGroups(n,e)}},e.prototype.onResourceProgress=function(t){},e.prototype.onResourceLoadComplete=function(t){this.dispatchEventWith("LoadComplete")},e.prototype.onResourceLoadError=function(t){this.dispatchEventWith("LoadError")},e.prototype.destroy=function(){this._preload.destroy(),this._loader.destroy(),this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(PreloaderView.prototype,"PreloaderView",["IPreloaderView"]);var GameInfoPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Panels+"GameInfoPanel.exml"+GameUtil.preventCache("GameInfoPanel")},e.prototype.initCustomMethod=function(){this._backdrop=this._eui.Backdrop,this._backdrop.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._closeBtn=this._eui.BtnClose,this._closeBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._isActive=this.visible=!1},e.prototype.onCloseTouch=function(t){this.hide()},e.prototype.showCustomMethod=function(){this._isActive=this.visible=!0},e.prototype.hideCustomMethod=function(){this._isActive=this.visible=!1,this.dispatchHideComplete()},e.prototype.isActive=function(){return this._isActive},e.prototype.destroyCustomMethod=function(){this._backdrop.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._closeBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this)},e}(OverlayPrototype);__reflect(GameInfoPanel.prototype,"GameInfoPanel");var CurvePayLine=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.drawLine=function(){var t=this.retrieveLine(),e=this._positions[0],i=e[0],o=e[1];t.graphics.moveTo(i,o);for(var n=0;n<this._positions.length;n++){var r=this._positions[n],s=r[0],a=r[1],h=t.globalToLocal(s,a);if(n+1<this._positions.length){var l=this._positions[n+1],p=l[0],u=l[1],c=t.globalToLocal(p,u),d=h.x+.5*(c.x-h.x),_=h.y+.5*(c.y-h.y);t.graphics.curveTo(h.x,h.y,d,_)}else t.graphics.lineTo(s,a)}this.addChild(t)},e.prototype.drawLineShadow=function(){var t=this.retrieveLine(),e=this._positions[0],i=e[0],o=e[1];t.graphics.moveTo(i,o);for(var n=0;n<this._positions.length;n++){var r=this._positions[n],s=r[0],a=r[1],h=t.globalToLocal(s,a);if(n+1<this._positions.length){var l=this._positions[n+1],p=l[0],u=l[1],c=t.globalToLocal(p,u),d=h.x+.5*(c.x-h.x),_=h.y+.5*(c.y-h.y);t.graphics.curveTo(h.x,h.y,d,_)}else t.graphics.lineTo(s,a)}this.addChild(t)},e.prototype.retrieveLine=function(){var t=new egret.Shape;return t.graphics.lineStyle(5,this._color,1,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.ROUND),t},e.prototype.retrieveLineShadow=function(){var t=new egret.Shape;return t.graphics.lineStyle(8,0,.4,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.ROUND),t},e}(PayLine);__reflect(CurvePayLine.prototype,"CurvePayLine");var Dragger=function(t){function e(){var e=t.call(this)||this;return e._xlock=!1,e._ylock=!1,e}return __extends(e,t),e.prototype.init=function(t,e,i,o,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0);var r=this._target=t;r.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),r.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this._minX=e,this._maxX=i,this._minY=o,this._maxY=n,this._xlock=this._minX===this._maxX,this._ylock=this._minY===this._maxY},e.prototype.onTouchMove=function(t){if(this._isTouch){this._target;this._xlock||(this._currentX<t.stageX?(this._directX=1,this.moveRightHandler()):this._currentX>t.stageX?(this._directX=-1,this.moveLeftHandler()):this._directX=0),this._ylock||(this._currentY>t.stageY?(this._directY=1,this.moveUpHandler()):this._currentY<t.stageY?(this._directY=-1,this.moveDownHandler()):this._directY=0),this._currentX=t.stageX,this._currentY=t.stageY}},e.prototype.moveRightHandler=function(){var t=this._target,e=this._currentX-this._initX;e>=this._minX&&e<=this._maxX&&(t.x=e)},e.prototype.moveLeftHandler=function(){var t=this._target,e=this._currentX-this._initX;e>=this._minX&&e<=this._maxX&&(t.x=e)},e.prototype.moveUpHandler=function(){var t=this._target,e=this._currentY-this._initY;e>=this._minY&&e<=this._maxY&&(t.y=e)},e.prototype.moveDownHandler=function(){var t=this._target,e=this._currentY-this._initY;e>=this._minY&&e<=this._maxY&&(t.y=e)},e.prototype.lockXAxis=function(t){this._xlock=t},e.prototype.lockYAxis=function(t){this._ylock=t},e}(DraggerPrototype);__reflect(Dragger.prototype,"Dragger",["IDragger"]);var SpinningReel=function(t){function e(){var e=t.call(this)||this;return e._ids=[],e._resultIds=[],e._resultSymbols=[],e}return __extends(e,t),e.prototype.initCustomMethod=function(){this._status=0;var t=GameData.TotalRows,e=GameData.SymbolWidth,i=GameData.SymbolHeight;GameData.TotalSymbolsPerReels;this._totalRows=t,this._stgWidth=e,this._stgHeight=i*t,this._bufferY=i*(this._totalRows-1)},e.prototype.cacheSpin=function(){this._isCachSpin=!0,this._loopTween.resume(),TweenMax.delayedCall(1,this.killCacheSpin,[],this)},e.prototype.killCacheSpin=function(){GreenSockUtil.killDelayedCallsByScope(this.killCacheSpin,this),this._isCachSpin=!1,this._loopTween.pause(),this._loopTween.progress(0)},e.prototype.parseSpinningSymbolsId=function(t){this._ids=t,this.update(),this._loopTween.progress(0),this._resultSymbols.length=0;for(var e=0;e<this._totalRows;e++)this._resultSymbols.push(this._symbols[e])},e.prototype.getMaxY=function(){return t.prototype.getMaxY.call(this)+this._bufferY},e.prototype.retrieveCamera=function(){return new egret.Rectangle(0,0,this._stgWidth,this._stgHeight)},e.prototype.initCamera=function(){this._camera=this.retrieveCamera(),this._camera.y=-this._bufferY,this.scrollRect=this._camera},e.prototype.retrieveLoopTween=function(){var t=this.getSpinTime();return new TweenMax(this._camera,t,{y:-this._maxY,repeat:-1,ease:Linear.easeNone,onUpdate:this.onAnimationUpdate,onUpdateScope:this,paused:!0})},e.prototype.start=function(){this._isCachSpin&&this.killCacheSpin(),this._status=1,this.startMethod()},e.prototype.startMethod=function(){this._loopTween.resume()},e.prototype.stop=function(t){1===this.status&&(this._resultIds=t,this.parseIds(),this.stopMethod()),this._status=2},e.prototype.retrieveStopTween=function(){var t=this.getProgressTo(),e=this.getStopTime();return new TweenMax(this._loopTween,e,{progress:t,ease:Linear.easeNone,onComplete:this.onAnimationHitBase,onCompleteScope:this})},e.prototype.stopMethod=function(){this._loopTween.pause(),this._stopTween=this.retrieveStopTween()},e.prototype.instantStop=function(t){4!==this._status&&3!==this._status&&(1===this._status&&(this._resultIds=t,this.parseIds()),this.instantStopMethod(),this._status=2)},e.prototype.instantStopMethod=function(){this._loopTween.pause(),this._stopTween||(this._stopTween=this.retrieveStopTween()),this._stopTween.progress(1)},e.prototype.getCurrentIndex=function(){var t=this._camera.y,e=Math.ceil(Math.abs(t/GameData.SymbolHeight));return e},e.prototype.getProgressTo=function(){var t=this.getCurrentIndex()*GameData.SymbolHeight/(this._maxY-this._bufferY);return t},e.prototype.onAnimationHitBase=function(){this._stopTween=null,this.checkLoopHackReset(),this._status=3,this.dispatchAnimationHitBase(),this.onAnimationComplete()},e.prototype.checkLoopHackReset=function(){var t=this.getCurrentIndex(),e=GameData.TotalSymbolsPerReels;t===e+this._totalRows&&this._loopTween.progress(0)},e.prototype.dispatchAnimationHitBase=function(){this.dispatchEventWith("ReelHitBase")},e.prototype.onAnimationComplete=function(){this._loopTween.pause(),this._status=4,this.dispatchAnimationComplete()},e.prototype.dispatchAnimationComplete=function(){this.dispatchEventWith("ReelStop")},e.prototype.parseIds=function(){if(void 0!==this._resultIds&&0!==this._resultIds.length){var t=this.getCurrentIndex(),e=this._ids,i=this._resultIds.slice(0).reverse();this._resultSymbols.length=0;for(var o=t;o<e.length-this._totalRows&&0!==i.length;o++){var n=i[0];i.shift(),e[o]=n,this._resultSymbols.push(this._symbols[o])}var r=i.length,s=GameData.TotalSymbolsPerReels;if(r>0){var a=e.length-this._totalRows,h=a;t>e.length-this._totalRows&&(h=t-(e.length-this._totalRows));for(var o=0;r>o;o++){var n=i[o],l=h===a?0:h;e[o+l]=n;var p=r===this._totalRows?o+h:o+s;this._resultSymbols.push(this._symbols[p])}}this._resultSymbols.reverse(),this.update()}},e.prototype.update=function(){for(var t=this._ids,e=0;e<this._totalRows;e++)t.pop();for(var e=0;e<this._totalRows;e++)t.push(t[e]);for(var e=0;e<t.length;e++){t[e]}},e.prototype.updateResultSymbols=function(t){for(var e=GameData.TotalSymbolsPerReels,i=0;i<this._resultSymbols.length;i++){var o=t[i],n=this._resultSymbols[i];n=this._symbols[i+e],this._ids[i]=o}},e.prototype.getSpinTime=function(){var t=.02,e=this._totalRows*t;return e*=GameData.TotalSymbolsPerReels},e.prototype.getStopTime=function(){var t=this._loopTween.duration(),e=t/GameData.TotalSymbolsPerReels/this._totalRows,i=GameData.TotalSymbolsPerReels-this._totalRows;return i*=e},Object.defineProperty(e.prototype,"status",{get:function(){return this._status},set:function(t){this._status=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultSymbols",{get:function(){return this._resultSymbols},enumerable:!0,configurable:!0}),e.prototype.destroyCustomMethod=function(){},e}(SpinningReelPrototype);__reflect(SpinningReel.prototype,"SpinningReel",["ISpinningReel"]);var ResultReelPrototype=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.initCustomMethod.apply(this,[t].concat(e))},e.prototype.updateStatus=function(t,e,i){switch(t){case"SpinChannel":this.spinEventStatusHandler(e,i);break;case"SequenceChannel":this.sequenceStatusHandler(e,i);break;case"SymbolChannel":this.symbolStatusHandler(e,i)}},e.prototype.spinEventStatusHandler=function(t,e){switch(t){case 1:this.onSpinStart();break;case 0:this.onSpinComplete()}},e.prototype.sequenceStatusHandler=function(t,e){switch(t){case 4:this.showAllWinSymbols(e);break;case 202:this.showWinSymbolsMethod(e,4);break;case 201:this.showWinSymbolsMethod(e,3);break;case 203:this.showWinSymbolsMethod(e,5);break;case 204:this.showWinSymbolsMethod(e,6);break;case 200:this.showWinSymbolsMethod(e,2);break;case 105:this.showTriggerSymbolsMethod(e);break;case 13:this.onSequenceComplete()}},e.prototype.showAllWinSymbols=function(t){this.showAllWinSymbolsMethod(t)},e.prototype.destroy=function(){this.destroyCustomMethod()},e}(egret.EventDispatcher);__reflect(ResultReelPrototype.prototype,"ResultReelPrototype");var NoticeContents={ILLEGAL_PARAM:{},INVALID_TOKEN:{},ILLEGAL_REQUEST:{},CONNECTION_ERROR:{},INSUFFICIENT_COIN:{},ADD_COIN:{},RECORD_CONNECTION_ERROR:{},HISTORY_CONNECTION_ERROR:{}},NoticePanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Panels+"NoticePanel.exml"+GameUtil.preventCache("NoticePanel")},e.prototype.initCustomMethod=function(){var t=RES.getRes(GameData.Language+"_json").notice;NoticeContents=__assign({},t),this._backdrop=this._eui.Backdrop;var e=this._eui.BtnContinue;e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._label=this._eui.Label,this._content=this._eui.Content,this._btnLabel=this._eui.BtnLabel,this._isActive=this.visible=!1},e.prototype.onCloseTouch=function(){switch(this.hide(),this._status){case 1001:case 1002:case 1003:case 1008:this.logOut()}},e.prototype.logOut=function(){var t=new LogoutConnector;t.connect()},e.prototype.showCustomMethod=function(){TweenMax.fromTo(this._backdrop,.5,{alpha:0},{alpha:1}),TweenMax.fromTo(this._eui.NoticeContainer,.3,{scaleX:0,scaleY:0},{scaleX:1,scaleY:1,ease:Back.easeOut}),this._isActive=this.visible=!0},e.prototype.hideCustomMethod=function(){this._isActive=!1,TweenMax.to(this._backdrop,.25,{alpha:0}),TweenMax.to(this._eui.NoticeContainer,.25,{scaleX:0,scaleY:0,ease:Back.easeIn,onComplete:this.onHideComplete,onCompleteScope:this})},e.prototype.onHideComplete=function(){this.visible=!1,this.dispatchHideComplete()},e.prototype.dispatchHideComplete=function(){var t;switch(this._status){case 1004:t=1005;break;case 1006:t=1007;break;case 1008:t=1009;break;case 1010:t=1011;break;case 1012:t=1013}EventManager.notify("NoticeChannel",t),this.dispatchEventWith("HideComplete")},e.prototype.updateStatus=function(t,e,i){if("NoticeChannel"==t)switch(this._status=e,e){case 1008:this.showInfo(NoticeContents.CONNECTION_ERROR);break;case 1001:this.showInfo(NoticeContents.ILLEGAL_REQUEST);break;case 1002:this.showInfo(NoticeContents.ILLEGAL_PARAM);break;case 1003:this.showInfo(NoticeContents.INVALID_TOKEN);break;case 1010:this.showInfo(NoticeContents.RECORD_CONNECTION_ERROR);break;case 1012:this.showInfo(NoticeContents.HISTORY_CONNECTION_ERROR)}},e.prototype.showInfo=function(t){this._label.text=t.label||"",this._content.text=t.content||"",this._btnLabel.text=t.button||"",this.show()},e.prototype.isActive=function(){return this._isActive},e.prototype.destroyCustomMethod=function(){var t=this._eui.BtnContinue;t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this)},e}(OverlayPrototype);__reflect(NoticePanel.prototype,"NoticePanel");var AppViewController=function(){function t(){this._views=[]}return t.prototype.init=function(t,e){this._app=t,this._canvas=document.getElementsByTagName("canvas")[0],window.addEventListener("resize",this.onResizeWindow,!1),e&&(EventManager.strictChannel("FullScreenChannel",!1),document.addEventListener("webkitfullscreenchange",this.onFullScreenChange,!1),document.addEventListener("mozfullscreenchange",this.onFullScreenChange,!1),document.addEventListener("MSFullscreenChange",this.onFullScreenChange,!1),document.addEventListener("fullscreenchange",this.onFullScreenChange,!1),ApplicationData.isPc?this._canvas.addEventListener("click",this.onTouchEnd,!0):this._canvas.addEventListener("touchend",this.onTouchEnd,!0))},t.prototype.register=function(t){this._views.push(t),this.updateViewPositions()},t.prototype.unregister=function(t){var e=this;this._views.forEach(function(i,o){return i===t&&e._views.splice(o,1)})},t.prototype.onResizeWindow=function(){this.updateViewPositions()},t.prototype.onFullScreenChange=function(){ApplicationData.isFullScreen=!ApplicationData.isFullScreen,EventManager.notify("FullScreenChannel",0)},t.prototype.onTouchEnd=function(t){var e=this;if(!ApplicationData.isFullScreen){var i=document.documentElement;i.requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen?i.webkitRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen(),"click"===t.type&&TweenMax.delayedCall(.4,function(t){return e.updateViewPositions()})}},t.prototype.updateViewPositions=function(){var t=this._canvas.width,e=this._canvas.height,i=ApplicationData.defaultWidth,o=ApplicationData.defaultHeight,n=e/o,r=t/2,s=r/n/r;this._views.forEach(function(e){e.x=t/2*s,e.x-=i/2})},t}();__reflect(AppViewController.prototype,"AppViewController",["IAppViewController"]);var Blings=function(){function t(){}return t.prototype.init=function(t){this._grp=t},t.prototype.start=function(){this._isStop=!1;for(var t=0;t<this._grp.numChildren;t++){var e=this._grp.getChildAt(t),i=RandomUtil.range(0,2,2),o=.3,n=RandomUtil.range(.8,1,2),r=RandomUtil.range(1.1,1.5,2);e.scaleX=e.scaleY=n,TweenMax.delayedCall(i,this.bling,[e,o,n,r],this)}},t.prototype.stop=function(){this._isStop=!0},t.prototype.bling=function(t,e,i,o){this._isStop||TweenMax.fromTo(t,e,{scaleX:i,scaleY:i},{scaleX:o,scaleY:o,repeat:1,yoyo:!0,onComplete:this.bling,onCompleteParams:[t,e,i,o],onCompleteScope:this})},t.prototype.destroy=function(){TweenMax.killDelayedCallsTo(this.bling);for(var t=0;t<this._grp.numChildren;t++){var e=this._grp.getChildAt(t);TweenMax.killTweensOf(e)}},t}();__reflect(Blings.prototype,"Blings");var SpinPanel=function(t){function e(){var e=t.call(this)||this;return e._isKeyActive=!1,e}return __extends(e,t),e.prototype.initCustomMethod=function(){this._spin=this._eui.BtnSpin,this._stop=this._eui.BtnStop,this._spin.visible=!0,this._spin.enabled=!1,this._stop.visible=this._stop.enabled=!1,Mouse.setButtonMode(this._spin,!0),Mouse.setButtonMode(this._stop,!0),this._spin.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onSpinContolButtonsTouch,this),this._stop.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onSpinContolButtonsTouch,this)},e.prototype.panelStatusHandler=function(t,e){switch(this._status=t,t){case 100:this.onSpinReady();break;case 101:this.onSpinBlock();break;case 102:this.onStopReady();break;case 103:this.onStopBlock()}},e.prototype.onSpinReady=function(){this._spin.visible=this._spin.enabled=!0,this._stop.visible=this._stop.enabled=!1},e.prototype.onSpinBlock=function(){this._spin.enabled=!1},e.prototype.onStopReady=function(){this._spin.visible=this._spin.enabled=!1,this._stop.visible=this._stop.enabled=!0},e.prototype.onStopBlock=function(){this._stop.enabled=!1},e.prototype.keyboardStatusHandler=function(t,e){var i=this;if(32===t){if(this._isKeyActive)return;switch(this._isKeyActive=!0,TweenMax.delayedCall(.3,function(t){return i._isKeyActive=!1}),!0){case this._spin.enabled:this._spin.enabled=!1,this.notify("SpinPanelChannel",0);break;case this._stop.enabled:this._stop.enabled=!1,this.notify("SpinPanelChannel",1)}}},e.prototype.onSpinStart=function(){},e.prototype.onSpinComplete=function(){this._spin.visible=!0,this._spin.enabled=!1,this._stop.visible=!1,this._stop.enabled=!1},e.prototype.onSpinContolButtonsTouch=function(t){var e=this;switch(t.currentTarget){case this._spin:TweenMax.delayedCall(.1,function(t){return e._spin.enabled=!1}),this.notify("SpinPanelChannel",0);break;case this._stop:TweenMax.delayedCall(.1,function(t){return e._stop.enabled=!1}),this.notify("SpinPanelChannel",1)}},Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),e.prototype.destroyCustomMethod=function(){this._spin.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onSpinContolButtonsTouch,this),this._stop.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onSpinContolButtonsTouch,this)},e}(SpinPanelPrototype);__reflect(SpinPanel.prototype,"SpinPanel",["ISpinPanel","IEventListener","IEuiView"]);var CrossedPayLine=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getBufferX=function(){return GameData.SymbolWidth/3},e.prototype.getBufferY=function(){return 20},e.prototype.drawLine=function(){var t=this.retrieveLine(),e=this._positions[0],i=e[0],o=e[1];t.graphics.moveTo(i,o);for(var n=this.getBufferX(),r=this.getBufferY(),s=0,a=this._positions;s<a.length;s++){var h=a[s],l=h[0],p=h[1];t.graphics.lineTo(l-n,p+r),t.graphics.lineTo(l+n,p+r)}this.addChild(t)},e.prototype.drawLineShadow=function(){var t=this.retrieveLineShadow(),e=this._positions[0],i=e[0],o=e[1];t.graphics.moveTo(i,o);for(var n=this.getBufferX(),r=this.getBufferY(),s=0,a=this._positions;s<a.length;s++){var h=a[s],l=h[0],p=h[1];t.graphics.lineTo(l-n,p+r),t.graphics.lineTo(l+n,p+r)}this.addChild(t)},e}(PayLine);__reflect(CrossedPayLine.prototype,"CrossedPayLine");var PayLineControllerPrototype=function(){function t(){this._lines=[]}return t.prototype.register=function(t){this._lines.push(t)},t.prototype.init=function(t){this._resultReels=t,this.initCustomMethod()},t.prototype.updateStatus=function(t,e,i){switch(t){case"SpinChannel":1===e&&(this._status=void 0,this.onSpinStart());break;case"SequenceChannel":switch(e){case 4:this.showAllWinLines();break;case 5:this.hideAllWinLines();break;case 200:case 201:this._status=e,this.hideAllWinLines(),this.showLine(i)}}},t.prototype.destroy=function(){this.destroyCustomMethod();for(var t=0,e=this._lines;t<e.length;t++){var i=e[t];i.destroy()}},t}();__reflect(PayLineControllerPrototype.prototype,"PayLineControllerPrototype");var ScrollerPrototype=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._target=t,this._wlock=e,this._hlock=i,ApplicationData.stage.addEventListener("MosueWheel",this.onWheelScroll,this)},e.prototype.destroy=function(){ApplicationData.stage.removeEventListener("MosueWheel",this.onWheelScroll,this)},e}(egret.EventDispatcher);__reflect(ScrollerPrototype.prototype,"ScrollerPrototype");var SpinController=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._spinnings=[],e._resultReels=[],e._activeSpinning=[],e._resultIds=[],e._isSpinningSymbolsGenerated=!1,e._symbolRules=new Map,e._symbolPriorities=[],e}return __extends(e,t),e.prototype.initCustomMethod=function(t,e,i){for(var o=[],n=3;n<arguments.length;n++)o[n-3]=arguments[n];this._status=0,this._spinnings=t,this._resultReels=e,this.initSpinningSymbolRules(),this._spinningClimax=i,this._climaxHandler=this.retrieveClimaxHandler(),this._climaxHandler.init(this._symbolRules,this._symbolPriorities),this._alertHandler=this.retrieveAlertSymbolHandler(),this._alertHandler.init(this._symbolRules,this._symbolPriorities),this.generateInitResultIds(),this.parseResults(this._resultIds),this.generateUsableSpinningSymbols(),this.generateSpinningSymbolsIdMethod();for(var r=0,s=this._spinnings;r<s.length;r++){var a=s[r];a.addEventListener("ReelHitBase",this.onReelHitBase,this),a.addEventListener("ReelStop",this.onReelStop,this),a.cacheSpin()}},e.prototype.initSpinningSymbolRules=function(){},e.prototype.retrieveClimaxHandler=function(){return new SpinningClimaxHandler},e.prototype.retrieveAlertSymbolHandler=function(){return new AlertSymbolHandler},e.prototype.generateInitResultIds=function(){if(this._resultIds=[],ResultData.ResultGrid.length>0)return void(this._resultIds=ResultData.ResultGrid.slice(0));for(var t=GameData.TotalReels,e=GameData.TotalRows,i=0;t>i;i++){this._resultIds[i]=[];for(var o=SymbolManager.commonSymbols,n=0;e>n;n++){var r=ArrayUtil.randomChildOf(o);this._resultIds[i].push(r)}}},e.prototype.parseResults=function(t){this._resultIds=t;for(var e=0;e<this._resultIds.length;e++)this._resultReels[e].parseResults(this._resultIds[e]);this._climaxHandler.parseResults(t),this._alertHandler.parseResults(t),this.onResultReady()},e.prototype.onResultReady=function(){this.notify("ResultChannel",2)},e.prototype.generateUsableSpinningSymbols=function(){this._usableSymbolsInReel=[];var t=SymbolManager.commonSymbols.concat();t.push.apply(t,t);for(var e=0;e<this._spinnings.length;e++){var i=t;i.push.apply(i,this.getReelSpecificSpinningSymbolsId(e)),this._usableSymbolsInReel[e]=i}},e.prototype.getReelSpecificSpinningSymbolsId=function(t){var e=[];return this._symbolRules.forEach(function(i,o){i&&1===i.inReel[t]&&e.push(o)}),e},e.prototype.requestStartSpin=function(){0===this._status&&this.start()},e.prototype.requestStopSpin=function(){1===this._status&&this.stop()},e.prototype.start=function(){0==this._status&&(this._climaxCounter=0,this._climaxTrigger=!1,this.startSpinHandler())},e.prototype.startSpinHandler=function(){if(!this.isFreeSpin()){if(this.isInsufficientCoin())return void this.onInsufficientCoin();ResultData.Balance-=GameData.TotalBet}this.isFreeSpin()?(GameData.FreeSpins>0&&GameData.FreeSpins--,0===GameData.FreeSpins&&(GameData.FreeSpins=-1)):this.isAutoNextSpin()&&AutoSpinData.Total--,this.startSpinMethod()},e.prototype.onInsufficientCoin=function(){console.warn("Insufficient credit. Please reload credit."),AutoSpinData.isActive=!1,AutoSpinData.Total=0,this.notify("SequenceChannel",10),this.notify("NoticeChannel",1004,null,!1)},e.prototype.startSpinMethod=function(){this._status=1,this.notify("SpinChannel",1),this.generateSpinningSymbolsId(),this._resultIds.length=0;for(var t=0;t<this._spinnings.length;t++)this.startReelById(t);this.notify("ConnectorChannel",2)},e.prototype.startReelById=function(t){var e=this._resultReels[t];e.updateStatus("SymbolChannel",0),e.updateStatus("SpinChannel",1);var i=this._spinnings[t];i.visible=!0,i.start(),this._activeSpinning.push(i),TweenMax.delayedCall(.7,this.replaceSpinningResultSymbolsAtReel,[t],this)},e.prototype.retrieveUsableSpinningSymbols=function(t){return SymbolManager.commonSymbols},e.prototype.generateSpinningSymbolsId=function(){this._isSpinningSymbolsGenerated||(this._isSpinningSymbolsGenerated=!0,this.generateSpinningSymbolsIdMethod())},e.prototype.generateSpinningSymbolsIdMethod=function(){for(var t=GameData.TotalSymbolsPerReels,e=0;e<this._spinnings.length;e++){for(var i=this.retrieveUsableSpinningSymbols(e),o=this._resultIds[e].slice(0).reverse(),n=this._resultIds[e].length;t>n;n++){var r=ArrayUtil.randomChildOf(i);o.push(r)}o.push.apply(o,this._resultIds[e].slice(0).reverse());var s=this._spinnings[e];s.parseSpinningSymbolsId(o)}},e.prototype.replaceSpinningResultSymbolsAtReel=function(t){for(var e=0,i=this._activeSpinning;e<i.length;e++){var o=i[e];if(o.id===t&&1===o.status){for(var n=o.resultSymbols,r=this.retrieveUsableSpinningSymbols(t),s=[],a=0;a<n.length;a++){var h=ArrayUtil.randomChildOf(r);s.push(h)}o.updateResultSymbols(s)}}},e.prototype.stop=function(t){TweenMax.killDelayedCallsTo(this.stop),0!==this._status&&3!==this._status&&(t?(this._status=3,this.notify("SpinChannel",3),this.instantStopSpinMethod()):1===this._status&&(this._status=2,this.stopSpinMethod()))},e.prototype.stopSpinMethod=function(){var t=this._activeSpinning[0].id;this.stopReelById(t)},e.prototype.instantStopSpinMethod=function(){TweenMax.killDelayedCallsTo(this.stopReelById);for(var t=0;t<this._spinnings.length;t++){var e=this._spinnings[t],i=this._resultIds[e.id];e.instantStop(i)}},e.prototype.stopReelById=function(t){for(var e=this._resultIds[t],i=0,o=this._activeSpinning;i<o.length;i++){var n=o[i],r=n.id;if(r===t){n.stop(e);break}}},e.prototype.onReelHitBase=function(t){this.onReelHitBaseMethod(t),this._activeSpinning.length>1&&this.nextReelHandler()},e.prototype.onReelHitBaseMethod=function(t){var e=t.currentTarget;if(-1!==this._activeSpinning.indexOf(e)){var i=e.id,o=this.getAlertSymbolsInReel(i);if(o.length>0)this.onReelStopSymbolAlertHandler(o,i);else{var n=this._resultReels[i];n.updateStatus("SymbolChannel",7),this.notify("SpinChannel",4,{reelId:i},!1)}}},e.prototype.getAlertSymbolsInReel=function(t){var e=[];if(2===this._status)e=this._alertHandler.getAlertSymbolsInReel(t);else for(var i=0,o=this._symbolPriorities;i<o.length;i++){var n=o[i];this._resultIds[t].indexOf(n)>-1&&e.push(n)}return e},e.prototype.onReelStopSymbolAlertHandler=function(t,e){for(var i=this._symbolRules,o=[],n=[],r=[],s=0,a=t;s<a.length;s++){var h=a[s],l=i.get(h);l.hasAnimation&&o.push(h),l.hasSound&&(n.push(h),r.push(l.counter)),l.counter++}if(o.length>0){var p=this._resultReels[e];p.updateStatus("SymbolChannel",7,o)}var u={};u=n.length>0?{ids:n,idsCounter:r,reelId:e}:{reelId:e},this.notify("SpinChannel",4,u,!1)},e.prototype.nextReelHandler=function(){if(3!==this._status){var t=this._activeSpinning[1].id;this._climaxHandler.retrieveClimaxOnNextReel(t)?this.climaxOnNextReelHandler(t):(this.spinningClimaxResultHandler(),GameData.isQuickStop?this.stopReelById(t):TweenMax.delayedCall(.2,this.stopReelById,[t],this))}},e.prototype.onReelStop=function(t){this.onReelStopSymbolsHandler(t);var e=t.currentTarget,i=this._activeSpinning.indexOf(e);-1===i?!1:this._activeSpinning.splice(i,1),0===this._activeSpinning.length&&(this._status=0,this.onSpinComplete())},e.prototype.onReelStopSymbolsHandler=function(t){var e=t.currentTarget;e.visible=!1;var i=e.id,o=this._resultReels[i];o.updateStatus("SpinChannel",0)},e.prototype.onSpinComplete=function(){this.spinningClimaxResultHandler();for(var t=0,e=this._spinnings;t<e.length;t++){var i=e[t];i.status=0}this.notify("SpinChannel",0)},e.prototype.climaxOnNextReelHandler=function(t){this._climaxTrigger=!0,this.showSpinningClimaxAtReel(t);var e=this.getClimaxDurations(this._climaxCounter);e-=this._spinnings[t].getStopTime(),TweenMax.delayedCall(e,this.stopReelById,[t],this);var i={reelId:t,climaxCounter:this._climaxCounter};this.notify("SpinChannel",5,i,!1),this._climaxCounter++},e.prototype.showSpinningClimaxAtReel=function(t){var e=GameData.SymbolBmpWidth,i=this._spinnings[t].x;this._spinningClimax.x=i+e/2,this._spinningClimax.show()},e.prototype.getClimaxDurations=function(t){var e=this._climaxHandler.durations,i=e[t]||e[0];return i},e.prototype.spinningClimaxResultHandler=function(){this._climaxTrigger&&(this._climaxTrigger=!1,this._spinningClimax.hide(),this.notify("SpinChannel",6))},e.prototype.isFreeSpin=function(){return 0===GameData.CurrentGameMode?0===ResultData.GameMode&&GameData.FreeSpins>0:1===ResultData.GameMode},e.prototype.isAutoNextSpin=function(){return AutoSpinData.isActive&&AutoSpinData.Total>0},e.prototype.isInsufficientCoin=function(){return ResultData.Balance-GameData.TotalBet<0},Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),e.prototype.destroyCustomMethod=function(){for(var t=0,e=this._spinnings;t<e.length;t++){var i=e[t];i.removeEventListener("ReelHitBase",this.onReelHitBase,this),i.removeEventListener("ReelStop",this.onReelStop,this)}this._climaxHandler.destroy(),this._alertHandler.destroy()},e}(SpinControllerPrototype);__reflect(SpinController.prototype,"SpinController",["ISpinController","IEventListener"]);var Fetcher=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.fetch=function(t,e){var i=this;return new Promise(function(o,n){return window.fetch(t,e).then(i.status).then(i.format).then(function(t){i.successHandler(t),o()})["catch"](function(t){return i.errorHandler(t)})})},e.prototype.get=function(t,e){var i={method:"GET"},o=__assign({},e,i);return this.fetch(t,o)},e.prototype.post=function(t,e){var i={method:"POST"},o=__assign({},e,i);return this.fetch(t,o)},e.prototype.status=function(t){return t.status>=200&&t.status<300?Promise.resolve(t):Promise.reject(new Error(t.statusText))
},e.prototype.format=function(t){return t.json()},e.prototype.successHandler=function(t){console.log("Request succeeded with response:",t)},e.prototype.errorHandler=function(t){console.error(t)},e}(egret.EventDispatcher);__reflect(Fetcher.prototype,"Fetcher");var PayRatesController=function(){function t(){this._ratesObj={},this._indexLabels=[],this._ratesLabels=[]}return t.prototype.init=function(t){var e=this,i=GameData.PayRates;i.forEach(function(o,n){var r=n+1,s=t["Rate"+r];if(s){for(var a={},h=i[n].slice(0).reverse(),l=s.getChildByName("index"),p=s.getChildByName("rates"),u=GameData.TotalReels;h.length>0;){var c=l.getChildByName("idx"+u),d=p.getChildByName("rate"+u);d.text=h[0].toString(),a[u]=[c,d,h[0]],e._indexLabels.push(c),e._ratesLabels.push(d),u--,h.shift()}e._ratesObj[r]=a}}),this.resetRatesLabels()},t.prototype.updateStatus=function(t,e,i){switch(t){case"SpinChannel":1===e&&this.resetRatesLabels();break;case"SequenceChannel":switch(e){case 4:this.resetRatesLabels(),this.showAllWinRates();break;case 201:case 202:case 203:case 204:this.resetRatesLabels(),this.winRateHandler(i.SymbolsId);break;case 13:this.resetRatesLabels()}}},t.prototype.resetRatesLabels=function(){for(var t=0,e=this._indexLabels;t<e.length;t++){var i=e[t];i.textColor=16777215}for(var o=0,n=this._ratesLabels;o<n.length;o++){var i=n[o];i.textColor=16777215}},t.prototype.showAllWinRates=function(){var t=this,e=ResultData.WinSequenceMap;e.forEach(function(e){return t.winRateHandler(e.SymbolsId)})},t.prototype.winRateHandler=function(t){for(var e,i=t.length,o=0;i>o;o++){var n=t[o];this.isWild(n)||(e=n)}var r=this._ratesObj[e][i];this.showWinRate(r[0],r[1])},t.prototype.showWinRate=function(t,e){t.textColor=16766720,e.textColor=16766720},t.prototype.isWild=function(t){return 1===t},t.prototype.destroy=function(){},t}();__reflect(PayRatesController.prototype,"PayRatesController",["IEventListener"]);var AlertSymbolHandlerPrototype=function(){function t(){this._symbolPriorities=[],this._resultIds=[],this._alertsInReels=[]}return t.prototype.init=function(t,e){this._symbolRules=t,this._symbolPriorities=e},t.prototype.parseResults=function(t){this._resultIds=t,this.generateAlertSymbolsMethod()},t.prototype.getAlertSymbolsInReel=function(t){return this._alertsInReels[t]||[]},t.prototype.destroy=function(){this.destroyCustomMethod()},t}();__reflect(AlertSymbolHandlerPrototype.prototype,"AlertSymbolHandlerPrototype");var SpinningClimax=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createCustomMethod=function(){RES.getRes("climax_json")&&(this._mc=RES.createMovieClipByName("climax"),this.addChild(this._mc))},e.prototype.initCustomMethod=function(){if(void 0!==this._mc){var t=this._mc.currentClip.data[0].sourceSize,e=t.w,i=t.h;this._mc.x-=e/2,this._mc.y-=i/2,this.visible=!1}},e.prototype.showCustomMethod=function(){void 0!==this._mc&&(this.visible=!0,this._mc.gotoAndPlay(1,-1))},e.prototype.hideCustomMethod=function(){void 0!==this._mc&&(this.visible=!1,this._mc.stop())},e.prototype.destroyCustomMethod=function(){void 0!==this._mc&&this._mc.destroy()},e}(SpinningClimaxPrototype);__reflect(SpinningClimax.prototype,"SpinningClimax");var SpinningClimaxHandlerPrototype=function(){function t(){this._symbolPriorities=[],this._resultIds=[],this._climaxOnReels=[],this._durations=[]}return t.prototype.init=function(t,e){this._symbolRules=t,this._symbolPriorities=e,this.generateClimaxDurations()},t.prototype.parseResults=function(t){this._resultIds=t,this.generateClimaxReelsMethod()},t.prototype.retrieveClimaxOnNextReel=function(t){return 1===this._climaxOnReels[t]},Object.defineProperty(t.prototype,"durations",{get:function(){return this._durations},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.destroyCustomMethod()},t}();__reflect(SpinningClimaxHandlerPrototype.prototype,"SpinningClimaxHandlerPrototype");var RecordPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Panels+"RecordPanel.exml"+GameUtil.preventCache("RecordPanel")},e.prototype.initCustomMethod=function(){this._connect=new RecordConnector,this._connect.addEventListener("recordRecieved",this.onRecordRecieved,this),this._connect.addEventListener("error",this.onRecordRecievedFailed,this),this._backdrop=this._eui.Backdrop,this._backdrop.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._closeBtn=this._eui.BtnClose,this._closeBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this);var t=RES.getRes(GameData.Language+"_json").recordpanel;for(var e in t)this._eui[e].text=t[e];this._isActive=this.visible=!1},e.prototype.onCloseTouch=function(t){this._isActive&&this.hide()},e.prototype.showCustomMethod=function(){this._isActive=this.visible=!0,this._connect.connect()},e.prototype.onRecordRecieved=function(t){this.recordsHandler(t.data.userStatsBoList)},e.prototype.onRecordRecievedFailed=function(t){EventManager.notify("NoticeChannel",1010)},e.prototype.recordsHandler=function(t){var e=Object.keys(t).length;if(0!==e)for(var i=0;e>i;i++)for(var o=t[i],n=this._eui["Record"+i],r=0;r<n.numChildren;r++){var s=n.getChildByName("index");s.text=o?(i+1).toString():"-";var a=n.getChildByName("gameId");a.text=o?o.roundId:"-";var h=n.getChildByName("earnings");h.text=o?GameUtil.formatNumber(o.userPnl):"-",o.userPnl>0?h.textColor=45136:o.userPnl<0?h.textColor=16711680:h.textColor=16777215;var l=n.getChildByName("time");l.text=o?o.createTime:"-"}},e.prototype.hideCustomMethod=function(){this._isActive=this.visible=!1,this.dispatchHideComplete()},e.prototype.isActive=function(){return this._isActive},e.prototype.destroyCustomMethod=function(){this._backdrop.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._closeBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._connect.removeEventListener("recordRecieved",this.onRecordRecieved,this),this._connect.removeEventListener("error",this.onRecordRecievedFailed,this)},e}(OverlayPrototype);__reflect(RecordPanel.prototype,"RecordPanel");var ResultReel=function(t){function e(){var e=t.call(this)||this;return e._symbols=[],e._inactiveSymbols=[],e._activeSymbols=[],e._resultIds=[],e}return __extends(e,t),e.prototype.initCustomMethod=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._spinningReel=t;for(var o=0,n=this._symbols;o<n.length;o++){var r=n[o];r.addEventListener("WinMethodComplete",this.onSymbolWinMethodComplete,this),r.addEventListener("TriggerMethodComplete",this.onSymbolTriggerMethodComplete,this)}},e.prototype.parseResults=function(t){this._resultIds=t;for(var e=0;e<this._symbols.length;e++){var i=this._symbols[e];i.updateViewId(this._resultIds[e]);var o=this._inactiveSymbols[e],n=SymbolManager.getTexture(this._resultIds[e]);o.texture=n}},e.prototype.symbolStatusHandler=function(t,e){switch(t){case 0:this.symbolIdleHandler();break;case 7:this.symbolHitBaseHandler(e)}},e.prototype.symbolIdleHandler=function(){for(var t=0,e=this._symbols;t<e.length;t++){var i=e[t];i.updateStatus("SymbolChannel",0),i.visible=!0}for(var o=0,n=this._inactiveSymbols;o<n.length;o++){var i=n[o];i.visible=!1}},e.prototype.symbolHitBaseHandler=function(t){for(var e=0,i=this._symbols;e<i.length;e++){var o=i[e];t&&o.viewId===t[0]?o.updateStatus("SymbolChannel",8):o.updateStatus("SymbolChannel",7)}},e.prototype.onSpinStart=function(){this._activeSymbols.length=0;for(var t=0,e=this._symbols;t<e.length;t++){var i=e[t];i.visible=!1}},e.prototype.onSpinComplete=function(){for(var t=0,e=this._symbols;t<e.length;t++){var i=e[t];i.visible=!0}for(var o=0,n=this._spinningReel.resultSymbols;o<n.length;o++){var i=n[o];i.visible=!0}},e.prototype.showAllWinSymbolsMethod=function(t){for(var e=!1,i=0;i<this._symbols.length;i++){var o=this._symbols[i],n=this._inactiveSymbols[i];-1===t.indexOf(i)?(o.visible=!1,n.visible=!0):(this._activeSymbols.push(o),o.updateStatus("SymbolChannel",1),o.visible=!0,n.visible=!1,e=!0)}e||this.dispatchWinMethodComplete()},e.prototype.showWinSymbolsMethod=function(t,e){for(var i=!1,o=0;o<this._symbols.length;o++){var n=this._symbols[o],r=this._inactiveSymbols[o];-1===t.indexOf(o)?(n.visible=!1,r.visible=!0):(this._activeSymbols.push(n),n.updateStatus("SymbolChannel",e),n.visible=!0,r.visible=!1,i=!0)}i||this.dispatchWinMethodComplete()},e.prototype.onSymbolWinMethodComplete=function(t){var e=t.currentTarget,i=this._activeSymbols.indexOf(e);-1===i?!1:this._activeSymbols.splice(i,1),0===this._activeSymbols.length&&this.dispatchWinMethodComplete()},e.prototype.showTriggerSymbolsMethod=function(t){for(var e=t,i=!1,o=0;o<this._symbols.length;o++){var n=this._symbols[o],r=this._inactiveSymbols[o];e.indexOf(n.viewId)>-1?(i=!0,this._activeSymbols.push(n),n.updateStatus("SymbolChannel",9),n.visible=!0,r.visible=!1):(n.visible=!1,r.visible=!0)}i||this.dispatchTriggerMethodComplete()},e.prototype.onSymbolTriggerMethodComplete=function(t){var e=t.currentTarget,i=this._activeSymbols.indexOf(e);-1===i?!1:this._activeSymbols.splice(i,1),0===this._activeSymbols.length&&this.dispatchTriggerMethodComplete()},e.prototype.onSequenceComplete=function(){for(var t=0;t<this._symbols.length;t++){var e=this._symbols[t];e.visible=!0,e.updateStatus("SymbolChannel",0);var i=this._inactiveSymbols[t];i.visible=!1}},e.prototype.dispatchWinMethodComplete=function(){this.dispatchEventWith("WinMethodComplete")},e.prototype.dispatchTriggerMethodComplete=function(){this.dispatchEventWith("TriggerMethodComplete")},Object.defineProperty(e.prototype,"inactiveSymbols",{get:function(){return this._inactiveSymbols},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"symbols",{get:function(){return this._symbols},enumerable:!0,configurable:!0}),e.prototype.destroyCustomMethod=function(){for(var t=0,e=this._symbols;t<e.length;t++){var i=e[t];i.removeEventListener("WinMethodComplete",this.onSymbolWinMethodComplete,this),i.removeEventListener("TriggerMethodComplete",this.onSymbolTriggerMethodComplete,this)}},e}(ResultReelPrototype);__reflect(ResultReel.prototype,"ResultReel",["IResultReel","IEventListener"]);var SubPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t){this._eui=t,this._grp=this._eui.SubPanel,this._isActive=this._grp.visible=!1;var e=RES.getRes(GameData.Language+"_json").subpanel;for(var i in e){var o=this._eui[i];o.name=i;var n=o.getChildByName("label");n.text=e[i];var r=o.getChildByName("click");r.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonTouch,this)}},e.prototype.onButtonTouch=function(t){var e,i=this,o=t.currentTarget.parent;switch(o.name){case"Paytable":e=0;break;case"GameInfo":e=2;break;case"Record":e=6;break;case"History":e=4;break;case"Sound":e=8}TweenMax.delayedCall(.1,function(t){return i.dispatchHideEvent()}),this.notify("PanelsChannel",e)},e.prototype.show=function(){this._isActive=this._grp.visible=!0},e.prototype.hide=function(){this._isActive=this._grp.visible=!1},e.prototype.dispatchHideEvent=function(){this.dispatchEventWith("hide")},e.prototype.isActive=function(){return this._isActive},e.prototype.notify=function(t,e,i){EventManager.notify(t,e,i)},e.prototype.destroy=function(){var t=RES.getRes(GameData.Language+"_json").subpanel;for(var e in t){var i=this._eui[e],o=i.getChildByName("click");o.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonTouch,this)}},e}(egret.EventDispatcher);__reflect(SubPanel.prototype,"SubPanel");var SpinningBitmapReel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){this._status=0;var t=GameData.TotalRows,e=GameData.SymbolBmpWidth,i=GameData.SymbolBmpHeight,o=GameData.SymbolHeight;GameData.TotalSymbolsPerReels;this._totalRows=t,this._stgWidth=e,this._stgHeight=o*t,this._bufferY=o*(this._totalRows-1),this._bufferY+=(o-i)/2},e.prototype.retrieveSymbol=function(){return new egret.Bitmap},e.prototype.update=function(){for(var t=this._ids,e=0;e<this._totalRows;e++)t.pop();for(var e=0;e<this._totalRows;e++)t.push(t[e]);for(var e=0;e<t.length;e++){var i=t[e],o=this._symbols[e],n=SymbolManager.getTexture(i);o.texture=n}},e.prototype.updateResultSymbols=function(t){for(var e=GameData.TotalSymbolsPerReels,i=0;i<this._resultSymbols.length;i++){var o=t[i],n=this._resultSymbols[i],r=SymbolManager.getTexture(o);n.texture=r,n=this._symbols[i+e],r=SymbolManager.getTexture(o),n.texture=r,this._ids[i]=o}},e}(SpinningReel);__reflect(SpinningBitmapReel.prototype,"SpinningBitmapReel");var MainPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Panels+"MainPanel.exml"+GameUtil.preventCache("MainPanel")},e.prototype.retrieveSubPanel=function(){return new SubPanel},e.prototype.initCustomMethod=function(){},e.prototype.init=function(){this.initCustomMethod(),this._backdrop=this._eui.Backdrop,this._backdrop.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onSettingTouch,this),this._backdrop.visible=!1;var t=this._eui.BtnBack;t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBackTouch,this);var e=this._eui.BtnReload;e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onReloadTouch,this);var i=this._eui.BtnSettings;i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onSettingTouch,this),this._balance=this._eui.Balance,this.updateBalance(),this._sub=this.retrieveSubPanel(),this._sub.addEventListener("hide",this.onSettingTouch,this),this._sub.init(this._eui)},e.prototype.onBackTouch=function(){var t=new LogoutConnector;t.connect()},e.prototype.onReloadTouch=function(){EventManager.notify("NoticeChannel",1006)},e.prototype.onSettingTouch=function(){this._sub.isActive()?this._sub.hide():this._sub.show(),this._backdrop.visible=this._sub.isActive()},e.prototype.updateStatus=function(t,e,i){switch(t){case"SpinChannel":1===e&&this.updateBalance();break;case"SequenceChannel":100===e&&this.updateBalance()}},e.prototype.updateBalance=function(){this._balance.text=GameUtil.formatNumber(ResultData.Balance)},e.prototype.destroy=function(){this._sub.removeEventListener("hide",this.onSettingTouch,this),this._sub.destroy();var t=this._eui.BtnBack;t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBackTouch,this);var e=this._eui.BtnReload;e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onReloadTouch,this);var i=this._eui.BtnSettings;i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onSettingTouch,this),this._backdrop.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onSettingTouch,this),this.removeChildren()},e}(EuiView);__reflect(MainPanel.prototype,"MainPanel",["IEventListener"]);var HistoryPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Panels+"HistoryPanel.exml"+GameUtil.preventCache("HistoryPanel")},e.prototype.initCustomMethod=function(){this._connect=new HistoryConnector,this._connect.addEventListener("historyRecieved",this.onHistoryRecieved,this),this._connect.addEventListener("error",this.onHistoryRecievedFailed,this),this._backdrop=this._eui.Backdrop,this._backdrop.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._closeBtn=this._eui.BtnClose,this._closeBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this);var t=RES.getRes(GameData.Language+"_json").historypanel;for(var e in t)this._eui[e].text=t[e];this._isActive=this.visible=!1},e.prototype.onCloseTouch=function(t){this._isActive&&this.hide()},e.prototype.showCustomMethod=function(){this._isActive=this.visible=!0,this._connect.connect()},e.prototype.onHistoryRecieved=function(t){this.last7SpinHandler(t.data.freeTimeRecordList),this.recordsHandler(t.data.userWinRecordList)},e.prototype.onHistoryRecievedFailed=function(t){EventManager.notify("NoticeChannel",1012)},e.prototype.last7SpinHandler=function(t){for(var e=this._eui.Last7Container,i=0;i<e.numChildren;i++){var o=this._eui["Last7"+i],n=o.getChildByName("total");n.text=t[i]||"-"}},e.prototype.recordsHandler=function(t){for(var e=this._eui.RecordsContainer,i=0;i<e.numChildren;i++)for(var o=t[i],n=this._eui["Record"+i],r=0;r<n.numChildren;r++){var s=n.getChildByName("spin");s.text=o?this.formatNumber(o.rotateNum,!1):"-";var a=n.getChildByName("input");a.text=o?this.formatNumber(o.userInput):"-";var h=n.getChildByName("output");h.text=o?this.formatNumber(o.userOutput):"-";var l=n.getChildByName("rtp");l.text=o?o.rtpValue:"-"}},e.prototype.formatNumber=function(t,e){void 0===e&&(e=!0);var i;switch(!0){case 1e4>t:i=e?GameUtil.formatNumber(t):StringUtil.numberWithCommas(t);break;case 1e8>t:i=MathUtil.decimalsPoint(t/1e4,2)+"万";break;case 1e12>t:i=MathUtil.decimalsPoint(t/1e8,2)+"亿";break;default:i=MathUtil.decimalsPoint(t/1e12,2)+"兆"}return i},e.prototype.hideCustomMethod=function(){this._isActive=this.visible=!1,this.dispatchHideComplete()},e.prototype.isActive=function(){return this._isActive},e.prototype.destroyCustomMethod=function(){this._backdrop.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._closeBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._connect.removeEventListener("historyRecieved",this.onHistoryRecieved,this),this._connect.removeEventListener("error",this.onHistoryRecievedFailed,this)},e}(OverlayPrototype);__reflect(HistoryPanel.prototype,"HistoryPanel");var ProgressiveWinSequenceController=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.winSequenceMethod=function(){this.showProgressiveWinSequence()},e.prototype.showProgressiveWinSequence=function(){this._status=3,this._isLoop=!0,this.showProgressiveWinSequenceMethod();var t=ResultData.WinSequenceMap.get(this._loopCounter),e=200;this.notify("SequenceChannel",e,t,!1)},e.prototype.showProgressiveWinSequenceMethod=function(){(r=this._activeReels).push.apply(r,this._resultReels);for(var t=GameData.TotalReels,e=this.getSequenceWinningSymbolsPosition(),i=200,o=0;t>o;o++){var n=this._resultReels[o];n.updateStatus("SequenceChannel",i,e[o])}var r},e.prototype.onShowWinComplete=function(){3===this._status?this._loopCounter+1<ResultData.WinSequenceMap.size?(this._loopCounter++,this.showProgressiveWinSequence()):(this._loopCounter=0,this._isLoop=!1,this.isBigWin()?(this.notify("SpinPanelChannel",101),this.showBigWin()):this.showAllWinSymbols()):t.prototype.onShowWinComplete.call(this)},e}(WinSequenceController);__reflect(ProgressiveWinSequenceController.prototype,"ProgressiveWinSequenceController");var PortraitGameInfoPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this),ApplicationData.isPc?this.initScrollMethod():this.initDragMethod(),ApplicationData.isPc?this._scroll.deactivate():this._drag.deactivate();var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawRect(0,0,ApplicationData.defaultWidth,ApplicationData.defaultHeight),e.graphics.endFill(),this._eui.HelpContainer.addChild(e),this._eui.Contents.mask=e,this.initContents()},e.prototype.retrieveDragger=function(){return new PaytableDragger},e.prototype.initDragMethod=function(){this._drag=this.retrieveDragger(),this._drag.init(this._eui.Contents,0,0,0,ApplicationData.defaultHeight-50)},e.prototype.retrieveScroller=function(){return new PaytableScroller},e.prototype.initScrollMethod=function(){this._scroll=this.retrieveScroller(),this._scroll.init(this._eui.Contents,0,ApplicationData.defaultHeight-50)},e.prototype.initContents=function(){var t,e=this,i=RES.getRes(GameData.Language+".contents_json").Help,o=function(o){i[o].forEach(function(t,i){e.parseContents(o,t,i)}),t&&(n._eui[o].y=n._eui[t].y+n._eui[t].height+50),t=o},n=this;for(var r in i)o(r)},e.prototype.parseContents=function(t,e,i){var o=this._eui[t].getChildByName("content"+i),n=o.getChildByName("text");if(n.textFlow=(new egret.HtmlTextParser).parse(e),i>0){var r=this._eui[t].getChildByName("content"+(i-1));o.y=r.y+r.height-30}},e.prototype.showCustomMethod=function(){this.visible=!0;var t=this._eui.HelpContainer;TweenMax.fromTo(t,.5,{y:this.height},{y:0,onComplete:this.onShowComplete,onCompleteScope:this}),TweenMax.fromTo(this._backdrop,.5,{alpha:0},{alpha:1})},e.prototype.onShowComplete=function(){this._isActive=!0,ApplicationData.isPc?this._scroll.activate():this._drag.activate()},e.prototype.hideCustomMethod=function(){var t=this._eui.HelpContainer;TweenMax.to(t,.5,{y:this.height,onComplete:this.onHideComplete,onCompleteScope:this}),TweenMax.to(this._backdrop,.25,{alpha:0})},e.prototype.onHideComplete=function(){ApplicationData.isPc?this._scroll.deactivate():this._drag.deactivate(),this._isActive=this.visible=!1,this.dispatchHideComplete()},e.prototype.destroyCustomMethod=function(){ApplicationData.isPc?this._scroll.destroy():this._drag.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(GameInfoPanel);__reflect(PortraitGameInfoPanel.prototype,"PortraitGameInfoPanel");var CommonPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Common+"assets/panels/CommonPanel.exml"+GameUtil.preventCache("CommonPanel")},e.prototype.initCustomMethod=function(){var t=RES.getRes(GameData.Language+"_json").common;NoticeContents.INSUFFICIENT_COIN=t.INSUFFICIENT_COIN,NoticeContents.ADD_COIN=t.ADD_COIN,this._backdrop=this._eui.Backdrop;var e=this._eui.BtnConfirm;e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onConfirmTouch,this);var i=this._eui.BtnClose;i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this);var o=this._eui.BtnCancel;o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._label=this._eui.Label,this._content=this._eui.Content,this._isActive=this.visible=!1},e.prototype.onConfirmTouch=function(){EventManager.notify("SpinPanelChannel",108);var t=new ReloadConnector;if(t.connect(),1008===this._status){var e=new LogoutConnector;e.connect()}else this.hide()},e.prototype.onCloseTouch=function(){this.hide()},e.prototype.updateStatus=function(t,e,i){if("NoticeChannel"==t)switch(this._status=e,e){case 1008:this.onLogInConnectionError();break;case 1004:this.showInfo(NoticeContents.INSUFFICIENT_COIN);break;case 1006:this.showInfo(NoticeContents.ADD_COIN)}},e.prototype.onLogInConnectionError=function(){this._eui.BtnClose.visible=!1,this._eui.BtnCancel.visible=!1;var t=this._eui.CommonContainer,e=this._eui.BtnConfirm;e.x=(t.width-e.width)/2,this.showInfo(NoticeContents.CONNECTION_ERROR)},e.prototype.showCustomMethod=function(){TweenMax.fromTo(this._backdrop,.5,{alpha:0},{alpha:1}),TweenMax.fromTo(this._eui.CommonContainer,.3,{scaleX:0,scaleY:0},{scaleX:1,scaleY:1,ease:Back.easeOut}),this._isActive=this.visible=!0},e.prototype.hideCustomMethod=function(){this._isActive=!1,TweenMax.to(this._backdrop,.25,{alpha:0}),TweenMax.to(this._eui.CommonContainer,.25,{scaleX:0,scaleY:0,ease:Back.easeIn,onComplete:this.onHideComplete,onCompleteScope:this})},e.prototype.showInfo=function(t){this._label.text=t.label||"",this._content.text=t.content||"",this.show()},e.prototype.isActive=function(){return this._isActive},e.prototype.destroyCustomMethod=function(){var t=this._eui.BtnConfirm;t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onConfirmTouch,this);var e=this._eui.BtnClose;e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this);var i=this._eui.BtnCancel;i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this)},e}(NoticePanel);__reflect(CommonPanel.prototype,"CommonPanel");var BetPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Panels+"BetPanel.exml"+GameUtil.preventCache("BetPanel")},e.prototype.retrieveAutoSpinController=function(){return new AutoSpinController},e.prototype.retrieveBetValueController=function(){return new BetValueController},e.prototype.retrieveMaxBetController=function(){return new MaxBetController},e.prototype.retrieveBetLineController=function(){return new BetLineController},e.prototype.retrieveCounter=function(){return new FreeSpinCounter},e.prototype.initCustomMethod=function(){this._autoSpinCtrl=this.retrieveAutoSpinController(),this._autoSpinCtrl.init(this._eui),this._autoSpinCtrl.enabled=!1,this._betLineCtrl=this.retrieveBetLineController(),this._betLineCtrl.init(this._eui.BetLineContainer),this._betLineCtrl.addEventListener("betting",this.onUpdateBet,this),this._betValueCtrl=this.retrieveBetValueController(),this._betValueCtrl.init(this._eui.BetValueContainer),this._betValueCtrl.addEventListener("betting",this.onUpdateBet,this),this._maxCtrl=this.retrieveMaxBetController(),this._maxCtrl.init(this._eui),this._maxCtrl.addEventListener("maxbet",this.onToggleMaxBet,this),this._maxCtrl.enabled=!1,this._totalBet=this._eui.TotalBetAmount,this._totalBet.text=GameUtil.formatNumber(GameData.TotalBet),t.prototype.initCustomMethod.call(this)},e.prototype.onSpinReady=function(){this._spin.visible=this._spin.enabled=!0,this._stop.visible=this._stop.enabled=!1},e.prototype.onSpinBlock=function(){this._spin.enabled=!1},e.prototype.onStopReady=function(){this._spin.visible=this._spin.enabled=!1,this._stop.visible=this._stop.enabled=!0},e.prototype.onStopBlock=function(){this._stop.enabled=!1},e.prototype.onUpdateBet=function(t){this._maxCtrl.update();var e=GameData.TotalBet=GameData.BetLineAmount*GameData.BetValue;this._totalBet.text=GameUtil.formatNumber(e)},e.prototype.onToggleMaxBet=function(){this._betValueCtrl.activateMaxBet();var t=GameData.TotalBet=GameData.BetLineAmount*GameData.BetValue;this._totalBet.text=GameUtil.formatNumber(t),this.notify("SpinPanelChannel",4,{isMaxBet:!0})},e.prototype.onSpinStart=function(){this._maxCtrl.enabled=!1,this._betLineCtrl.enabled=!1,this._betValueCtrl.enabled=!1,this._autoSpinCtrl.enabled=!1,AutoSpinData.isActive&&this._autoSpinCtrl.update(AutoSpinData.Total)},e.prototype.onSpinComplete=function(){AutoSpinData.isActive&&0===AutoSpinData.Total&&this._autoSpinCtrl.reset(),t.prototype.onSpinComplete.call(this)},e.prototype.panelStatusHandler=function(e,i){switch(this._status=e,e){case 104:this._maxCtrl.enabled=!0,this._betLineCtrl.enabled=!0,this._betValueCtrl.enabled=!0;break;case 105:this._maxCtrl.enabled=!1,this._betLineCtrl.enabled=!1,this._betValueCtrl.enabled=!1;break;case 106:AutoSpinData.isActive?this._autoSpinCtrl.enabledStop=!0:this._autoSpinCtrl.enabled=!0;break;case 107:this._autoSpinCtrl.enabled=!1,this._autoSpinCtrl.enabledStop=!1;break;case 108:this._autoSpinCtrl.reset();break;default:t.prototype.panelStatusHandler.call(this,e,i)}},e.prototype.destroyCustomMethod=function(){this._maxCtrl.addEventListener("maxbet",this.onToggleMaxBet,this),this._betLineCtrl.removeEventListener("betting",this.onUpdateBet,this),this._betValueCtrl.removeEventListener("betting",this.onUpdateBet,this),this._autoSpinCtrl.destroy(),this._betLineCtrl.destroy(),this._betValueCtrl.destroy(),this._maxCtrl.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(SpinPanel);__reflect(BetPanel.prototype,"BetPanel");var SoundController=function(){function t(){}return t.prototype.retrieveBackgroundSoundHandler=function(){return new BackgroundSoundHandler},t.prototype.retrievePanelSoundHandler=function(){return new PanelSoundHandler},t.prototype.retrieveSpinSoundHandler=function(){return new SpinSoundHandler},t.prototype.retrieveWinSoundHandler=function(){return new WinSoundHandler},t.prototype.init=function(){this._bgm=this.retrieveBackgroundSoundHandler(),this._bgm.init(),this._spin=this.retrieveSpinSoundHandler(),this._spin.init(),this._win=this.retrieveWinSoundHandler(),this._win.init(),this._panel=this.retrievePanelSoundHandler(),this._panel.init()},t.prototype.updateStatus=function(t,e,i){this._spin.updateStatus(t,e,i),this._bgm.updateStatus(t,e,i),this._win.updateStatus(t,e,i),this._panel.updateStatus(t,e,i)},t.prototype.destroy=function(){this._bgm.destroy(),this._spin.destroy(),this._win.destroy(),this._panel.destroy()},t}();__reflect(SoundController.prototype,"SoundController",["ISoundController","IEventListener"]);var BackgroundSoundHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){this._bgm=this.getBackgroundMusic(),this._spinBgm=this.getSpinningBackgroundMusic()},e.prototype.getBackgroundMusic=function(){var t;switch(GameData.CurrentGameMode){case 0:t="BGM_BS";break;case 1:t="BGM_FG"}return void 0===Sound.SoundManager.getSoundById(t)&&(t=void 0),t},e.prototype.getSpinningBackgroundMusic=function(){var t;switch(GameData.CurrentGameMode){case 0:t="BGM_BS_Spinning";break;case 1:t="BGM_FG_Spinning"}return void 0===Sound.SoundManager.getSoundById(t)&&(t=void 0),t},e.prototype.updateStatus=function(e,i,o){if("NoticeChannel"===e)switch(i){case 1008:case 1001:case 1002:case 1003:this._bgm&&Sound.fadeOut(this._bgm,2,{stop:!0}),this._spinBgm&&Sound.fadeOut(this._spinBgm,2,{stop:!0})}else t.prototype.updateStatus.call(this,e,i,o)},e.prototype.onGameViewStart=function(){this._bgm&&(Sound.Volume.scale(this._bgm,1),Sound.play(this._bgm,{loop:!0}))},e.prototype.onSpinStart=function(){this._bgm&&(Sound.Volume.scale(this._bgm,1),this.fadeIn(this._bgm,1)),this._spinBgm&&(void 0===this._isPlayWinBgm&&(this._isPlayWinBgm=!0,Sound.play(this._spinBgm,{volume:0,loop:!0}),Sound.Volume.scale(this._spinBgm,0)),Sound.Volume.scale(this._spinBgm,1),this.fadeIn(this._spinBgm,1))},e.prototype.onSpinComplete=function(){this._spinBgm&&this.fadeOut(this._spinBgm,2)},e.prototype.onInstantStop=function(){},e.prototype.onSpinHitBase=function(t){},e.prototype.onTriggerClimax=function(t){},e.prototype.onClimaxResult=function(){},e.prototype.onShowBigWin=function(){this._spinBgm&&this.fadeOut(this._spinBgm,0),this._bgm&&this.fadeOut(this._bgm,0)},e.prototype.onShowAllWinSymbols=function(){this._spinBgm&&this.fadeOut(this._spinBgm,0),this._bgm&&this.fadeOut(this._bgm,0)},e.prototype.onShowSequenceWin=function(){this._bgm&&this.fadeIn(this._bgm,2)},e.prototype.onTriggerGameView=function(){this.fadeOut(this._bgm,1)},e.prototype.fadeIn=function(t,e){Sound.fadeIn(t,e);var i=Sound.SoundManager.getSoundById(t);i.tweenVolumeScales(-1,1,e)},e.prototype.fadeOut=function(t,e){Sound.fadeOut(t,e,{onComplete:this.onFadeOutComplete.bind(this)});var i=Sound.SoundManager.getSoundById(t);i.tweenVolumeScales(-1,0,e)},e.prototype.onFadeOutComplete=function(){GameData.CurrentGameMode!=ResultData.GameMode&&(this._bgm&&Sound.stop(this._bgm),this._spinBgm&&Sound.stop(this._spinBgm))},e.prototype.climaxResultHit=function(){return GameData.CurrentGameMode!=ResultData.GameMode},e.prototype.destroyCustomMethod=function(){},e}(BackgroundSoundHandlerPrototype);__reflect(BackgroundSoundHandler.prototype,"BackgroundSoundHandler",["IEventListener"]);var BetController=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t){this._grp=t,this._totalTxt=this._grp.getChildByName("totalAmount"),this._labelTxt=this._grp.getChildByName("label"),this._upBet=this._grp.getChildByName("btnUpBet"),this._downBet=this._grp.getChildByName("btnDownBet"),this._upBet.enabled=!1,this._downBet.enabled=!1,this._upBet.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBetButtonTouchBegin,this),this._downBet.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBetButtonTouchBegin,this),Mouse.setButtonMode(this._upBet,!0),Mouse.setButtonMode(this._downBet,!0)},e.prototype.onBetButtonTouchBegin=function(t){},Object.defineProperty(e.prototype,"enabled",{set:function(t){return t?void 0:(this._upBet.enabled=!1,void(this._downBet.enabled=!1))},enumerable:!0,configurable:!0}),e.prototype.notify=function(t,e,i){EventManager.notify(t,e,i)},e.prototype.destroy=function(){this._upBet.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBetButtonTouchBegin,this),this._downBet.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBetButtonTouchBegin,this)
},e}(egret.EventDispatcher);__reflect(BetController.prototype,"BetController");var PanelSoundHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){},e.prototype.spinPanelStatusHandler=function(t,e){switch(t){case 0:this.playButtonSound("SFX_Btn_Start-Click");break;case 1:this.playButtonSound("SFX_Btn_Stop-Click");break;case 2:this.playBetButtonSound("SFX_Btn_UpBet-Click",e);break;case 3:this.playBetButtonSound("SFX_Btn_DownBet-Click",e);break;case 4:this.playBetButtonSound("SFX_Btn_MaxBet-Click",e);break;case 5:this.playButtonSound("SFX_Btn_AutoSpin-Click");break;case 6:this.playButtonSound("SFX_Btn_AutoSpin_Stop-Click")}},e.prototype.playButtonSound=function(t){var e;e=Sound.SoundManager.getSoundById(t)?t:"SFX_Btn_Default-Click",Sound.play(e)},e.prototype.playBetButtonSound=function(t,e){var i,o=e.betIdx,n=e.isMaxBet;n?i="SFX_Btn_MaxBet-Click":Sound.SoundManager.getSoundById(t)?i=t:Sound.SoundManager.getSoundById("SFX_Btn_UpdateBet-Click_"+o)&&(i="SFX_Btn_UpdateBet-Click_"+o),i=Sound.SoundManager.getSoundById(i)?i:"SFX_Btn_Default-Click",Sound.play(i,{overlap:!0})},e.prototype.destroyCustomMethod=function(){},e}(PanelSoundHandlerPrototype);__reflect(PanelSoundHandler.prototype,"PanelSoundHandler",["IEventListener"]);var AutoSpinSelector=function(t){function e(){var e=t.call(this)||this;return e._buttons=[],e}return __extends(e,t),e.prototype.init=function(t){var e=this,i=RES.getRes("config_json").AutoSpinRange.slice(0);i.forEach(function(i,o){var n=t.getChildByName("select"+o);n.label=i.toString(),n.addEventListener(eui.UIEvent.CHANGE,e.onTouchBegin,e),e._buttons.push(n)}),this.reset()},e.prototype.onTouchBegin=function(t){this.reset();var e=t.currentTarget;e.selected=!0,AutoSpinData.Total=parseInt(e.label),this.dispatchEventWith("selected")},e.prototype.reset=function(){for(var t=0,e=this._buttons;t<e.length;t++){var i=e[t];i.labelDisplay;i.selected=!1}AutoSpinData.isActive||(AutoSpinData.Total=0)},e.prototype.destroy=function(){for(var t=0,e=this._buttons;t<e.length;t++){var i=e[t];i.removeEventListener(eui.UIEvent.CHANGE,this.onTouchBegin,this)}},e}(egret.EventDispatcher);__reflect(AutoSpinSelector.prototype,"AutoSpinSelector");var SpinSoundHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){},e.prototype.updateStatus=function(e,i,o){if("NoticeChannel"===e)switch(i){case 1008:case 1001:case 1002:case 1003:Sound.fadeOut("SFX_ReelSpinning",2,{stop:!0})}else t.prototype.updateStatus.call(this,e,i,o)},e.prototype.onSpinStart=function(){this._climaxSnd=void 0,this._isInstant=!1,this.playSound("SFX_ReelStart"),Sound.SoundManager.getSoundById("SFX_ReelSpinning")&&Sound.fade("SFX_ReelSpinning",0,1,.3,{loop:!0})},e.prototype.onTriggerClimax=function(t){var e,i=(t.reelId,t.climaxCounter);e=Sound.SoundManager.getSoundById(e+"_"+i)?e+"_"+i:"SFX_ReelSpinning-Climax",Sound.play(e,{overlap:!0}),this._climaxSnd=e},e.prototype.onClimaxResult=function(){this.climaxResultHit()?this.playSound("SFX_ReelSpinning-Climax_Hit"):this.playSound("SFX_ReelSpinning-Climax_Miss")},e.prototype.onInstantStop=function(){this._isInstant=!0,this._climaxSnd&&Sound.stop(this._climaxSnd)},e.prototype.onSpinHitBase=function(t){var e="SFX_ReelStop";if(t.ids){var i=t.ids,o=t.idsCounter,n=(t.reelId,"SFX_ReelStop-Alert"),r=i[0],s=o[0];Sound.SoundManager.getSoundById(n+"_"+r+"_"+s)?e=n+"_"+r+"_"+s:Sound.SoundManager.getSoundById(n+"_"+r)&&(e=n+"_"+r)}var a=this._isInstant?!1:void 0!=t.overlap?t.overlap:!0;Sound.play(e,{overlap:a})},e.prototype.onSpinComplete=function(){Sound.SoundManager.getSoundById("SFX_ReelSpinning")&&Sound.stop("SFX_ReelSpinning")},e.prototype.climaxResultHit=function(){return GameData.CurrentGameMode!=ResultData.GameMode},e.prototype.playSound=function(t){Sound.SoundManager.getSoundById(t)&&Sound.play(t)},e.prototype.destroyCustomMethod=function(){},e}(SpinSoundHandlerPrototype);__reflect(SpinSoundHandler.prototype,"SpinSoundHandler",["IEventListener"]);var AdjusterPrototype=function(){function t(){}return t.prototype.retrieveDagger=function(){return new AdjusterDragger},t.prototype.init=function(t){this._container=t,this._w=t.width,this._totalTxt=t.getChildByName("totalTxt"),this._bar=t.getChildByName("bar");var e=this._btn=t.getChildByName("dragger");this._drag=this.retrieveDagger(),this._drag.init(e,0,this._w),this._drag.addEventListener("moveX",this.onAdjust,this)},t.prototype.onAdjust=function(t){var e=t.data;this._bar.scaleX=e/100},t.prototype.activate=function(){this._btn.enabled=!0},t.prototype.deactivate=function(){this._btn.enabled=!1;var t=this._container.getChildByName("dragger");t.x=0,this._bar.scaleX=0},t.prototype.destroy=function(){this._drag.removeEventListener("moveX",this.onAdjust,this),this._drag.destroy()},t}();__reflect(AdjusterPrototype.prototype,"AdjusterPrototype");var WinSoundHandler=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sounds=[],e._playedSeq=[],e._isWinCounting=!1,e._progressiveCounter=0,e}return __extends(e,t),e.prototype.initCustomMethod=function(){this._winBgm=this.getWinningBackgroundMusic()},e.prototype.getWinningBackgroundMusic=function(){var t;switch(GameData.CurrentGameMode){case 0:t="BGM_BS_Spinning-Win";break;case 1:t="BGM_FG_Spinning-Win"}return void 0===Sound.SoundManager.getSoundById(t)&&(t=void 0),t},e.prototype.updateStatus=function(e,i,o){if("NoticeChannel"===e)switch(i){case 1008:case 1001:case 1002:case 1003:this._winBgm&&Sound.fadeOut(this._winBgm,1,{stop:!0})}else t.prototype.updateStatus.call(this,e,i,o)},e.prototype.onSpinStart=function(){var t=this;Sound.stop(this._sounds),this._playedSeq.length=0,this._sounds.length=0,this._progressiveCounter=0,this._winBgm&&(void 0===this._isPlayWinBgm&&(this._isPlayWinBgm=!1,Sound.play(this._winBgm,{volume:0,loop:!0}),TweenMax.delayedCall(0,function(e){return Sound.Volume.scale(t._winBgm,0)})),this._isPlayWinBgm&&(this._isPlayWinBgm=!1,this.fadeOut(this._winBgm,1))),TweenMax.killDelayedCallsTo(this.fadeOut)},e.prototype.showProgressiveWin=function(t){var e="SFX_Win_Progressive",i=e+"_"+this._progressiveCounter;Sound.SoundManager.getSoundById(i)?Sound.SoundManager.getSoundById(i)&&Sound.play(i,{overlap:!0}):Sound.SoundManager.getSoundById(e)&&Sound.play(e,{overlap:!0}),this._progressiveCounter++},e.prototype.onShowAllWinSymbols=function(){this._winBgm?(this._isPlayWinBgm=!0,Sound.Volume.scale(this._winBgm,1),this.fadeIn(this._winBgm,0),TweenMax.delayedCall(2,this.fadeOut,[this._winBgm,2],this)):(this._sounds.push("SFX_Win_ShowAll"),Sound.play(this._sounds))},e.prototype.onShowSequenceWin=function(t){this._playedSeq.indexOf(t.Index)>-1||(this._playedSeq.push(t.Index),this._sounds.length=0,this.playSequenceWinSound(t))},e.prototype.playSequenceWinSound=function(t){this._sounds.push("SFX_Win_Sequence");for(var e=ArrayUtil.removeDuplicates(t.SymbolsId.slice(0)),i=0,o=e;i<o.length;i++){var n=o[i],r="SFX_Win_Symbol_"+n;Sound.SoundManager.getSoundById(r)&&this._sounds.push(r)}Sound.play(this._sounds)},e.prototype.onUpdateWin=function(){this._isWinCounting=!0,this.playCoinCounterSound()},e.prototype.onUpdateWinComplete=function(){this._isWinCounting=!1},e.prototype.playCoinCounterSound=function(){Sound.play("SFX_Coin-Count"),this._isWinCounting&&TweenMax.delayedCall(.03,this.playCoinCounterSound,[],this)},e.prototype.onCollectWin=function(){this._isWinCounting=!1,Sound.play("SFX_Coin-Collect")},e.prototype.onTrigger=function(){switch(ResultData.GameMode){case 1:Sound.play("SFX_Trigger_2");break;case 4:Sound.play("SFX_Trigger_3")}},e.prototype.fadeIn=function(t,e){Sound.fadeIn(t,e);var i=Sound.SoundManager.getSoundById(t);i.tweenVolumeScales(-1,1,e)},e.prototype.fadeOut=function(t,e){Sound.fadeOut(t,e,{onComplete:this.onFadeOutComplete.bind(this)});var i=Sound.SoundManager.getSoundById(t);i.tweenVolumeScales(-1,0,e)},e.prototype.onFadeOutComplete=function(){GameData.CurrentGameMode!=ResultData.GameMode&&this._winBgm&&Sound.stop(this._winBgm)},e.prototype.playSound=function(t){Sound.SoundManager.getSoundById(t)&&Sound.play(t)},e.prototype.destroyCustomMethod=function(){},e}(WinSoundHandlerPrototype);__reflect(WinSoundHandler.prototype,"WinSoundHandler",["IEventListener"]);var AutoSpinPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Panels+"AutoSpinPanel.exml"+GameUtil.preventCache("AutoSpinPanel")},e.prototype.retrieveAutoSpinSelector=function(){return new AutoSpinSelector},e.prototype.initCustomMethod=function(){var t=RES.getRes(GameData.Language+"_json").autospinpanel;for(var e in t){var i=this._eui[e];i.text=t[e]}this._backdrop=this._eui.Backdrop,this._backdrop.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._closeBtn=this._eui.BtnClose,this._closeBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._isActive=this.visible=!1,this._select=this.retrieveAutoSpinSelector(),this._select.init(this._eui.SpinCountSelectorContainer),this._select.addEventListener("selected",this.onSpinCountSelected,this),this._loss=new LossAdjuster,this._loss.init(this._eui.LossContainer),this._loss.deactivate(),this._win=new WinAdjuster,this._win.init(this._eui.WinContainer),this._win.deactivate(),this._spinBtn=this._eui.BtnStartAutoSpin,this._spinBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onSpinButtonTouch,this),this._spinBtn.enabled=!1,this._isActive=this.visible=!1},e.prototype.onSpinCountSelected=function(){this._loss.activate(),this._win.activate(),this._spinBtn.enabled=!0},e.prototype.onSpinButtonTouch=function(){AutoSpinData.isActive=!0,this.hide(),EventManager.notify("SequenceChannel",9,null,!1)},e.prototype.onCloseTouch=function(t){this._isActive&&(this._isActive=!1,this.hide())},e.prototype.showCustomMethod=function(){this._isActive=this.visible=!0},e.prototype.hideCustomMethod=function(){this._isActive=this.visible=!1,this.dispatchHideComplete(),this._select.reset(),this._loss.deactivate(),this._win.deactivate(),this._spinBtn.enabled=!1},e.prototype.isActive=function(){return this._isActive},e.prototype.destroyCustomMethod=function(){this._backdrop.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._closeBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._select.removeEventListener("selected",this.onSpinCountSelected,this),this._spinBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onSpinButtonTouch,this)},e}(OverlayPrototype);__reflect(AutoSpinPanel.prototype,"AutoSpinPanel",["IAutoSpinPanel","IEuiView"]);var ProgressiveBigWinOverlay=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.retrieveCounter=function(){return new WinCounter},e.prototype.initCustomMethod=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._backdrop=this._eui.Backdrop,this._backdrop.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._backdrop.visible=!1,this._container=this._eui.Container,this._total=this._eui.Total,this.visible=!1,this._counter=this.retrieveCounter(),this._counter.register(this._total),this._counter.addEventListener("updateWinComplete",this.onUpdateWinComplete,this)},e.prototype.showCustomMethod=function(t){this.visible=!0,this._totalAmount=t,this._win=this.getWinType(t);var e=this.getLoopTime(t);this._counter.update(t,e.pop()),this.collect(0),e.length>0&&this.exceedBigWinHandler()},e.prototype.exceedBigWinHandler=function(){var t=this.getLoopTime(this._totalAmount);t.pop();for(var e=0;e<t.length;e++)TweenMax.delayedCall(t[e],this.collect,[e+1],this)},e.prototype.onCloseTouch=function(){TweenMax.killDelayedCallsTo(this.collect),this._counter.collect(!1),this._currentWin<this._win&&this.collect(this._win)},e.prototype.collect=function(t){this._currentWin=t},e.prototype.onUpdateWinComplete=function(){this.hide()},e.prototype.getWinType=function(t){var e,i=t/GameData.TotalBet;switch(!0){case i>=GameData.BigWinRatio[2]:e=2;break;case i>=GameData.BigWinRatio[1]:e=1;break;default:e=0}return e},e.prototype.getLoopTime=function(t){var e,i=t/GameData.TotalBet;switch(!0){case i>GameData.BigWinRatio[2]:e=[5,8,12];break;case i>GameData.BigWinRatio[1]:e=[5,8];break;default:e=[5]}return e},e.prototype.destroyCustomMethod=function(){this._backdrop.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._counter.removeEventListener("updateWinComplete",this.onUpdateWinComplete,this)},e}(ProgressiveBigWinOverlayPrototype);__reflect(ProgressiveBigWinOverlay.prototype,"ProgressiveBigWinOverlay",["IOverlay","IEventListener","IEuiView"]);var SlotApplicationData={environment:0},SlotApplication=function(t){function e(){var e=t.call(this)||this;return e._hasBranding=!1,e._conencted=!1,e}return __extends(e,t),e.prototype.retrieveMobileApplicationViewController=function(){return new SlotMobileAppViewController},e.prototype.initMobile=function(){Howler.autoSuspend=!1,this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL;var t=this.retrieveMobileApplicationViewController();t.init(this,!1),EventManager.strictChannel("AppCannel",!0),EventManager.register("AppCannel",t)},e.prototype.initWeb=function(){this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL},e.prototype.initLoading=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.Language=window.lang,ConnectorData.Url=window.url,window.dev?(SlotApplicationData.environment=0,this.developmentDataHandler()):WindowUtil.getQueryVariable("token")?(SlotApplicationData.environment=2,this.tokenDataHandler()):(SlotApplicationData.environment=1,this.jumpDataHandler()),t=new LoginConnector,t.connect(),[4,RES.loadConfig("resource/"+GameData.Language+".res.json","resource/")];case 1:return e.sent(),[4,RES.loadConfig("resource/game.res.json","resource/")];case 2:return e.sent(),this.loadPreloaderResource(),[2]}})})},e.prototype.developmentDataHandler=function(){var t,e=WindowUtil.getQueryVariable("jumpData");if(e){var i=new Base64,o=StringUtil.beforeLast(i.decode(e),"}")+"}";t=JSON.parse(o)}ConnectorData.Token=WindowUtil.getQueryVariable("token")||!1,ConnectorData.GameId=t?t.gameId:window.gameId,ConnectorData.GameName=t?t.gameName:window.gameName},e.prototype.jumpDataHandler=function(){var t=new Base64,e=WindowUtil.getQueryVariable("jumpData");ConnectorData.JumpData=e;var i=StringUtil.beforeLast(t.decode(e),"}")+"}",o=JSON.parse(i);ConnectorData.Token=o.token,ConnectorData.HttpUrl=o.httpUrl,ConnectorData.BackUrl=o.backUrl,ConnectorData.ClientId=o.clientId,ConnectorData.GameId=o.gameId,ConnectorData.GameName=o.name},e.prototype.tokenDataHandler=function(){ConnectorData.Token=WindowUtil.getQueryVariable("token"),ConnectorData.GameId=parseInt(WindowUtil.getQueryVariable("gameId")),ConnectorData.GameName=WindowUtil.getQueryVariable("gameName")},e.prototype.loadPreloaderResource=function(){var t=new Loader;t.once("LoadComplete",this.initPreloaderView,this);var e=this._hasBranding?"branding":"preload";t.getGroup("lang_preload"),t.getGroup(e)},e.prototype.retrievePreloaderView=function(){return new BrandingLoaderView},e.prototype.initPreloaderView=function(t){this._hasBranding?(this.preloaderView=this.retrievePreloaderView(),this.preloaderView.once("LoadComplete",this.preloadComplete,this),this.preloaderView.loadGroups("preload"),this.stage.addChild(this.preloaderView)):this.createSceneHandler()},e.prototype.createSceneHandler=function(){ApplicationData.isPc&&(this.initMouse(),this.initKeyboard()),this.createScene()},e.prototype.retrieveGame=function(){return new SlotGame},e.prototype.createScene=function(){var t=this.retrieveGame();t.once("GameReady",this.onGameReady,this),this.stage.addChild(t),t.load()},e.prototype.onGameReady=function(t){t.currentTarget.init(),this._hasBranding&&this.destroyPreloaderView()},e}(GameApplication);__reflect(SlotApplication.prototype,"SlotApplication");var GameViewController=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onSwitchGameView=function(t){switch(t){case 0:this.backToBaseGameViewHandler();break;case 1:this.pauseGameView(0),this.goToFreeGameViewHandler();break;case 4:this.pauseGameView(0),this.gotoBonusGameViewHandler()}},e.prototype.backToBaseGameViewHandler=function(){var t;switch(this._activeView){case 1:t=3;break;case 4:t=6}var e=this._views.get(t);e.once("HideComplete",this.onExitViewHidden,this),e.init(),e.show()},e.prototype.onExitViewHidden=function(){this.destroyGameView(this._activeView),this.resumeGameView(0)},e.prototype.goToFreeGameViewHandler=function(){var t=this._views.get(2);t.once("LoadComplete",this.onGameViewReady,this),t.once("HideComplete",this.onEnterViewHidden,this),t.show(),t.loadSoundGroups("free"),t.loadGroups("free");var e=this._views.get(1);t.loadEuiView(e);var i=this._views.get(3);t.loadEuiView(i,!0)},e.prototype.gotoBonusGameViewHandler=function(){var t=this._views.get(5);t.once("LoadComplete",this.onGameViewReady,this),t.once("HideComplete",this.onEnterViewHidden,this),t.show(),t.loadSoundGroups("bonus"),t.loadGroups("bonus");var e=this._views.get(4);t.loadEuiView(e);var i=this._views.get(6);t.loadEuiView(i,!0)},e.prototype.onGameViewReady=function(t){GameData.CurrentGameMode=ResultData.GameMode;t.currentTarget;this.initView(GameData.CurrentGameMode),this.verifyGameMode()},e.prototype.onEnterViewHidden=function(){this._activeView=ResultData.GameMode,this.verifyGameMode()},e.prototype.verifyGameMode=function(){this._activeView===GameData.CurrentGameMode&&GameData.CurrentGameMode==ResultData.GameMode&&this.startGameView(GameData.CurrentGameMode)},e.prototype.onSwitchGameViewComplete=function(){this._pay.updateStatus("SequenceChannel",13)},e.prototype.startGameView=function(t){this._activeView=t;var e=this._views.get(t);e.start(),0===GameData.CurrentGameMode&&this.registerListener()},e.prototype.pauseGameView=function(t){var e=this._views.get(t);e.pause()},e.prototype.resumeGameView=function(t){this._activeView=GameData.CurrentGameMode=t;var e=this._views.get(t);e.resume(),0===GameData.CurrentGameMode&&this.registerListener()},e.prototype.destroyGameView=function(t){this._views.get(t).destroy(),this._views["delete"](t);var e;switch(t){case 1:e=this._eui.FreeGameContainer,this._views.get(3).destroy(),this._views["delete"](3);break;case 4:e=this._eui.BonusGameContainer,this._views.get(6).destroy(),this._views["delete"](6)}e.removeChildren()},e.prototype.registerListener=function(){EventManager.register("SpinChannel",this._mainPan),EventManager.register("SpinChannel",this._pay),EventManager.register("SequenceChannel",this._mainPan),EventManager.register("SequenceChannel",this._pay)},e.prototype.destroyCustomMethod=function(){},e}(GameViewControllerPrototype);__reflect(GameViewController.prototype,"GameViewController",["IGameViewController","IEventListener"]);var CustomGameViewStage=function(t){function e(){var e=t.call(this)||this;return e.fireworks=[],e}return __extends(e,t),e.prototype.init=function(t){this._eui=t,this.initCharacter(),this.initFireworks();var e=this._eui.StageContainer;this.firework1=new MovieClip("fireworks2"),e.addChild(this.firework1),this.firework1.x+=100,this.firework1.y=200,this.firework2=new MovieClip("fireworks2"),e.addChild(this.firework2),this.firework2.x=e.width-this.firework2.width,this.firework2.x-=180,this.firework2.y=this.firework1.y,this.firework1.scaleX=this.firework1.scaleY=this.firework2.scaleX=this.firework2.scaleY=1.4,this.firework1.visible=this.firework2.visible=!1,CustomData.Character=this.character,this._isSpin=!1},e.prototype.initCharacter=function(){var t=this._eui.StageContainer;this.character=new DBMovieClip("wushizi","wushizi");var e=t.getChildIndex(t.getChildByName("drum0"));t.addChildAt(this.character,e-1),this.character.play(-1),this.character.x=t.width/2,this.character.y=t.height,this.character.y-=15},e.prototype.initFireworks=function(){for(var t=this._eui.StageContainer,e=0;30>e;e++){var i=new MovieClip("fireworks",18),o=RandomUtil["boolean"]()?0:2;t.addChildAt(i,o),this.fireworks.push(i);var n=[16764299,65419,9169919,16681983];ColorUtil.tint(i,ArrayUtil.randomChildOf(n)),i.x=RandomUtil.range(0,t.width),i.y=RandomUtil.range(0,200,1),i.scaleX=i.scaleY=RandomUtil.range(1,1.5,2)}},e.prototype.updateStatus=function(e,i,o){var n=this;if("SequenceChannel"===e){var r=0,s=RandomUtil.range(1,3);switch(i){case 4:if(this.isBigWin()?(r=RandomUtil.range(12,20),ArrayUtil.randomize(this.fireworks)):r=RandomUtil.range(5,10),"idle"===this.character.currentClip.name){var a=void 0;a=this.isBigWin()?"skill2":"skill1",this.character.once(DBMovieClipEvent.ANIMATION_COMPLETE,function(t){return n.character.gotoAndPlay("idle")},this),this.character.gotoAndPlay(a)}break;case 11:r=RandomUtil.range(12,20),s=RandomUtil.range(7,10),this.onTrigger()}for(var h=function(t){var e=l.fireworks[t],i=RandomUtil.range(0,1,2);TweenMax.delayedCall(i,function(t){return e.gotoAndPlay(1,s)}),TweenMax.delayedCall(i,function(t){return Sound.play("SFX_firework_"+RandomUtil.range(0,4))})},l=this,p=0;r>p;p++)h(p)}else if("SpinChannel"===e)switch(i){case 1:this._isSpin=!0,"idle"===this.character.currentClip.name&&(this.character.once(DBMovieClipEvent.ANIMATION_COMPLETE,this.onRunCompleteHandler,this),this.character.gotoAndPlay("run"));break;case 0:this._isSpin=!1}t.prototype.updateStatus.call(this,e,i,o)},e.prototype.onRunCompleteHandler=function(){var t=this;if(this._isSpin)return void this.character.gotoAndPlay("idle",-1);if(ResultData.CurrentWin>0){this.isBigWin()?"skill2":"skill1";this.character.once(DBMovieClipEvent.ANIMATION_COMPLETE,function(e){return t.character.gotoAndPlay("idle")},this),this.character.gotoAndPlay("idle",-1)}else GameData.CurrentGameMode!=ResultData.GameMode?this.character.gotoAndPlay("skill2",-1):this.character.gotoAndPlay("idle",-1)},e.prototype.onTrigger=function(){var t=this;"idle"===this.character.currentClip.name&&(this.character.once(DBMovieClipEvent.ANIMATION_COMPLETE,function(e){return t.character.gotoAndPlay("idle",-1)},this),this.character.gotoAndPlay("skill2"),this.firework1.visible=this.firework2.visible=!0,this.firework1.play(-1),this.firework2.play(-1),Sound.play("SFX_firework_flare",{loop:!0}),1===ResultData.GameMode?TweenMax.delayedCall(1,function(t){return Sound.fadeOut("SFX_firework_flare",3,{stop:!0})}):TweenMax.delayedCall(3,function(t){return Sound.fadeOut("SFX_firework_flare",3,{stop:!0})}))},e.prototype.resume=function(){this.firework1.stop(),this.firework2.stop(),this.firework1.visible=this.firework2.visible=!1,this.character=CustomData.Character;var t=this._eui.StageContainer,e=t.getChildIndex(t.getChildByName("drum0"));t.addChildAt(this.character,e-1),this.character.gotoAndPlay("idle",-1)},e.prototype.isBigWin=function(){return ResultData.WinRatio>=GameData.BigWinRatio[0]},e.prototype.destroy=function(){this.character.destroy();for(var t=0,e=this.fireworks;t<e.length;t++){var i=e[t];i.destroy()}},e}(GameViewStage);__reflect(CustomGameViewStage.prototype,"CustomGameViewStage");var CustomSpinController=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initSpinningSymbolRules=function(){var t,e=this._symbolRules;t={inReel:[0,1,1,1,1],minimumCount:1,trigger:!1,triggerClimax:!1,hasAnimation:!1,hasSound:!1,continuous:!1},e.set(1,t),t={inReel:[0,1,1,1,0],minimumCount:3,trigger:!0,triggerClimax:!0,hasAnimation:!0,hasSound:!0,continuous:!0},e.set(2,t),t={inReel:[1,0,1,0,1],minimumCount:3,trigger:!0,triggerClimax:!0,hasAnimation:!0,hasSound:!0,continuous:!1},e.set(3,t),this._symbolPriorities=[3,2,1]},e.prototype.parseResults=function(t){this._resultIds=t;for(var e=0;e<this._resultIds.length;e++){var i=1===this._status?.1*e:0;TweenMax.delayedCall(i,this._resultReels[e].parseResults,[this._resultIds[e]],this._resultReels[e])}this._climaxHandler.parseResults(t),this._alertHandler.parseResults(t),this.onResultReady()},e.prototype.startSpinMethod=function(){this._status=1,this.notify("SpinChannel",1),this.generateSpinningSymbolsId(),this._resultIds.length=0;for(var t=0;t<this._spinnings.length;t++){var e=this._resultReels[t];e.updateStatus("SymbolChannel",0);var i=.1*t;TweenMax.delayedCall(i,this.startReelById,[t],this)}this.notify("ConnectorChannel",2)},e.prototype.instantStopSpinMethod=function(){TweenMax.killDelayedCallsTo(this.startReelById),TweenMax.killDelayedCallsTo(this.stopReelById);for(var t=0;t<this._spinnings.length;t++){var e=this._spinnings[t];-1===this._activeSpinning.indexOf(e)&&2!=e.status&&3!=e.status&&4!=e.status&&this.startReelById(e.id);var i=.2;TweenMax.delayedCall(i,this.stopReelById,[t],this)}},e.prototype.onReelHitBase=function(t){if(this.onReelHitBaseMethod(t),this._activeSpinning.length>1){this.nextReelHandler();var e=t.currentTarget,i=this._activeSpinning.indexOf(e);this._activeSpinning.splice(i,1)}},e.prototype.onReelStop=function(t){this.onReelStopSymbolsHandler(t);var e=t.currentTarget,i=this._activeSpinning.indexOf(e);i>-1&&this._activeSpinning.splice(i,1),0===this._activeSpinning.length&&(this._status=0,this.onSpinComplete())},e.prototype.getAlertSymbolsInReel=function(t){var e=[];return e=this._alertHandler.getAlertSymbolsInReel(t)},e}(SpinController);__reflect(CustomSpinController.prototype,"CustomSpinController");var CustomSlotSymbol=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){this._viewBmp.visible=!0,this._viewMc.visible=!1,this.createWinFrameMethod(),this.initWinFrameMethod()},e.prototype.initWinFrameMethod=function(){this._frame.anchorOffsetX=this._frame.width/2,this._frame.anchorOffsetY=this._frame.height/2,this._frame.x-=22,this._frame.y-=27,this._frame.scaleX=this._frame.scaleY=.9,this.hideWinFrameMethod()},e.prototype.updateView=function(){var t=SymbolManager.getTexture(this.viewId);if(this._viewBmp.texture=t,this._isMc=SymbolManager.isMovieClip(this.viewId),this._isMc)switch(void 0===this._viewMc.currentClip?this._viewMc.addNewClip("s"+this.viewId):this._viewMc.currentClip.update("s"+this.viewId),this.viewId){case 1:this._viewMc.frameRate=40;break;case 4:this._viewMc.frameRate=50;break;case 5:this._viewMc.frameRate=35;break;default:this._viewMc.frameRate=30}},e.prototype.symbolStatusHandler=function(e,i){this._status=e,2===e?TweenMax.delayedCall(.15,this.animationCompleteHandler,["SymbolChannel",2],this):t.prototype.symbolStatusHandler.call(this,e,i)},e.prototype.idleMethod=function(){this._viewBmp.visible=!0,this._viewMc.visible=!1,this._viewMc.currentClip&&this._viewMc.gotoAndStop(1),TweenMax.killDelayedCallsTo(this.animationCompleteHandler),this._viewBmp.scaleX=this._viewBmp.scaleY=1,TweenMax.killTweensOf(this._viewBmp),this.idleWinFrameMethod()},e.prototype.createWinFrameMethod=function(){RES.hasRes("winframe")?(this._frame=RES.createBitmapByName("winframe"),this._isMcFrame=!1):(this._frame=new MovieClip("winframe"),this._isMcFrame=!0),this.addChildAt(this._frame,0)},e.prototype.alertMethod=function(){var t=1.2;TweenMax.to(this,.1,{scaleX:t,scaleY:t,yoyo:!0,repeat:1,ease:Linear.easeNone,onComplete:this.animationCompleteHandler,onCompleteParams:["SymbolChannel",8],onCompleteScope:this})},e.prototype.triggerMethod=function(){if(this._isMc)this._viewBmp.visible=!1,this._viewMc.visible=!0,this._viewMc.gotoAndPlay(1);else{var t=1.1;TweenMax.to(this,.5,{scaleX:t,scaleY:t,yoyo:!0,repeat:3}),TweenMax.delayedCall(2,this.animationCompleteHandler,["SymbolChannel",9],this)}},e.prototype.showWinMethod=function(){if(this._isMc)this._viewBmp.visible=!1,this._viewMc.visible=!0,this._viewMc.gotoAndPlay(1);else{var t=1.1;TweenMax.to(this._viewBmp,.5,{scaleX:t,scaleY:t,yoyo:!0,repeat:3}),TweenMax.delayedCall(2,this.animationCompleteHandler,["SymbolChannel",1],this)}this.showWinFrameMethod()},e.prototype.showWinFrameMethod=function(){this._isMcFrame&&this._frame.play(-1),this._frame&&(this._frame.visible=!0)},e.prototype.hideWinFrameMethod=function(){this._isMcFrame&&this._frame.stop(),this._frame&&(this._frame.visible=!1)},e.prototype.destroyCustomMethod=function(){this.destroyWinFrameMethod(),t.prototype.destroyCustomMethod.call(this)},e}(WinFrameMovieClipSymbol);__reflect(CustomSlotSymbol.prototype,"CustomSlotSymbol");var BonusGameEnterView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Transitions+"BonusGameEnterView.exml"+GameUtil.preventCache("BonusGameEnterView")},e.prototype.onLoadComplete=function(){this.dispatchEventWith("LoadComplete"),this.hide()},e.prototype.dispatchHideComplete=function(){this.dispatchEventWith("HideComplete")},e}(GameViewEnterLoader);__reflect(BonusGameEnterView.prototype,"BonusGameEnterView");var BonusGameExitView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Transitions+"BonusGameExitView.exml"+GameUtil.preventCache("BonusGameExitView")},e.prototype.retrieveBigWinOverlay=function(){return new ProgressiveBigWinOverlay},e.prototype.initCustomMethod=function(){this._win=this.retrieveBigWinOverlay(),this.visible=!0,this._total=this._eui.Total,this._collect=this._eui.BtnCollect,this._win.once("HideComplete",this.onWinOverlayHidden,this)},e.prototype.showCustomMethod=function(){this.visible=!0,this._collect=this._eui.BtnCollect,this._collect.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCollectTouch,this),this._total.text=GameUtil.formatNumber(BonusGameData.TotalWin)},e.prototype.onCollectTouch=function(){this._collect.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCollectTouch,this),this.hide()},e.prototype.hideCustomMethod=function(){this.visible=!1,this.dispatchHideComplete()},e.prototype.onWinOverlayHidden=function(){this.hide()},e.prototype.dispatchHideComplete=function(){this.dispatchEventWith("HideComplete")},e.prototype.isBigWin=function(){var t=BonusGameData.TotalWin/GameData.TotalBet;return t>=GameData.BigWinRatio[0]},e.prototype.destroyCustomMethod=function(){this._win.destroy()},e}(GameViewExit);__reflect(BonusGameExitView.prototype,"BonusGameExitView");var DirectoryData={Common:"",Transitions:"",Overlays:"",Panels:""},SlotGame=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.configuration=function(){},e.prototype.retrieveGameViewController=function(){return new GameViewController},e.prototype.retrieveGameLoaderView=function(){return new GameLoaderView},e.prototype.retrieveGameInfoPanel=function(){return new GameInfoPanel},e.prototype.retrieveNoticePanel=function(){return new NoticePanel},e.prototype.retrieveCommonPanel=function(){return new CommonPanel},e.prototype.retrieveHisotry=function(){return new HistoryPanel},e.prototype.retrieveSoundPanel=function(){return new SoundPanel},e.prototype.retrieveRecord=function(){return new RecordPanel},e.prototype.retrieveMainPanel=function(){return new MainPanel},e.prototype.retrievePaytable=function(){return new Paytable},e.prototype.retrieveGameView=function(){return new GameView},e.prototype.create=function(){this.createGameLoaderView();var t=RES.getRes("config_json"),e=t.Directories;for(var i in e)DirectoryData[i]=e[i];GameData.BigWinRatio=t.BigWinRatio.slice(0),this.configuration(),BuildData.Major_Update=2,BuildData.Minor_Update=8;var o=BuildData.Version,n=BuildData.Major_Update,r=BuildData.Minor_Update,s=BuildData.Custom_Build;BuildData.Context="v"+o+"."+n+"."+r+" build "+s,console.info(BuildData.Context),RES.registerVersionController(new VersionController),this._game=new eui.Component,this._game.skinName="resource/exml/SlotGame.exml",this.addChildAt(this._game,0),this._viewCtrl=this.retrieveGameViewController(),this._helpPan=this.retrieveGameInfoPanel(),this._noticePan=this.retrieveNoticePanel(),this._commonPan=this.retrieveCommonPanel(),this._historyPan=this.retrieveHisotry(),this._mainPan=this.retrieveMainPanel(),this._sndPan=this.retrieveSoundPanel(),this._recordPan=this.retrieveRecord(),this._view=this.retrieveGameView(),this._pay=this.retrievePaytable(),this.createCustomMethod()
},e.prototype.createCustomMethod=function(){},e.prototype.createGameLoaderView=function(){this._preloadView=this.retrieveGameLoaderView(),this.addChild(this._preloadView)},e.prototype.load=function(){this._preloadView.once("LoadComplete",this.onViewReady,this);var t=["game","contents","common"];this._preloadView.loadGroups(t),Sound.SoundManager.init("sound_json");var e=["game","win"];this._preloadView.loadSoundGroups(e),this._preloadView.loadEuiView(this._pay),this._preloadView.loadEuiView(this._view),this._preloadView.loadEuiView(this._sndPan),this._preloadView.loadEuiView(this._mainPan),this._preloadView.loadEuiView(this._helpPan),this._preloadView.loadEuiView(this._commonPan),this._preloadView.loadEuiView(this._noticePan),this._preloadView.loadEuiView(this._historyPan),this._preloadView.loadEuiView(this._recordPan)},e.prototype.init=function(){var t=this;this.initCustomMethod();var e=this._game;this._view;e.NoticeContainer.addChild(this._noticePan),this._noticePan.init(),e.NoticeContainer.addChild(this._commonPan),this._commonPan.init(),e.HelpContainer.addChild(this._helpPan),this._helpPan.init(),e.SoundPanelContainer.addChild(this._sndPan),this._sndPan.init(),e.PaytableContainer.addChild(this._pay),this._pay.init(),e.TopBarContainer.addChild(this._mainPan),this._mainPan.init(),e.HistoryContainer.addChild(this._historyPan),this._historyPan.init(),e.RecordContainer.addChild(this._recordPan),this._recordPan.init(),this._viewCtrl.init(this._game,this._mainPan,this._pay),this._viewCtrl.register(0,this._view),this._viewCtrl.initView(0),TweenMax.delayedCall(.5,function(e){return t.start()})},e.prototype.start=function(){this.destroyPreloaderView(),""===ConnectorData.SessionId?this._commonPan.updateStatus("NoticeChannel",1008):this._viewCtrl.updateStatus("GameViewChannel",0,0)},e.prototype.initCustomMethod=function(){EventManager.strictChannel("SpinPanelChannel",!1),EventManager.strictChannel("ResultChannel",!1),EventManager.strictChannel("PanelsChannel",!1),EventManager.strictChannel("NoticeChannel",!1),EventManager.register("GameViewChannel",this),EventManager.register("PanelsChannel",this),EventManager.register("NoticeChannel",this)},e.prototype.updateStatus=function(t,e,i){switch(t){case"GameViewChannel":5===e&&this.onSwitchGameView(i);break;case"PanelsChannel":this.panelStatusHandler(e,i)}this._commonPan.updateStatus(t,e,i),this._noticePan.updateStatus(t,e,i)},e.prototype.panelStatusHandler=function(t,e){switch(t){case 2:this._helpPan.show();break;case 3:break;case 6:this._recordPan.show();break;case 7:break;case 4:this._historyPan.show();break;case 5:break;case 0:this._pay.show();break;case 1:break;case 8:this._sndPan.show();break;case 9:this._sndPan.hide()}},e.prototype.onSwitchGameView=function(t){if(0!=t){switch(ResultData.GameMode){case 1:this.onSwitchFreeSpinGameView();break;case 4:this.onSwitchBonusGameView()}this._view.pause()}else this.onSwitchBaseSpinGameView();this._viewCtrl.updateStatus("GameViewChannel",5,t)},e.prototype.onSwitchBaseSpinGameView=function(){this._mainPan.updateStatus("SequenceChannel",100)},e.prototype.onSwitchFreeSpinGameView=function(){},e.prototype.onSwitchBonusGameView=function(){},e.prototype.destroyPreloaderView=function(){this.removeChild(this._preloadView),this._preloadView.destroy(),this._preloadView=null},e.prototype.destroyCustomMethod=function(){EventManager.unregister("GameViewChannel",this._viewCtrl),this._viewCtrl.destroy(),this._noticePan.destroy(),this._commonPan.destroy(),this._mainPan.destroy(),this._sndPan.destroy(),this._pay.destroy(),this._recordPan.destroy(),this._historyPan.destroy()},e}(EVGame);__reflect(SlotGame.prototype,"SlotGame",["IEventListener"]);var SoundPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Panels+"SoundPanel.exml"+GameUtil.preventCache("SoundPanel")},e.prototype.initCustomMethod=function(){var t=RES.getRes(GameData.Language+"_json").soundpanel;this._eui.Bgm=t.Bgm,this._eui.Sfx=t.Sfx,this._backdrop=this._eui.Backdrop,this._backdrop.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._closeBtn=this._eui.BtnClose,this._closeBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this);var e=this._bgmBtn=this._eui.BtnBgm;e.addEventListener(eui.UIEvent.CHANGE,this.onButtonToggle,this);var i=this._sfxBtn=this._eui.BtnSfx;i.addEventListener(eui.UIEvent.CHANGE,this.onButtonToggle,this),e.selected=0!=Sound.Volume.getCategory("bgm"),i.selected=0!=Sound.Volume.getCategory("sfx"),this._isActive=this.visible=!1},e.prototype.onCloseTouch=function(t){this._isActive&&this.hide()},e.prototype.onButtonToggle=function(t){var e,i=t.currentTarget;i===this._bgmBtn?e="bgm":i===this._sfxBtn&&(e="sfx"),Sound.Volume.setCategory(e,i.selected?1:0),i.selected=0!=Sound.Volume.getCategory(e)},e.prototype.showCustomMethod=function(){this._isActive=this.visible=!0},e.prototype.hideCustomMethod=function(){this._isActive=this.visible=!1,this.dispatchHideComplete()},e.prototype.isActive=function(){return this._isActive},e.prototype.destroyCustomMethod=function(){this._backdrop.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._closeBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),this._bgmBtn.removeEventListener(eui.UIEvent.CHANGE,this.onButtonToggle,this),this._sfxBtn.removeEventListener(eui.UIEvent.CHANGE,this.onButtonToggle,this)},e}(OverlayPrototype);__reflect(SoundPanel.prototype,"SoundPanel",["ISoundPanel","IEuiView"]);var OneClickBonusGame=function(t){function e(){var e=t.call(this)||this;return e._clicked=[],e}return __extends(e,t),e.prototype.startCustomMethod=function(){t.prototype.startCustomMethod.call(this);for(var e=this._eui.ButtonsContainer,i=0;i<e.numChildren;i++){var o=e.getChildAt(i),n=o.getChildByName("click");n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonTouch,this)}},e.prototype.onButtonTouch=function(t){var e=t.currentTarget;this._clicked.push(e.parent);for(var i=this._eui.ButtonsContainer,o=0;o<i.numChildren;o++){var n=i.getChildAt(o),r=n.getChildByName("click");r.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonTouch,this)}},e.prototype.revealOthers=function(){for(var t=this._eui.ButtonsContainer,e=0;e<t.numChildren;e++){var i=t.getChildAt(e);-1===this._clicked.indexOf(i)&&this.reveal(i)}},e.prototype.reveal=function(t){},e.prototype.destroyCustomMethod=function(){this._clicked.length=0;for(var t=this._eui.ButtonsContainer,e=0;e<t.numChildren;e++){var i=t.getChildAt(e),o=i.getChildByName("click");o.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonTouch,this)}this.removeChildren()},e}(BonusGameView);__reflect(OneClickBonusGame.prototype,"OneClickBonusGame");var FreeGameEnterView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Transitions+"FreeGameEnterView.exml"+GameUtil.preventCache("FreeGameEnterView")},e.prototype.onLoadComplete=function(){this.dispatchEventWith("LoadComplete"),this.hide()},e.prototype.initCustomMethod=function(){this._backdrop=this._eui.Backdrop,this.visible=!1},e.prototype.hideCustomMethod=function(){this.visible=!1,this.dispatchHideComplete()},e}(GameViewEnterLoader);__reflect(FreeGameEnterView.prototype,"FreeGameEnterView");var FreeGameExitView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Transitions+"FreeGameExitView.exml"+GameUtil.preventCache("FreeGameExitView")},e.prototype.retrieveBigWinOverlay=function(){return new ProgressiveBigWinOverlay},e.prototype.initCustomMethod=function(){this._win=this.retrieveBigWinOverlay(),this.visible=!0,this._total=this._eui.Total,this._collect=this._eui.BtnCollect,this._win.once("HideComplete",this.onWinOverlayHidden,this)},e.prototype.showCustomMethod=function(){this.visible=!0,this._collect=this._eui.BtnCollect,this._collect.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCollectTouch,this),this._total.text=GameUtil.formatNumber(FreeGameData.TotalWin)},e.prototype.onCollectTouch=function(){this._collect.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCollectTouch,this),this.hide()},e.prototype.hideCustomMethod=function(){this.visible=!1,this.dispatchHideComplete()},e.prototype.onWinOverlayHidden=function(){this.hide()},e.prototype.dispatchHideComplete=function(){this.dispatchEventWith("HideComplete")},e.prototype.isBigWin=function(){var t=FreeGameData.TotalWin/GameData.TotalBet;return t>=GameData.BigWinRatio[0]},e.prototype.destroyCustomMethod=function(){this._win.destroy()},e}(GameViewExit);__reflect(FreeGameExitView.prototype,"FreeGameExitView");var FreeGameResultDataHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){FreeGameData.SpinCounter=0},e.prototype.parseResultData=function(t){ResultData.ResultGrid.length=0,ResultData.WinRatio=0,ResultData.CurrentWin=0,ResultData.WinningSymbols.length=0,ResultData.WinSequenceMap.clear(),ResultData.TriggerSymbolsMap.clear(),t.totalWinAmount>0&&this.onWinDataHandler(t),t.freeTimeNum>0&&this.addFreeSpinHandler(t),this.gameModeHandler(t),this.parseSpinResult(t)},e.prototype.addFreeSpinHandler=function(t){var e=this.getTriggerSymbol(1),i=GameUtil.getEmptyNumArr();ResultData.TriggerSymbolsMap.set(e,i),FreeGameData.Additional=t.freeTimeNum},e.prototype.gameModeHandler=function(t){ResultData.GameMode=0===FreeGameData.Results.length?0:1},e.prototype.destroy=function(){FreeGameData.TotalWin=0,FreeGameData.TotalSpin=0,FreeGameData.SpinCounter=0,FreeGameData.Results.length=0,ResultData.TotalWin=0},e}(ResultDataHandler);__reflect(FreeGameResultDataHandler.prototype,"FreeGameResultDataHandler");var FreeGameWinSequence=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateWinAmountHandler=function(){this.notify("SequenceChannel",102,null,!1)},e.prototype.winSequenceMethod=function(){this.showAllWinSymbols()},e.prototype.sequenceEndHandler=function(){switch(this._status=13,!0){case this.isNextGameMode():this.showTriggerSymbols();break;case this.isFreeSpin():this.triggerFreeSpin();break;default:this.onFreeSpinComplete()}},e.prototype.onTriggerSymbolsComplete=function(){FreeGameData.TotalSpin+=FreeGameData.Additional,this._panel.once("updateCounterComplete",this.onUpdateCounterComplete,this),this._panel.updateStatus("SequenceChannel",this._status)},e.prototype.onUpdateCounterComplete=function(){this.triggerFreeSpin()},e.prototype.onSpinReady=function(){this.isNextGameMode()||this.isFreeSpin()&&this.notify("SpinPanelChannel",100)},e.prototype.onBetReady=function(){},e.prototype.onFreeSpinComplete=function(){ResultData.Balance+=FreeGameData.TotalWin,this.dispatchSwitchEvent()},e.prototype.dispatchSwitchEvent=function(){this.notify("GameViewChannel",5,0)},e}(WinSequenceController);__reflect(FreeGameWinSequence.prototype,"FreeGameWinSequence");var FreeGameSpinPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return DirectoryData.Panels+"FreeGameSpinPanel.exml"+GameUtil.preventCache("FreeGameSpinPanel")},e.prototype.retrieveCounter=function(){return new FreeSpinCounter},e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this),this._eui.TotalBetAmount.text=GameUtil.formatNumber(GameData.TotalBet),this._counter=this.retrieveCounter(),this._counter.register(this._eui.TotalFreeSpinAmount),this._counter.init(GameData.FreeSpins[0]),this._counter.addEventListener("updateCounterComplete",this.onUpdateCounterComplete,this)},e.prototype.updateStatus=function(e,i,o){switch(e){case"SequenceChannel":11===i&&this.onTrigger();break;default:t.prototype.updateStatus.call(this,e,i,o)}},e.prototype.onTrigger=function(){this._counter.update(FreeGameData.TotalSpin)},e.prototype.onSpinStart=function(){FreeGameData.SpinCounter++,this._counter.updateSpinCounter()},e.prototype.onUpdateCounterComplete=function(){this.dispatchEventWith("updateCounterComplete")},e.prototype.destroyCustomMethod=function(){this._counter.removeEventListener("updateCounterComplete",this.onUpdateCounterComplete,this),this._counter.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(SpinPanel);__reflect(FreeGameSpinPanel.prototype,"FreeGameSpinPanel");var SwiperPrototype=function(t){function e(){var e=t.call(this)||this;return e._isTouch=!1,e}return __extends(e,t),e.prototype.init=function(t){var e=this._target=t||ApplicationData.stage;e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),e.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchBegin=function(t){var e=this._target;e.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this._isTouch=!0,this._currentX=this._currentY=void 0,this._initX=t.stageX,this._initY=t.stageY},e.prototype.onTouchMove=function(t){if(this._isTouch){var e=this._target;e.x=t.stageX-this._initX,e.y=t.stageY-this._initY,this._currentX=t.stageX,this._currentY=t.stageY}},e.prototype.onTouchEnd=function(t){var e=this._target;e.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this._isTouch=!1,this._currentX=this._currentY=void 0,this._endX=t.stageX,this._endY=t.stageY},e.prototype.destroy=function(){var t=this._target;t.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e}(egret.EventDispatcher);__reflect(SwiperPrototype.prototype,"SwiperPrototype");var PayLineController=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){this._linesConfig=RES.getRes("config_json").PayLines;for(var t=this.getColorList(),e=0;e<this._lines.length;e++){var i=this._lines[e];i.id=e;var o=this.getLinePositions(e);i.init(o,t[e]||t[0]),i.visible=!1}},e.prototype.getLinePositions=function(t){for(var e=GameData.PayLines,i=GameData.TotalRows,o=GameData.TotalReels,n=[],r=e[t],s=0;o>s;s++){var a=r[s],h=a%o,l=Math.floor(a/o)%i,p=this._resultReels[h].symbols[l],u=p.x,c=p.y;n.push([u,c])}return n},e.prototype.getColorList=function(){var t=[];for(var e in this._linesConfig.colors)t.push(this._linesConfig.colors[e]);return t},e.prototype.onSpinStart=function(){this.hideAllWinLines()},e.prototype.showAllWinLines=function(){var t=this,e=ResultData.WinSequenceMap;e.forEach(function(e){return t.showLine(e)})},e.prototype.hideAllWinLines=function(){for(var t=0,e=this._lines;t<e.length;t++){var i=e[t];i.hide()}},e.prototype.showLine=function(t){var e=t;this._lines[e.LineId].show()},e.prototype.destroyCustomMethod=function(){},e}(PayLineControllerPrototype);__reflect(PayLineController.prototype,"PayLineController",["IPayLineController","IEventListener"]);var Scroller=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onWheelScroll=function(t){var e=t.data;e>0?this.scrollUp(e):0>e&&this.scrollDown(e)},e.prototype.scrollUp=function(t){},e.prototype.scrollDown=function(t){},e}(ScrollerPrototype);__reflect(Scroller.prototype,"Scroller");var PayLineIndexPrototype=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.initCustomMethod()},e.prototype.show=function(){this.showCustomMethod()},e.prototype.hide=function(){this.hideCustomMethod()},e.prototype.destroy=function(){this.destroyCustomMethod(),this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(PayLineIndexPrototype.prototype,"PayLineIndexPrototype");var EaseDragger=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(e,i,o,n,r){void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=0),t.prototype.init.call(this,e,i,o,n,r),this._tracker=new MovementTracker(100)},e.prototype.onTouchBegin=function(t){ApplicationData.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this);var e=this._target;e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this._isTouch=!0,this._currentX=this._currentY=void 0,this._initX=t.stageX-e.x,this._initY=t.stageY-e.y,this._tracker.start()},e.prototype.getEaseSpeedMovement=function(){var t=this._tracker.speed;return.5*t},e.prototype.onTouchEnd=function(t){this._tracker.stop(),ApplicationData.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this);var e=this._target;e.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this._isTouch=!1,this._currentX=this._currentY=void 0,this._endX=t.stageX,this._endY=t.stageY,this._directY>this._minY?this.onSnapDown():this._directY<this._minY?this.onSnapUp():this.onSnapNull()},e.prototype.onSnapUp=function(){var t=this._target,e=this._minY,i=t.y+this.getEaseSpeedMovement();TweenMax.to(t,.5,{y:e>i?i:e})},e.prototype.onSnapDown=function(){var t=this._target,e=this._maxY-t.height,i=t.y-this.getEaseSpeedMovement();TweenMax.to(t,.5,{y:i>e?i:e})},e.prototype.onSnapNull=function(){var t=this._target,e=this._minY,i=this._maxY-t.height,o=t.y;o>e?TweenMax.to(t,.5,{y:e}):i>o&&TweenMax.to(t,.5,{y:i})},e.prototype.moveUpHandler=function(){var t=this._target,e=this._currentY-this._initY;t.y=e},e.prototype.moveDownHandler=function(){var t=this._target,e=this._currentY-this._initY;t.y=e},e.prototype.destroy=function(){this._tracker.destroy(),t.prototype.destroy.call(this)},e}(Dragger);__reflect(EaseDragger.prototype,"EaseDragger");var GameLoaderView=function(t){function e(){var e=t.call(this)||this;return e._totalItems=0,e._loadedItems=0,e._viewQueu=[],e}return __extends(e,t),e.prototype.create=function(){t.prototype.create.call(this),this._sndLoader=new Sound.SoundLoader,this._sndLoader.addEventListener("GroupLoadComplete",this.onResourceLoadComplete,this),this._sndLoader.addEventListener("SoundLoadComplete",this.onResourceProgress,this),this._sndLoader.addEventListener("SoundLoadError",this.onSoundResourceError,this)},e.prototype.loadGroups=function(t,e){if("string"==typeof t){var i=RES.getGroupByName(t).length;0!==i&&(this._totalItems+=i,this._loader.getGroup(t,e))}else for(var o=0,n=t;o<n.length;o++){var r=n[o];this.loadGroups(r,e)}},e.prototype.loadSoundGroups=function(t){if("string"==typeof t){var e=Sound.SoundManager.getGroupList(t),i=e?e.length:0;0!==i&&(this._totalItems+=i,this._sndLoader.loadGroup(t))}else for(var o=0,n=t;o<n.length;o++){var r=n[o];this.loadSoundGroups(r)}},e.prototype.loadEuiView=function(t){return-1!=EuiViewData.skins.indexOf(t.getSkinName())?void t.load():(this._viewQueu.push(t),void this._totalItems++)},e.prototype.onViewLoaded=function(t){this.onResourceProgress(),this.onResourceLoadComplete()},e.prototype.onResourceProgress=function(){this._loadedItems++,this._preload.updateProgress(this._loadedItems,this._totalItems)},e.prototype.onSoundResourceError=function(t){},e.prototype.onResourceLoadComplete=function(){if(this.isLoaded())this.dispatchEventWith("LoadComplete"),this.reset();else if(this._loadedItems===this._totalItems-this._viewQueu.length){for(var t=0,e=this._viewQueu;t<e.length;t++){var i=e[t];i.once("EuiViewReady",this.onViewLoaded,this),i.load()}this._viewQueu.length=0}},e.prototype.isLoaded=function(){return this._loadedItems===this._totalItems&&this._totalItems>0&&this._loadedItems>0&&0===this._viewQueu.length},e.prototype.reset=function(){this._totalItems=0,this._loadedItems=0},e.prototype.destroy=function(){this._sndLoader.removeEventListener("GroupLoadComplete",this.onResourceLoadComplete,this),this._sndLoader.removeEventListener("SoundLoadComplete",this.onResourceProgress,this),this._sndLoader.removeEventListener("SoundLoadError",this.onSoundResourceError,this),this._sndLoader.destroy(),t.prototype.destroy.call(this)},e}(PreloaderView);__reflect(GameLoaderView.prototype,"GameLoaderView");var Sound;!function(t){var e=function(){function e(){}return e.init=function(t){var e=RES.getRes(t);this._resPath=e.path,this._formats=e.format,this._groupsPath=e.groups_path;for(var i in this._groupsPath)i.endsWith("/")||(this._groupsPath[i]+="/");var o=e.groups,n=Object.keys(o).length;if(0!==n)for(var r in o){var s=o[r];s.length>0&&(this._idleSndGrpList.set(r,s.slice(0)),this._errorSndGrpList.set(r,s.slice(0)),this.addSound(o[r],r))}},e.addSound=function(i,o){if("string"==typeof i){if(!this._sndObjDict.has(i)){var n=e.getSoundCategory(i),r=new t.SoundObject({src:this.getSource(i,o),preload:!1},i,o,n);this._sndObjDict.set(i,r),this._sndGrpList.has(o)||this._sndGrpList.set(o,[]),this._sndGrpList.get(o).push(i),this._sndCatList.has(n)||this._sndCatList.set(n,[]),this._sndCatList.get(n).push(i)}}else for(var s=0,a=i;s<a.length;s++){var h=a[s];this.addSound(h,o)}},e.getSource=function(t,e){var i=this._formats;if(void 0===i||0===i.length)return[];var o=[],n=this._groupsPath[e];void 0===n&&(n="");for(var r=0,s=i;r<s.length;r++){var a=s[r];o.push(this._resPath+n+t+"."+a)}return o},e.getSoundById=function(t){return this._sndObjDict.get(t)},e.getSoundLength=function(t){var e=this.getSoundById(t);return null===e?-1:e.duration()},e.getSoundCategory=function(t){var e=t.toLowerCase().split("_"),i=e[0];switch(i){case"bgm":case"vo":return i;default:return"sfx"}},e.getGroupList=function(t){return this._sndGrpList.get(t)},e.getCategoryList=function(t){return this._sndCatList.get(t)},e.getSoundDictionary=function(){return this._sndObjDict},e.getIdleSoundList=function(){return this._idleSndGrpList},e.getErrorSoundList=function(){return this._errorSndGrpList},e._groupsPath={},e._sndGrpList=new Map,e._sndCatList=new Map,e._sndObjDict=new Map,e._idleSndGrpList=new Map,e._errorSndGrpList=new Map,e}();t.SoundManager=e,__reflect(e.prototype,"Sound.SoundManager")}(Sound||(Sound={}));var DBMovieClip=function(t){function e(e,i,o,n){return t.call(this,e,i,o,n)||this}return __extends(e,t),e.prototype.play=function(t){this.loopHandler(t),this._dbClip.animation.gotoAndPlayByFrame(this._currentClip,this.currentFrame,this._loopCounter)},e.prototype.gotoAndPlay=function(t,e){this.currentClipHandler(t),this.loopHandler(e),this._dbClip.animation.gotoAndPlayByFrame(this._currentClip,this._toFrame,this._loopCounter)},e.prototype.gotoAndStop=function(t){this.currentClipHandler(t),this._dbClip.animation.gotoAndStopByFrame(this._currentClip,this._toFrame)},e.prototype.stop=function(){this._dbClip.animation.stop()},e.prototype.rewind=function(t){this.loopHandler(t),this._dbClip.animation.timeScale=-1,this._dbClip.animation.gotoAndPlayByFrame(this._currentClip,this.currentFrame,this._loopCounter)},e}(DBMovieClipPrototype);__reflect(DBMovieClip.prototype,"DBMovieClip",["IDBMovieClip"]);var ConnectingEdgeCrossedPayLine=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(e,i,o){this._dir=o,t.prototype.init.call(this,e,i)},e.prototype.initCustomMethod=function(){this.drawLineShadow(),this.drawConnector(),this.drawLine()},e.prototype.drawConnector=function(){var t=this.retrieveEdgeConnector();if(this.addChild(t),0!=this._dir){var e=this._dir>0?this._positions[0]:this._positions[this._positions.length-1],i=e[0],o=e[1];t.x=i,t.y=o}else{var n=this._positions[0],i=n[0],o=n[1];t.x=i,t.y=o;var r=this.retrieveEdgeConnector(),s=this._positions[this._positions.length-1],a=s[0],h=s[1];r.x=a,r.y=h,this.addChild(r)}},e.prototype.retrieveEdgeConnector=function(){var t=new egret.Shape;return t.graphics.beginFill(this._color),t.graphics.drawCircle(0,0,6),t.graphics.endFill(),t},e.prototype.getPosition=function(){return this.id},e.prototype.getBufferY=function(){var t=GameData.PayLines.length,e=.8*GameData.SymbolHeight,i=e/t;return i*=this.getPosition(),i-=e/2},e.prototype.drawLine=function(){var t=this.retrieveLine(),e=this._positions[0],i=e[0],o=e[1];t.graphics.moveTo(i,o);for(var n=this.getBufferX(),r=this.getBufferY(),s=1;s<this._positions.length;s++){var a=this._positions[s],h=a[0],l=a[1];this.isBetween(0,s,this._positions.length-1)?(t.graphics.lineTo(h-n,l+r),t.graphics.lineTo(h+n,l+r)):t.graphics.lineTo(h,l)}this.addChild(t)},e.prototype.drawLineShadow=function(){var t=this.retrieveLineShadow(),e=this._positions[0],i=e[0],o=e[1];t.graphics.moveTo(i,o);for(var n=this.getBufferX(),r=this.getBufferY(),s=1;s<this._positions.length;s++){var a=this._positions[s],h=a[0],l=a[1];this.isBetween(0,s,this._positions.length-1)?(t.graphics.lineTo(h-n,l+r),t.graphics.lineTo(h+n,l+r)):t.graphics.lineTo(h,l)}this.addChild(t)},e.prototype.isBetween=function(t,e,i){return e>t&&i>e},e}(CrossedPayLine);__reflect(ConnectingEdgeCrossedPayLine.prototype,"ConnectingEdgeCrossedPayLine");var ConnectingEdgeCurvePayLine=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(e,i,o){this._dir=o,t.prototype.init.call(this,e,i)},e.prototype.initCustomMethod=function(){this.drawLineShadow(),this.drawConnector(),this.drawLine()},e.prototype.drawConnector=function(){var t=this.retrieveEdgeConnector();if(this.addChild(t),0!=this._dir){var e=this._dir>0?this._positions[0]:this._positions[this._positions.length-1],i=e[0],o=e[1];t.x=i,t.y=o}else{var n=this._positions[0],i=n[0],o=n[1];t.x=i,t.y=o;var r=this.retrieveEdgeConnector(),s=this._positions[this._positions.length-1],a=s[0],h=s[1];r.x=a,r.y=h,this.addChild(r)}},e.prototype.retrieveEdgeConnector=function(){var t=new egret.Shape;return t.graphics.beginFill(this._color),t.graphics.drawCircle(0,0,6),t.graphics.endFill(),t},e}(CurvePayLine);__reflect(ConnectingEdgeCurvePayLine.prototype,"ConnectingEdgeCurvePayLine");var ConnectingEdgePayLine=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(e,i,o){this._dir=o,t.prototype.init.call(this,e,i)},e.prototype.initCustomMethod=function(){this.drawLineShadow(),this.drawConnector(),this.drawLine()},e.prototype.drawConnector=function(){var t=this.retrieveEdgeConnector();if(this.addChild(t),0!=this._dir){var e=this._dir>0?this._positions[0]:this._positions[this._positions.length-1],i=e[0],o=e[1];t.x=i,t.y=o}else{var n=this._positions[0],i=n[0],o=n[1];t.x=i,t.y=o;var r=this.retrieveEdgeConnector(),s=this._positions[this._positions.length-1],a=s[0],h=s[1];r.x=a,r.y=h,this.addChild(r)}},e.prototype.retrieveEdgeConnector=function(){var t=new egret.Shape;return t.graphics.beginFill(this._color),t.graphics.drawCircle(0,0,6),t.graphics.endFill(),t},e}(PayLine);__reflect(ConnectingEdgePayLine.prototype,"ConnectingEdgePayLine");var StackPayLine=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.drawLine=function(){var t=this.retrieveLine(),e=this.retrieveStackLine(),i=this._positions[0],o=i[0],n=i[1];t.graphics.moveTo(o,n),e.graphics.moveTo(o,n+2);for(var r=0,s=this._positions;r<s.length;r++){var a=s[r],h=a[0],l=a[1];t.graphics.lineTo(h,l),e.graphics.lineTo(h,l+2)}this.addChild(t),this.addChild(e)},e.prototype.retrieveStackLine=function(){var t=new egret.Shape;return t.graphics.lineStyle(2.5,16777215,.5,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.MITER),t},e}(PayLine);__reflect(StackPayLine.prototype,"StackPayLine");var NumbersLooper=function(t){function e(e){var i=t.call(this)||this;return e&&i.register(e),i._counter={init:0},i}return __extends(e,t),e.prototype.register=function(t){this._tf=t},e.prototype.init=function(t){void 0===t&&(t=0),this._counter={init:t},this._tf.text=t.toString()},e.prototype.update=function(t,e){void 0===e&&(e=1),this.loopMethod(t,e)},e.prototype.loopMethod=function(t,e){this._tween=TweenMax.to(this._counter,e,{init:t,onUpdate:this.onUpdate,onUpdateScope:this,ease:Linear.easeNone})},e.prototype.onUpdate=function(){this._tf.text=Math.ceil(this._counter.init).toString()},e.prototype.destroy=function(){this._tween&&this._tween.kill()},e}(egret.EventDispatcher);__reflect(NumbersLooper.prototype,"NumbersLooper");var PayLineIndicator=function(t){function e(){var e=t.call(this)||this;return e._points=[],e}return __extends(e,t),e.prototype.init=function(t,e){this._positions=t,this._color=e,this.create()},e.prototype.create=function(){var t=this.retrieveBase();this.addChild(t),this._activeBase=this.retrieveActiveBase(),this.addChild(this._activeBase),this._activeBase.visible=!1;var e=GameData.TotalReels,i=GameData.TotalRows,o=3,n=this.width/e;n-=o,n-=o/e;var r=this.height/i;r-=o,r-=o/i;for(var s=0;e>s;s++)for(var a=void 0,h=0;i>h;h++)if(a=this.retrieveDefault(n,r),this.addChild(a),a.x=(n+o)*s,a.x+=o,a.y=(r+o)*h,a.y+=o,this._positions[s]===h){var l=this.retrieveWinDisplayObject(n,r,this._color);this.addChild(l),l.x=(n+o)*s,l.x+=o,l.y=(r+o)*h,l.y+=o,this._points.push(l)}},e.prototype.retrieveBase=function(){var t=new egret.Shape;return t.graphics.beginFill(0,.8),t.graphics.drawRect(0,0,this.width,this.height),t},e.prototype.retrieveActiveBase=function(){var t=new egret.Shape;return t.graphics.beginFill(16777215),t.graphics.drawRect(0,0,this.width,this.height),t},e.prototype.retrieveDefault=function(t,e){var i=new egret.Shape;return i.graphics.beginFill(6710886),i.graphics.drawRect(0,0,t,e),i},e.prototype.retrieveWinDisplayObject=function(t,e,i){var o=new egret.Shape;return o.graphics.beginFill(i),o.graphics.drawRect(0,0,t,e),o},e.prototype.show=function(t,e){this._activeBase.visible=!0,this.alpha=1},e.prototype.hide=function(){this._activeBase.visible=!1,this.alpha=.5},e.prototype.reset=function(){this._activeBase.visible=!1,this.alpha=1},e.prototype.destroy=function(){this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(PayLineIndicator.prototype,"PayLineIndicator",["IPayLineIndicator"]);var PortraitLineWinPaytable=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this),ApplicationData.isPc?this.initScrollMethod():this.initDragMethod(),ApplicationData.isPc?this._scroll.deactivate():this._drag.deactivate();var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawRect(0,0,ApplicationData.defaultWidth,ApplicationData.defaultHeight),e.graphics.endFill(),this._eui.PaytableContainer.addChild(e),this._eui.Contents.mask=e,this.initContents()},e.prototype.retrieveDragger=function(){return new PaytableDragger},e.prototype.initDragMethod=function(){this._drag=this.retrieveDragger(),this._drag.init(this._eui.Contents,0,0,0,ApplicationData.defaultHeight-50)},e.prototype.retrieveScroller=function(){return new PaytableScroller},e.prototype.initScrollMethod=function(){this._scroll=this.retrieveScroller(),this._scroll.init(this._eui.Contents,0,ApplicationData.defaultHeight-50)},e.prototype.initContents=function(){var t,e=this,i=RES.getRes(GameData.Language+".contents_json").Pay,o=function(o){i[o].forEach(function(t,i){e.parseContents(o,t,i)}),t&&(n._eui[o].y=n._eui[t].y+n._eui[t].height+80),t=o},n=this;for(var r in i)o(r)},e.prototype.parseContents=function(t,e,i){var o=this._eui[t].getChildByName("content"+i),n=o.getChildByName("text");n.textFlow=(new egret.HtmlTextParser).parse(e)},e.prototype.showCustomMethod=function(){this.visible=!0;var t=this._eui.PaytableContainer;TweenMax.fromTo(t,.5,{y:this.height},{y:0,onComplete:this.onShowComplete,onCompleteScope:this}),TweenMax.fromTo(this._backdrop,.5,{alpha:0},{alpha:1})},e.prototype.onShowComplete=function(){this._isActive=!0,ApplicationData.isPc?this._scroll.activate():this._drag.activate()},e.prototype.hideCustomMethod=function(){var t=this._eui.PaytableContainer;TweenMax.to(t,.5,{y:this.height,onComplete:this.onHideComplete,onCompleteScope:this}),TweenMax.to(this._backdrop,.25,{alpha:0})},e.prototype.onHideComplete=function(){ApplicationData.isPc?this._scroll.deactivate():this._drag.deactivate(),this._isActive=this.visible=!1,this.dispatchHideComplete()},e.prototype.destroyCustomMethod=function(){ApplicationData.isPc?this._scroll.destroy():this._drag.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(LineWinPaytable);__reflect(PortraitLineWinPaytable.prototype,"PortraitLineWinPaytable");
var LineWinIndicator=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._grp=t,this._total=this._grp.getChildByName("total"),this._grp.visible=!1},e.prototype.showCustotmMethod=function(t){this._total.text=GameUtil.formatNumber(t.Coin),this._grp.visible=!0},e.prototype.hideCustomMethod=function(){this._grp.visible=!1},e.prototype.destroyCustomMethod=function(){},e}(WinIndicatorPrototype);__reflect(LineWinIndicator.prototype,"LineWinIndicator");var LineWinFreeSpinGameView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return"resource/exml/view/FreeSpinGameView.exml"+GameUtil.preventCache("FreeSpinGameView")},e.prototype.retrieveResultDataHandler=function(){return new FreeGameResultDataHandler},e.prototype.retrieveSequenceController=function(){return new FreeGameWinSequence},e.prototype.retrieveConnector=function(){return new FreeSpinConnector},e.prototype.retrieveSpinPanel=function(){return new FreeGameSpinPanel},e.prototype.initOverlays=function(){this._bigWin.init()},e.prototype.startCustomMethod=function(){ResultData.TriggerSymbolsMap["delete"](2),this.notify("GameViewChannel",6),this.registerListeners(),this._snd.updateStatus("GameViewChannel",0),this._spinCtrl.updateStatus("SequenceChannel",9)},e}(LineWinGameView);__reflect(LineWinFreeSpinGameView.prototype,"LineWinFreeSpinGameView");var ProgressBar=function(t){function e(){var e=t.call(this)||this;return e.create(),e}return __extends(e,t),e.prototype.create=function(){this._bar=RES.createBitmapByName("preloader-bar_png"),this.addChild(this._bar);var t=new egret.Shape;t.graphics.beginFill(16711680),t.graphics.drawRect(0,0,this._bar.width,this._bar.height),t.graphics.endFill(),this.addChild(t),this._masker=t,this._bar.mask=this._masker},e.prototype.init=function(){this._masker.scaleX=0},e.prototype.updateProgress=function(t,e){var i=t/e;this._masker.scaleX=i},e.prototype.destroy=function(){this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(ProgressBar.prototype,"ProgressBar");var RotationBlings=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.start=function(){this._isStop=!1;for(var t=0;t<this._grp.numChildren;t++){var e=this._grp.getChildAt(t),i=RandomUtil.range(0,2,2),o=.3,n=RandomUtil.range(.8,1,2),r=RandomUtil.range(1.1,1.5,2);e.scaleX=e.scaleY=n,e.rotation=RandomUtil.range(0,360);var s=RandomUtil.range(1,1.5,2);TweenMax.to(e,s,{rotation:"360",repeat:-1,ease:Linear.easeNone}),TweenMax.delayedCall(i,this.bling,[e,o,n,r],this)}},e.prototype.bling=function(t,e,i,o){return this._isStop?void TweenMax.killTweensOf(t):void TweenMax.fromTo(t,e,{scaleX:i,scaleY:i},{scaleX:o,scaleY:o,repeat:1,yoyo:!0,onComplete:this.bling,onCompleteParams:[t,e,i,o],onCompleteScope:this})},e}(Blings);__reflect(RotationBlings.prototype,"RotationBlings");var ParticleSystem;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i._isMovieClip=!1,i._isStop=!1,i.create(e),i}return __extends(e,t),e.prototype.createCustomMethod=function(){},e.prototype.create=function(t){if(MovieClipDataManager.getClipData(t)){var e=new MovieClip([t]);this._obj=e,this.addChild(this._obj),this._isMovieClip=!0}else if(RES.getRes(t)){var i=RES.createBitmapByName(t);this._obj=i,this.addChild(this._obj)}this.createCustomMethod(),this._obj&&(this._obj.x=-(this._obj.width/2),this._obj.y=-(this._obj.height/2))},e.prototype.init=function(){this.initCustomMethod()},e.prototype.start=function(){if(this.startCustomMethod(),this._isMovieClip){var t=this._obj;t.gotoAndPlay(RandomUtil.range(0,t.totalFrame)+1,-1)}},e.prototype.update=function(){},e.prototype.stop=function(){this.stopCustomMethod(),this._isMovieClip&&(this._obj.stop(),this._isStop=!0)},e.prototype.destroy=function(){this.destroyCustomMethod(),this.stop(),this._isMovieClip&&this._obj.destroy(),this._obj=null,this.removeChildren()},e}(egret.DisplayObjectContainer);t.ParticlePrototype=e,__reflect(e.prototype,"ParticleSystem.ParticlePrototype",["IParticle"])}(ParticleSystem||(ParticleSystem={}));var Preloader=function(t){function e(){var e=t.call(this)||this;return e.create(),e}return __extends(e,t),e.prototype.create=function(){},e.prototype.updateProgress=function(t,e){},e.prototype.destroy=function(){},e}(egret.DisplayObjectContainer);__reflect(Preloader.prototype,"Preloader");var ParticleSystem;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o._gravity=1,o._speed=1,o}return __extends(i,e),i.prototype.initCustomMethod=function(){this._speed=1,this._gravity=.3,this._src.x=this.width/2,this._src.y=this.height-100},i.prototype.retrieveParticle=function(e){return new t.FountainParticle(e[RandomUtil.range(0,e.length)])},i.prototype.assignParticle=function(t){this._src.registerParticle(t)},i.prototype.startCustomMethod=function(){for(var t=0,e=0;e<this._particlesPool.length;e++){var i=this._particlesPool[e];-1===this._activePools.indexOf(i)&&(TweenMax.delayedCall(t*e*.001,this.activeParticle,[i],this),t++)}},i.prototype.stopCustomMethod=function(){TweenMax.killDelayedCallsTo(this.activeParticle)},i.prototype.onEnterFrame=function(t){for(var e=this._activePools.length,i=e-1;i>-1;i--){var o=!1,n=this._activePools[i];switch(n.vy+=this._gravity*this._speed,n.x+=n.vx*this._speed,n.y+=n.vy*this._speed,n.rotation+=n.rotationRate*this._speed,!0){case n.x<-(2*n.width):case n.x>this.width+2*n.width:case n.y<-(2*n.height):case n.y>this.height+2*n.height:o=!0}o&&(this._isStop?this.stopHandler(i,n):this.assignParticle(n))}},i.prototype.stopHandler=function(t,e){if(this._activePools.splice(t,1),e.visible=!1,0===this._activePools.length)if(this._isDestroy)this.destroy();else{this.stopTicker();for(var i=0,o=this._particlesPool;i<o.length;i++){var n=o[i];n.stop(),n.visible=!1}}},i.prototype.destroyCustomMethod=function(){this._activePools=null},i}(t.ParticlesViewPrototype);t.Fountain=e,__reflect(e.prototype,"ParticleSystem.Fountain")}(ParticleSystem||(ParticleSystem={}));var PaySymbolsAnimator=function(){function t(){this._symbols={}}return t.prototype.retrieveSymbol=function(){return new SlotSymbol},t.prototype.init=function(t){var e=this,i=GameData.PayRates,o=GameData.SymbolWidth,n=GameData.SymbolHeight;GameData.SymbolBmpWidth,GameData.SymbolBmpHeight,GameData.SymbolMcWidth,GameData.SymbolMcHeight;i.forEach(function(i,r){var s="s"+(r+1),a=t[s],h=a.parent,l=e.retrieveSymbol();h.addChild(l),l.init(),l.updateViewId(r+1),l.x=a.x+.5*o,l.y=a.y+.5*n,l.scaleX=a.scaleX,l.scaleY=a.scaleY,h.removeChild(a),e._symbols[s]=t[s]=l})},t.prototype.updateStatus=function(t,e,i){switch(t){case"SpinChannel":1===e&&(this._winActive=!1,this.reset());break;case"PanelsChannel":switch(e){case 0:!this._winActive&&this.onShow();break;case 1:this.onHide()}break;case"SequenceChannel":switch(e){case 201:case 202:case 203:case 204:this._winActive=!0,this.onShowWin(i)}}},t.prototype.onShowWin=function(t){this.reset();var e=t;this.playAnimation("s"+e.SymbolId)},t.prototype.onShow=function(){var t=0;for(var e in this._symbols)TweenMax.delayedCall(t,this.playAnimation,[e],this),t+=2},t.prototype.playAnimation=function(t){this._symbols[t].updateStatus("SymbolChannel",1)},t.prototype.onHide=function(){this.reset()},t.prototype.reset=function(){TweenMax.killDelayedCallsTo(this.playAnimation);for(var t in this._symbols);},t.prototype.destroy=function(){this.reset()},t}();__reflect(PaySymbolsAnimator.prototype,"PaySymbolsAnimator",["IEventListener"]);var MovieClip=function(t){function e(e,i){void 0===i&&(i=30);var o=t.call(this)||this;if(o._clipsArr=[],o._isPlaying=!1,o._isRewind=!1,o._isLoop=!1,o._loopCounter=0,void 0!==e){"string"!=typeof e?(a=o._clipsArr).push.apply(a,e):o._clipsArr.push(e);for(var n=0,r=o._clipsArr;n<r.length;n++){var s=r[n];o.addNewClip(s)}o.setupCurrentClip(o._clipsArr[0])}return o._frameRate=i,o;var a}return __extends(e,t),e.prototype.addNewClip=function(t){var e,i;if("string"==typeof t){if(i=t,this.getChildByName(i))return;e=new Clip(t)}else{if(i=t.name,this._clipsArr.indexOf(i)>-1)return;e=t}0===this.numChildren?this._currentClip=e:e.visible=!1,this.addChild(e),-1===this._clipsArr.indexOf(i)&&this._clipsArr.push(e.name)},e.prototype.play=function(t){this.stop(),void 0!==t&&this.loopHandler(t),this._toFrame=this.currentClip.totalFrame,this.forwardController()},e.prototype.playToAndStop=function(t){this.stop(),this._toFrame=t,this.forwardController()},e.prototype.gotoAndPlay=function(t,e){this.stop(),void 0!==e&&this.loopHandler(e),"string"==typeof t?this.setupCurrentClip(t):this.currentClip.currentFrame=t,this._toFrame=this.currentClip.totalFrame,this.forwardController()},e.prototype.gotoAndStop=function(t){this.stop(),"string"==typeof t?this.setupCurrentClip(t):this._currentClip.currentFrame=t},e.prototype.stop=function(){this._isPlaying=!1,this._isLoop=!1,this._loopCounter=0,this._isRewind=!1,this._tween&&this._tween.kill()},e.prototype.rewind=function(t){this.stop(),this._isRewind=!0,void 0!==t&&this.loopHandler(t),this._toFrame=1,this.reverseController()},e.prototype.rewindToAndStop=function(t){this.stop(),this._isRewind=!0,this._toFrame=t,this.reverseController()},e.prototype.nextFrame=function(){this.stop(),this._currentClip.currentFrame+1<=this._currentClip.totalFrame&&(this._currentClip.currentFrame=this._currentClip.currentFrame+1)},e.prototype.prevFrame=function(){this.stop(),this._currentClip.currentFrame-1>1&&(this._currentClip.currentFrame=this._currentClip.currentFrame-1)},e.prototype.forwardController=function(){this._counter={init:this._currentClip.currentFrame};var t=this._toFrame;this._tween=new TweenMax(this._counter,(t-this._counter.init+1)/this._frameRate,{init:t,onUpdate:this.onUpdate,onUpdateScope:this,onComplete:this.onComplete,onCompleteScope:this,ease:Linear.easeNone}),this._isPlaying=!0},e.prototype.reverseController=function(){this._counter={init:this._currentClip.currentFrame};var t=this._toFrame;this._tween=new TweenMax(this._counter,this._counter.init/this._frameRate,{init:t,onUpdate:this.onUpdate,onUpdateScope:this,onComplete:this.onComplete,onCompleteScope:this,ease:Linear.easeNone}),this._isPlaying=!0},e.prototype.onUpdate=function(){if(void 0!==this._currentClip){var t=Math.ceil(this._counter.init),e=this._currentClip.currentFrame;t!==e&&(this._currentClip.currentFrame=t)}},e.prototype.onComplete=function(){this._isLoop&&(this._loopCounter--,this.dispatchEventLoopAnimationComplete()),this.loopController()},e.prototype.loopHandler=function(t){this._isLoop=!0,this._loopCounter=-1===t?1/0:t},e.prototype.loopController=function(){this._loopCounter>0?this._isRewind?(this.currentClip.currentFrame=this.currentClip.totalFrame,this.reverseController()):(this.currentClip.currentFrame=1,this.forwardController()):(this._isLoop=!1,this._isRewind=!1,this._isPlaying=!1,this.dispatchAnimationComplete())},e.prototype.setupCurrentClip=function(t){for(var e=0;e<this.numChildren;e++)this.getChildAt(e).visible=!1;this._currentClip=this.getChildByName(t),this._currentClip.visible=!0,this._currentClip.currentFrame=1},e.prototype.dispatchAnimationComplete=function(){this.dispatchEventWith("MovieclipAnimationComplete")},e.prototype.dispatchEventLoopAnimationComplete=function(){this.dispatchEventWith("MovieclopLoopAnimationComplete")},e.prototype.setHeight=function(t){this.scaleY=t/this.height},e.prototype.setWidth=function(t){this.scaleX=t/this.width},e.prototype.isPlaying=function(){return this._isPlaying},Object.defineProperty(e.prototype,"frameRate",{get:function(){return this._frameRate},set:function(t){this._frameRate=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalFrame",{get:function(){return this._currentClip.totalFrame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalClip",{get:function(){return this._clipsArr.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentClip",{get:function(){return this._currentClip},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clipsArray",{get:function(){return this._clipsArr},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.stop(),this._clipsArr.length=0;for(var t=0;t<this.numChildren;t++){var e=this.getChildAt(t);e.destroy()}this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(MovieClip.prototype,"MovieClip",["IMovieClip"]);var MobileAppViewController=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(e,i){t.prototype.init.call(this,e,i),EventManager.strictChannel("OrientationChannel",!1),window.addEventListener("orientationchange",this.onOrientationChange,!1),document.addEventListener("visibilitychange",this.onVisibilityChange,!1)},e.prototype.onOrientationChange=function(){var t=ApplicationData.deviceScreenWidth=window.screen.width,e=ApplicationData.deviceScreenHeight=window.screen.height;ApplicationData.isPortraitMode=e>t,EventManager.notify("OrientationChannel",0)},e.prototype.onVisibilityChange=function(){document.hidden},e}(AppViewController);__reflect(MobileAppViewController.prototype,"MobileAppViewController");var Toaster=function(){function t(){}return t.prototype.init=function(t){this._contents=RES.getRes(GameData.Language+"_json").game,this._message=t.ToastContainer.getChildByName("message"),this._message.text=this._contents.Start},t.prototype.updateStatus=function(t,e,i){switch(t){case"SpinChannel":this.spinStatusHandler(e,i);break;case"GameViewChannel":6===e&&this.onResume()}},t.prototype.spinStatusHandler=function(t,e){switch(t){case 0:this.onSpinComplete();break;case 1:this.onSpinStart()}},t.prototype.onSpinStart=function(){this._message.visible=!0,this._message.text=this._contents.SpinStart,TweenMax.to(this._message,.5,{alpha:1})},t.prototype.onSpinComplete=function(){var t=this;TweenMax.to(this._message,.3,{alpha:0,onComplete:function(e){return t._message.visible=!1}})},t.prototype.onResume=function(){this._message.visible=!0,this._message.alpha=1,this._message.text=this._contents.Start},t.prototype.destroy=function(){},t}();__reflect(Toaster.prototype,"Toaster",["IEventListener"]);var WinIndicator=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.retriveWinCounter=function(){return new WinCounter},e.prototype.initCustomMethod=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._grp=t,this._winCounter=this.retriveWinCounter(),this._winCounter.addEventListener("updateWinComplete",this.onUpdateWinComplete,this),this._winCounter.register(t.getChildByName("total")),this._winCounter.init(),this._grp.visible=!1},e.prototype.onUpdateWinComplete=function(){},e.prototype.showCustotmMethod=function(t,e){void 0===e&&(e=0),this._winCounter.init(0),this._winCounter.update(t,e),this._grp.visible=!0},e.prototype.hideCustomMethod=function(){this._grp.visible=!1},e.prototype.destroyCustomMethod=function(){this._winCounter.removeEventListener("updateWinComplete",this.onUpdateWinComplete,this),this._winCounter.destroy()},e}(WinIndicatorPrototype);__reflect(WinIndicator.prototype,"WinIndicator",["IWinIndicator"]);var GameUtil;!function(t){function e(t){return StringUtil.numberWithCommas(t.toFixed(2))}function i(){for(var t=GameData.TotalReels,e=[],i=0;t>i;i++)e[i]=[];return e}function o(t){var e;return e=n[t]?n[t]:n[t]="?v="+Math.random()}t.formatNumber=e,t.getEmptyNumArr=i;var n={};t.preventCache=o}(GameUtil||(GameUtil={}));var RES;!function(t){function e(e){var i=new egret.Bitmap,o=t.getRes(e);return i.texture=o,i}function i(t){return MovieClipDataManager.parseSpriteSheetData(t),new MovieClip(t)}function o(t){var e=new Image;e.src=t;var i=e.onload=function(){var t=new egret.Texture,i=new egret.BitmapData(e);return t._setBitmapData(i),t}();return i}t.createBitmapByName=e,t.createMovieClipByName=i,t.createBase64Texture=o}(RES||(RES={}));var ApplicationData={stage:void 0,defaultWidth:0,defaultHeight:0,isPc:!1,isPortraitMode:!1,isFullScreen:!1,deviceScreenWidth:0,deviceScreenHeight:0},AssetAdapter=function(){function t(){this._retryCounter=3}return t.prototype.getAsset=function(t,e,i){if(this._src=t,this._completeFunc=e,this._scope=i,RES.hasRes(t)){var o=RES.getRes(t);o?this.onResourceLoadComplete(o):RES.getResAsync(t,this.onResourceLoadComplete,this)}else this._retryCounter=3,RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onResourceLoadError,null),RES.getResByUrl(t,this.onResourceLoadComplete,this,RES.ResourceItem.TYPE_IMAGE)},t.prototype.onResourceLoadComplete=function(t){this._completeFunc.call(this._scope,t,this._src)},t.prototype.onResourceLoadError=function(t){this._retryCounter>0?(RES.getResByUrl(this._src,this.onResourceLoadComplete,this,RES.ResourceItem.TYPE_IMAGE),this._retryCounter--):t.resItem.url===this._src&&RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onResourceLoadError,null)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Keyboard;!function(t){var e=function(){function t(){}return t.prototype.init=function(){EventManager.strictChannel("keyboard",!1),document.addEventListener("keydown",this.onKeyDown,!1),document.addEventListener("keyup",this.onKeyUp,!1)},t.prototype.onKeyDown=function(t){EventManager.notify("keyboard",t.keyCode)},t.prototype.onKeyUp=function(t){EventManager.notify("keyboard",t.type)},t}();t.Keyboard=e,__reflect(e.prototype,"Keyboard.Keyboard")}(Keyboard||(Keyboard={})),egret.DisplayObject.prototype.$getConcatenatedVisible=function(){if(this.$parent){var t=this.$parent.$getConcatenatedVisible();return t&&this.$visible}return this.$visible};var Mouse;!function(t){var e,i,o,n=function(t,n,r,s){if("Mousever"!=t||!e.isRollOver){if("Mousever"==t?e.isRollOver=!0:"MouseOut"==t&&delete e.isRollOver,o&&e.buttonModeForMouse)try{var a=i.$displayList.renderBuffer.surface;"Mousever"==t?a.style.cursor="pointer":"MouseOut"==t&&(a.style.cursor="auto")}catch(h){}egret.TouchEvent.dispatchTouchEvent(e,t,n,!1,r,s,null)}};t.enable=function(t){o="Windows PC"==egret.Capabilities.os||"Mac OS"==egret.Capabilities.os,i=t,o&&s();var a=function(i,o){e&&!e.$stage&&(n("MouseOut",!0,i,o),n("MouseOut",!1,i,o),e=null);var r=t.$hitTest(i,o);null!=r&&r!=t?e?r!=e&&(n("MouseOut",!0,i,o),e.$getConcatenatedVisible()&&e.hitTestPoint(i,o,!0)||n("MouseOut",!1,i,o),e=r,n("Mousever",!1,i,o),n("MouseOver",!0,i,o)):(e=r,n("Mousever",!1,i,o),n("MouseOver",!0,i,o)):e&&(n("MouseOut",!0,i,o),n("MouseOut",!1,i,o),e=null)},h=0/0,l=0/0,p=egret.sys.TouchHandler.prototype.onTouchMove;egret.sys.TouchHandler.prototype.onTouchMove=function(t,e,o){if(h=t,l=e,p.call(this,t,e,o),r){var n=i.$hitTest(t,e);n||(n=i),egret.TouchEvent.dispatchTouchEvent(n,"MouseMove",!0,!0,t,e,o,!0)}a(t,e)};var u=egret.sys.TouchHandler.prototype.onTouchBegin;egret.sys.TouchHandler.prototype.onTouchBegin=function(t,e,i){u.call(this,t,e,i),a(t,e)};var c=!1,d=egret.web.WebTouchHandler.prototype.getLocation;egret.web.WebTouchHandler.prototype.getLocation=function(t){return 0==t.buttons&&(c=!0),d.call(this,t)};var _=egret.sys.TouchHandler.prototype.onTouchEnd;egret.sys.TouchHandler.prototype.onTouchEnd=function(t,e,o){if(c){if(c=!1,h=t,l=e,_.call(this,t,e,o),r){var n=i.$hitTest(t,e);n||(n=i),egret.TouchEvent.dispatchTouchEvent(n,"MouseMove",!0,!0,t,e,o,!0)}}else _.call(this,t,e,o),a(t,e)},t.addEventListener(egret.Event.ENTER_FRAME,function(){0/0!=h&&0/0!=l&&a(h,l)},null)},t.setButtonMode=function(t,e){t.buttonModeForMouse=e};var r=!1;t.setMouseMoveEnabled=function(t){r=t};var s=function(){var t="mousewheel",e=function(t){var e=t.type;("DOMMouseScroll"==e||"mousewheel"==e)&&(t.delta=t.wheelDelta?t.wheelDelta:-(t.detail||0),i.dispatchEventWith("MosueWheel",!1,t.delta))};window.addEventListener?("mousewheel"===t&&void 0!==document.mozFullScreen&&(t="DOMMouseScroll"),window.addEventListener(t,function(t){e(t)},!1)):window.attachEvent&&window.attachEvent("on"+t,function(t){t=t||window.event,e(t)})}}(Mouse||(Mouse={}));var AdjusterDragger=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.moveRightHandler=function(){var t=this._target,e=this._currentX-this._initX;e>=this._minX&&e<=this._maxX&&(t.x=e,this.dispatchMovement())},e.prototype.moveLeftHandler=function(){var t=this._target,e=this._currentX-this._initX,i=10;e>=this._minX-i&&e<=this._maxX&&(t.x=e,this.dispatchMovement())},e.prototype.dispatchMovement=function(){var t=this._target.x,e=100*t/this._maxX;this.dispatchEventWith("moveX",!1,Math.ceil(e))},e}(Dragger);__reflect(AdjusterDragger.prototype,"AdjusterDragger");var LossAdjuster=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this._none=RES.getRes(GameData.Language+"_json").autospinpanel.LoseNone},e.prototype.onAdjust=function(e){t.prototype.onAdjust.call(this,e),this._percent=e.data,this.update(this._percent),AutoSpinData.isTrackLoss=AutoSpinData.AllowedLoss>0},e.prototype.activate=function(){this._btn.enabled=!0,this._percent=-1,this.update(this._percent),AutoSpinData.isTrackLoss=AutoSpinData.AllowedLoss>0;var t=this._container.getChildByName("dragger");t.x=0,this._bar.scaleX=0},e.prototype.deactivate=function(){t.prototype.deactivate.call(this),this._percent=0,this.onNoSelection()},e.prototype.update=function(t){if(0>t)return AutoSpinData.AllowedLoss=0,void this.onNoSelection();var e=GameData.TotalBet*AutoSpinData.Total,i=e/2,o=e-i,n=o*t/100+i;AutoSpinData.AllowedLoss=n,this._totalTxt.text=GameUtil.formatNumber(n)},e.prototype.onNoSelection=function(){this._totalTxt.text=this._none},e}(AdjusterPrototype);__reflect(LossAdjuster.prototype,"LossAdjuster",["IAdjuster"]);var WinAdjuster=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this._none=RES.getRes(GameData.Language+"_json").autospinpanel.WinNone},e.prototype.onAdjust=function(e){t.prototype.onAdjust.call(this,e),this._percent=e.data,this.update(this._percent),AutoSpinData.isTrackWin=AutoSpinData.AllowedWin>0},e.prototype.activate=function(){this._btn.enabled=!0,this._percent=-1,this.update(this._percent),AutoSpinData.isTrackWin=AutoSpinData.AllowedWin>0;var t=this._container.getChildByName("dragger");t.x=0,this._bar.scaleX=0},e.prototype.deactivate=function(){t.prototype.deactivate.call(this),this._percent=0,this.onNoSelection()},e.prototype.update=function(t){if(0>t)return AutoSpinData.AllowedWin=0,void this.onNoSelection();var e=1e3*GameData.TotalBet,i=.1*e,o=e-i,n=o*t/100+i;AutoSpinData.AllowedWin=n,this._totalTxt.text=GameUtil.formatNumber(n)},e.prototype.onNoSelection=function(){this._totalTxt.text=this._none},e}(AdjusterPrototype);__reflect(WinAdjuster.prototype,"WinAdjuster",["IAdjuster"]);var ArrayUtil;!function(t){function e(t,e){return t.filter(function(t){return t!==e})}function i(t,e){return t.filter(function(t){return!e.includes(t)})}function o(t){return Array.from(new Set(t))}function n(t){for(var e,i,o=t.length;0!==o;)i=Math.floor(Math.random()*o),o-=1,e=t[o],t[o]=t[i],t[i]=e;return t}function r(t,e,i){void 0===e&&(e=0),void 0===i&&(i=1);var o=0;e+i>t.length&&(i=t.length-e);var n=0;for(n;i>n;n++)o+=parseInt(t[n+e]);return o}function s(t){return t[Math.floor(Math.random()*t.length)]}function a(t,e){return t.reduce(function(t,i,o){return(o%e==0?t.push([i]):t[t.length-1].push(i))&&t},[])}function h(t,e){return t.reduce(function(t,i,o){return(t[o%e]=t[o%e]||[]).push(i),t},[])}function l(t){return[].concat.apply([],t)}t.removeValue=e,t.removeValues=i,t.removeDuplicates=o,t.randomize=n,t.sumOfArrayRange=r,t.randomChildOf=s,t.toMatrix=a,t.toMatrix2=h,t.flatten=l}(ArrayUtil||(ArrayUtil={}));var ColorUtil;!function(t){function e(t,e){var i=function(t){var e={r:-1,g:-1,b:-1};return e.b=t%256,e.g=Math.floor(t/256)%256,e.r=Math.floor(t/256/256),e},o=i(e),n=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];n[0]=o.r/255,n[6]=o.g/255,n[12]=o.b/255;var r=new egret.ColorMatrixFilter(n);t.filters=[r]}t.tint=e}(ColorUtil||(ColorUtil={}));var DisplayObjectUtil;!function(t){function e(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),t.x-=t.anchorOffsetX,t.anchorOffsetX=t.width*e,t.x+=t.x-t.anchorOffsetX,t.y-=t.anchorOffsetY,t.anchorOffsetY=t.height*i,t.y+=t.y-t.anchorOffsetY}function i(t){var e;return t instanceof egret.Bitmap&&(e=new egret.Bitmap(t.texture)),e}t.setAnchor=e,t.clone=i}(DisplayObjectUtil||(DisplayObjectUtil={}));var AutoSpinController=function(){function t(){}return t.prototype.init=function(t){this._eui=t,this._autoTxt=this._eui.AutoSpinTxt,this._spinRange=RES.getRes("config_json").AutoSpinRange,this._autoBtn=this._eui.BtnAutoSpin,this._autoBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onAutoSpinTouch,this),this._autoStopBtn=this._eui.BtnAutoSpinStop,this._autoStopBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onAutoSpinStopTouch,this),this._autoStopBtn.visible=!1},t.prototype.onAutoSpinTouch=function(){this.notify("SpinPanelChannel",5)},t.prototype.onAutoSpinStopTouch=function(){this.reset(),this.notify("SpinPanelChannel",6)},t.prototype.update=function(t){this._autoBtn.visible=!1,this._autoStopBtn.visible=!0,this._autoTxt.text=t.toString()},t.prototype.reset=function(){AutoSpinData.isActive=!1,AutoSpinData.Total=AutoSpinData.AllowedLoss=AutoSpinData.AllowedWin=0,AutoSpinData.isTrackLoss=AutoSpinData.isTrackWin=!1,AutoSpinData.StopOnGameMode.length=0,this._autoTxt.text=AutoSpinData.Total.toString(),this._autoBtn.visible=!0,this._autoStopBtn.visible=!1},Object.defineProperty(t.prototype,"enabled",{set:function(t){this._autoBtn.enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabledStop",{set:function(t){this._autoStopBtn.enabled=t},enumerable:!0,configurable:!0}),t.prototype.notify=function(t,e,i){EventManager.notify(t,e,i)},t.prototype.destroy=function(){this._autoBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onAutoSpinTouch,this),this._autoStopBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onAutoSpinStopTouch,this)},t}();__reflect(AutoSpinController.prototype,"AutoSpinController",["IAutoSpinController"]);var BetLineController=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this._totalTxt.text=GameData.BetLineAmount.toString()},e}(BetController);__reflect(BetLineController.prototype,"BetLineController",["IBetController"]);var BetValueController=function(t){function e(){var e=t.call(this)||this;return e._betIdx=0,e._totalBet=0,e}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this._betRange=GameData.BetRange,GameData.BetValue=this._totalBet=this._betRange[this._betIdx],this._totalTxt.text=GameUtil.formatNumber(this._totalBet)},e.prototype.onBetButtonTouchBegin=function(t){if(t.currentTarget===this._upBet){this._betIdx++;var e=this._betIdx===this._betRange.length-1;this.notify("SpinPanelChannel",2,{betIdx:this._betIdx,isMaxBet:e})}else this._betIdx--,this.notify("SpinPanelChannel",3,{betIdx:this._betIdx,isMaxBet:!1});GameData.BetValue=this._totalBet=this._betRange[this._betIdx]||0,this._totalTxt.text=GameUtil.formatNumber(this._totalBet),this.updateButtonStatus(),this.dispatchEventWith("betting")},Object.defineProperty(e.prototype,"enabled",{set:function(t){return t?void this.updateButtonStatus():(this._upBet.enabled=!1,void(this._downBet.enabled=!1))},enumerable:!0,configurable:!0}),e.prototype.updateButtonStatus=function(){0===this._betIdx?(this._upBet.enabled=!0,this._downBet.enabled=!1):this._betIdx===this._betRange.length-1?(this._upBet.enabled=!1,this._downBet.enabled=!0):(this._upBet.enabled=!0,this._downBet.enabled=!0)},e.prototype.activateMaxBet=function(){this._betIdx=this._betRange.length-1,this._upBet.enabled=!1,this._downBet.enabled=!0,GameData.BetValue=this._totalBet=this._betRange[this._betIdx],this._totalTxt.text=GameUtil.formatNumber(this._totalBet)},e}(BetController);__reflect(BetValueController.prototype,"BetValueController",["IBetValueController"]);var MaxBetController=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t){this._eui=t;var e=(this._onBtn=this._eui.BtnMaxBet_On,this._offBtn=this._eui.BtnMaxBet_Off);e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMaxBetTouch,this),this.update()},e.prototype.onMaxBetTouch=function(){this._offBtn.visible=!1,this._onBtn.visible=!0,this.dispatchEventWith("maxbet")},e.prototype.update=function(){this.isMaxBet()?(this._offBtn.visible=!1,this._onBtn.visible=!0):(this._offBtn.visible=!0,this._onBtn.visible=!1)},Object.defineProperty(e.prototype,"enabled",{set:function(t){this._offBtn.enabled=t,this._onBtn.enabled=t},enumerable:!0,configurable:!0}),e.prototype.isMaxBet=function(){return GameData.BetValue===GameData.BetRange[GameData.BetRange.length-1]},e.prototype.destroy=function(){this._offBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMaxBetTouch,this)},e}(egret.EventDispatcher);__reflect(MaxBetController.prototype,"MaxBetController",["IMaxBetController"]);var GreenSockUtil;!function(t){function e(t,e){for(var i=TweenMax.getTweensOf(t),o=0,n=i;o<n.length;o++){var r=n[o];(r.vars.onCompleteScope===e||r.vars.callbackScope===e)&&r.kill()}}t.killDelayedCallsByScope=e}(GreenSockUtil||(GreenSockUtil={}));var MathUtil;!function(t){function e(t){return 0>t?-t:t}function i(t){return t>0?-1*t:Math.abs(t)}function o(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!0);var o,n=Math.pow(10,e);return o=i?Math.round(t*n)/n:Math.floor(t*n)/n}function n(t){return t>0?this.decimalsPoint(t,0,!1):this.decimalsPoint(t,0,!0)}t.abs=e,t.switchPositiveNegative=i,t.decimalsPoint=o,t.trunc=n}(MathUtil||(MathUtil={}));var RandomUtil;!function(t){function e(t,e,i){if(void 0===i&&(i=0),t===e)return t;if(0===i)return Math.floor(Math.random()*(e-t))+t;var o=10,n=1;for(n;i>n;n++)o*=10;return Math.floor((Math.random()*(e-t)+t)*o)/o}function i(t){return Math.random()<.5?-t:t}function o(){return 16777215*Math.random()}function n(){return Math.random()>.5?!0:!1}t.range=e,t.positiveNegative=i,t.color=o,t["boolean"]=n}(RandomUtil||(RandomUtil={}));var HistoryConnector=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.connect=function(){var t=ConnectorData.Url+"user/playerHistory",e={headers:{Authorization:"bearer "+ConnectorData.Token,sessionId:ConnectorData.SessionId}};this.post(t,e)},e.prototype.successHandler=function(t){this.dispatchEventWith("historyRecieved",!1,t)},e.prototype.errorHandler=function(t){console.error("[History]:",t),this.dispatchEventWith("error")},e}(Fetcher);__reflect(HistoryConnector.prototype,"HistoryConnector");var StringUtil;!function(t){function e(t,e){if(null===t)return"";var i=t.indexOf(e);return-1===i?"":(i+=e.length,t.substr(i))}function i(t,e){if(null===t)return"";var i=t.lastIndexOf(e);if(-1!==i)return i+=e.length,t.substr(i)}function o(t,e){return null===t?!1:0===t.indexOf(e)}function n(t,e){if(null===t)return"";var i=t.indexOf(e);return-1===i?"":t.substr(0,i)}function r(t,e){if(null===t)return"";var i=t.lastIndexOf(e);return-1===i?"":t.substr(0,i)}function s(t,e,i){var o="";if(null===t)return o;var n=t.indexOf(e);if(-1!==n){n+=e.length;var r=t.indexOf(i,n);-1!==r&&(o=t.substr(n,r-n))}return o}function a(t,e,i){void 0===i&&(i=".");var o=[];if(null===t||!this.contains(t,i))return o;for(var n=0,r=t.length,s=new RegExp("[^"+this._escapePattern(i)+"]+$");r>n;){var a=t.substr(n,e);this.contains(a,i)||(o.push(this.truncate(a,a.length)),n+=a.length),a=a.replace(s,""),o.push(a),n+=a.length}return o}function h(t,e){void 0===e&&(e=!1);var i=this.trimLeft(t);return e?i.replace(/^.|\b./g,this._upperCase):i.replace(/(^\w)/,this._upperCase)}function l(t,e){return null===t?!1:-1!==t.indexOf(e)}function p(t,e,i){if(void 0===i&&(i=!0),null===t)return 0;var o=this._escapePattern(e),n=i?"g":"ig";return t.match(new RegExp(o,n)).length}function u(t,e){var i,o;
if(null===t&&(t=""),null===e&&(e=""),t===e)return 0;var n,r=[],s=t.length,a=e.length;if(0===s)return a;if(0===a)return s;for(i=0;s>=i;i++)r[i]=[];for(i=0;s>=i;i++)r[i][0]=i;for(o=0;a>=o;o++)r[0][o]=o;for(i=1;s>=i;i++){var h=t.charAt(i-1);for(o=1;a>=o;o++){var l=e.charAt(o-1);n=h===l?0:1,r[i][o]=this._minimum(r[i-1][o]+1,r[i][o-1]+1,r[i-1][o-1]+n)}}return r[s][a]}function c(t,e){return t.indexOf(e)===t.length-e.length}function d(t){var e=this.removeExtraWhitespace(t);return!!e.length}function _(t){return null===t?!0:!t.length}function y(t){if(null===t)return!1;var e=/^[-+]?\d*\.?\d+(?:[eE][-+]?\d+)?$/;return e.test(t)}function m(t,e,i){for(var o=t;o.length<i;)o=e+o;return o}function f(t,e,i){for(var o=t;o.length<i;)o+=e;return o}function v(t){if(null===t)return"";var e=t.toLowerCase().replace(/\b([^.?;!]+)/,this.capitalize);return e.replace(/\b[i]\b/,"I")}function g(t){var e=/[\\"\r\n]/g;return'"'+t.replace(e,this._quote)+'"'}function C(t,e,i){if(void 0===i&&(i=!0),null===t)return"";var o=this._escapePattern(e),n=i?"g":"ig";return t.replace(new RegExp(o,n),"")}function S(t){if(null===t)return"";var e=this.trim(t);return e.replace(/\s+/g," ")}function w(t){return null===t?"":t.split("").reverse().join("")}function b(t){return null===t?"":t.split(/\s+/).reverse().join("")}function M(t,e){var i=this.editDistance(t,e),o=Math.max(t.length,e.length);return 0===o?100:100*(1-i/o)}function T(t){return null===t?"":t.replace(/<\/?[^>]+>/gim,"")}function E(t){return null===t?"":t.replace(/(\w)/,this.swapCase)}function R(t){return null===t?"":t.replace(/^\s+|\s+$/g,"")}function B(t){return null===t?"":t.replace(/^\s+/,"")}function x(t){return null===t?"":t.replace(/\s+$/,"")}function P(t){return null===t?0:t.match(/\b\w+\b/g).length}function L(t,e,i,o){if(void 0===i&&(i="..."),void 0===o&&(o=!1),null===t)return"";isNaN(e)&&(e=t.length),e-=i.length;var n=t;return n.length>e&&(n=n.substr(0,e),o&&/[^\s]/.test(t.charAt(e))&&(n=this.trimRight(n.replace(/\w+$|\s+$/,""))),n+=i),n}function G(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}t.afterFirst=e,t.afterLast=i,t.beginsWith=o,t.beforeFirst=n,t.beforeLast=r,t.between=s,t.block=a,t.capitalize=h,t.contains=l,t.countOf=p,t.editDistance=u,t.endsWith=c,t.hasText=d,t.isEmpty=_,t.isNumeric=y,t.padLeft=m,t.padRight=f,t.properCase=v,t.quote=g,t.remove=C,t.removeExtraWhitespace=S,t.reverse=w,t.reverseWords=b,t.similarity=M,t.stripTags=T,t.swapCase=E,t.trim=R,t.trimLeft=B,t.trimRight=x,t.wordCount=P,t.truncate=L,t.numberWithCommas=G}(StringUtil||(StringUtil={}));var WindowUtil;!function(t){function e(t){for(var e=window.location.search.substring(1),i=e.split("&"),o=0;o<i.length;o++){var n=i[o].split("=");if(decodeURIComponent(n[0])==t)return decodeURIComponent(n[1])}}t.getQueryVariable=e}(WindowUtil||(WindowUtil={}));var AssetLoader=function(){function t(){this._retryCounter=3}return t.prototype.getAsset=function(t,e,i,o){if(this._src=t,this._completeFunc=e,this._errorFunc=i,this._scope=o,RES.hasRes(t)){var n=RES.getRes(t);n?this.onResourceLoadComplete(n):RES.getResAsync(t,this.onResourceLoadComplete,this)}else this._retryCounter=3,RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onResourceLoadError,null),RES.getResByUrl(t,this.onResourceLoadComplete,this,RES.ResourceItem.TYPE_IMAGE)},t.prototype.onResourceLoadComplete=function(t){this._completeFunc.call(this._scope,t,this._src)},t.prototype.onResourceLoadError=function(t){this._retryCounter>0?(RES.getResByUrl(this._src,this.onResourceLoadComplete,this,RES.ResourceItem.TYPE_IMAGE),this._retryCounter--):t.resItem.url===this._src&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onResourceLoadError,null),this._errorFunc.call(this._scope))},t}();__reflect(AssetLoader.prototype,"AssetLoader");var GroupLoader=function(){function t(){this._groupName=[],this._errorCounter=0,this._errorList=[],this._ignoreLoadError=!1,this._retryCounter=3}return t.prototype.init=function(t,e,i,o,n){void 0===n&&(n=3),this._completeFunc=t,this._progressFunc=e,this._errorFunc=i,this._scope=o,this._retryCounter=n,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)},t.prototype.getGroup=function(t,e){null===this._groupName&&(this._groupName=[]),this._groupName.push(t),RES.loadGroup(t,e)},t.prototype.onResourceLoadComplete=function(t){if(this._groupName.indexOf(t.groupName)>-1){var e=this._groupName.indexOf(t.groupName);-1===e?!1:this._groupName.splice(e,1),this._completeFunc.call(this._scope,t),(null===this._groupName||0===this._groupName.length)&&this.reset()}},t.prototype.onResourceProgress=function(t){this._groupName.indexOf(t.groupName)>-1&&this._progressFunc.call(this._scope,t)},t.prototype.onItemLoadError=function(t){this._errorList.push(t.resItem),console.warn("Url:"+t.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(t){if(this._retryCounter>0)RES.loadGroup(t.groupName),this._retryCounter--;else if(this._ignoreLoadError)this.onResourceLoadComplete(t);else{var e=this._errorList;this._errorFunc.call(this._scope,t,e),this.reset(),console.warn("Group:"+t.groupName+" has failed to load")}},Object.defineProperty(t.prototype,"ignoreLoadError",{set:function(t){this._ignoreLoadError=t},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this._groupName.length=0,this._errorCounter=0},t.prototype.destroy=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)},t}();__reflect(GroupLoader.prototype,"GroupLoader");var RecordConnector=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.connect=function(){var t=ConnectorData.Url+"user/playerRecord",e={headers:{Authorization:"bearer "+ConnectorData.Token,sessionId:ConnectorData.SessionId}};this.post(t,e)},e.prototype.successHandler=function(t){this.dispatchEventWith("recordRecieved",!1,t)},e.prototype.errorHandler=function(t){console.error("[Record]:",t),this.dispatchEventWith("error")},e}(Fetcher);__reflect(RecordConnector.prototype,"RecordConnector");var DBMovieClip2=function(t){function e(e,i,o,n){var r=t.call(this,e,i,o,n)||this;return r._sequences=[],r}return __extends(e,t),e.prototype.play=function(e){return this.isPlaying()?(this._sequences.push(["play",e]),this):(t.prototype.play.call(this,e),this)},e.prototype.gotoAndPlay=function(e,i){return this.isPlaying()?(this._sequences.push(["gotoAndPlay",e,i]),this):(t.prototype.gotoAndPlay.call(this,e,i),this)},e.prototype.gotoAndStop=function(e){return this.isPlaying()?(this._sequences.push(["gotoAndStop",e]),this):(t.prototype.gotoAndStop.call(this,e),this)},e.prototype.stop=function(){return this.isPlaying()?(this._sequences.push(["stop"]),this):(t.prototype.stop.call(this),this)},e.prototype.rewind=function(e){return this.isPlaying()?(this._sequences.push(["rewind",e]),this):(t.prototype.rewind.call(this,e),this)},e.prototype.onAnimationComplete=function(){0===this._sequences.length?this.dispatchAnimationComplete():this.chainedMethod()},e.prototype.chainedMethod=function(){var t=this._sequences[0][0];switch(this._sequences[0].shift(),this[t].apply(this,this._sequences[0]),this._sequences.shift(),t){case"gotoAndStop":case"stop":this.onAnimationComplete()}},e.prototype.killSequence=function(e){this._sequences.length=0,e&&t.prototype.stop.call(this)},e.prototype.destroy=function(){this.killSequence(!0),t.prototype.destroy.call(this)},e}(DBMovieClip);__reflect(DBMovieClip2.prototype,"DBMovieClip2",["IDBMovieClip2"]);var DBMovieClipEvent=function(t){function e(e,i,o){return void 0===i&&(i=!1),void 0===o&&(o=!1),t.call(this,e,i,o)||this}return __extends(e,t),e.ANIMATION_COMPLETE="dragonBonesMovieclipAnimationComplete",e.LOOP_ANIMATION_COMPLETE="dragonBonesMovieclopLoopAnimationComplete",e}(egret.Event);__reflect(DBMovieClipEvent.prototype,"DBMovieClipEvent");var Loader=function(t){function e(){var e=t.call(this)||this;return e._loadCounter=0,e._completeCounter=0,e._errorCounter=0,e._errorList=[],e._ignoreLoadError=!1,e}return __extends(e,t),e.prototype.getGroup=function(t,e){this._loadCounter++;var i=new GroupLoader;i.init(this.onGroupLoadComplete,this.onGroupLoadProgress,this.onGroupLoadError,this),i.getGroup(t,e)},e.prototype.onGroupLoadComplete=function(t){this.dispatchEventWith("GroupLoadComplete"),this._completeCounter++,this.onLoadComplete()},e.prototype.onGroupLoadProgress=function(t){},e.prototype.onGroupLoadError=function(t){this.dispatchEventWith("GroupLoadError"),this._errorCounter++,this._errorList.push(t),this.onLoadError()},e.prototype.getTheme=function(t){this._loadCounter++;var e=new ThemeLoader;e.getTheme(t,this.onThemeLoadComplete,this.onThemeLoadError,this)},e.prototype.onThemeLoadError=function(t){this.dispatchEventWith("ThemeLoadError"),this._errorCounter++,this._errorList.push(t),this.onLoadError()},e.prototype.onThemeLoadComplete=function(t){this.dispatchEventWith("ThemeLoadComplete"),this._completeCounter++,this.onLoadComplete()},e.prototype.getAsset=function(t){this._loadCounter++;var e=new AssetLoader;e.getAsset(t,this.onAssetLoadComplete,this.onAssetLoadError,this)},e.prototype.onAssetLoadError=function(t){this.dispatchEventWith("ThemeLoadError"),this._errorCounter++,this._errorList.push(t),this.onLoadError()},e.prototype.onAssetLoadComplete=function(t){this.dispatchEventWith("AssetLoadComplete"),this._completeCounter++,this.onLoadComplete()},e.prototype.onLoadError=function(){if(this._ignoreLoadError)this._completeCounter++,this.onLoadComplete();else if(this._errorCounter+this._completeCounter===this._loadCounter){var t=this._errorList;this.dispatchEventWith("LoadError",!1,t),this.reset()}},e.prototype.onLoadComplete=function(){if(this._loadCounter===this._completeCounter){var t=this._errorList;this.dispatchEventWith("LoadComplete",!1,t),this.reset()}},Object.defineProperty(e.prototype,"ignoreLoadError",{set:function(t){this._ignoreLoadError=t},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._loadCounter=0,this._completeCounter=0,this._errorCounter=0,this._errorList.length=0},e}(egret.EventDispatcher);__reflect(Loader.prototype,"Loader");var WinCounter=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t){void 0===t&&(t=0),this._counter={init:t,target:t},this._tf.text=GameUtil.formatNumber(t),TweenMax.killDelayedCallsTo(this.init)},e.prototype.update=function(t,e){void 0===e&&(e=1),TweenMax.killDelayedCallsTo(this.init),this.init(),this.loopMethod(t,e)},e.prototype.accumulate=function(t,e){void 0===e&&(e=1),TweenMax.killDelayedCallsTo(this.init);var i=t;this.loopMethod(i,e)},e.prototype.loopMethod=function(t,e){this._tween=new TweenMax(this._counter,e,{init:t,target:t,ease:Linear.easeNone,onUpdate:this.onUpdate,onUpdateScope:this,onComplete:this.onComplete,onCompleteScope:this})},e.prototype.onUpdate=function(){this._tf.text=GameUtil.formatNumber(this._counter.init)},e.prototype.onComplete=function(){this._tween=null,this.dispatchEventWith("updateWinComplete")},e.prototype.collect=function(t){void 0===t&&(t=!0),this._tween&&this._tween.progress(1),t&&TweenMax.delayedCall(.3,this.init,[],this)},e}(NumbersLooper);__reflect(WinCounter.prototype,"WinCounter");var WinPanel=function(){function t(){}return t.prototype.retriveWinCounter=function(){return new WinCounter},t.prototype.init=function(t){this._currentWin=t.getChildByName("currentWin"),this._currentWin.text="",this._winCounter=this.retriveWinCounter(),this._winCounter.register(t.getChildByName("totalWin")),this._winCounter.init(),this._winCounter.addEventListener("updateWinComplete",this.onUpdateWinComplete,this)},t.prototype.onUpdateWinComplete=function(){this.notify("SequenceChannel",103,null,!1)},t.prototype.updateStatus=function(t,e,i){switch(t){case"GameViewChannel":1===e&&this._winCounter.init();break;case"SpinChannel":1===e&&this.onSpinStart();break;case"SequenceChannel":switch(e){case 101:this.onUpdateWin();break;case 102:this.onAccumulateWin()}}},t.prototype.onSpinStart=function(){!this.isAccumulate()&&ResultData.CurrentWin>0&&this._winCounter.collect(!1),this._currentWin.text=""},t.prototype.onUpdateWin=function(){var t=ResultData.CurrentWin;this._winCounter.update(t)},t.prototype.onAccumulateWin=function(){var t=ResultData.CurrentWin;this._currentWin.text="+ "+GameUtil.formatNumber(t);var e=ResultData.TotalWin+=t;this._winCounter.accumulate(e)},t.prototype.isAccumulate=function(){return 1===GameData.CurrentGameMode?!0:GameData.FreeSpins>0},t.prototype.notify=function(t,e,i,o){EventManager.notify(t,e,i,o)},t.prototype.destroy=function(){this._winCounter.removeEventListener("updateWinComplete",this.onUpdateWinComplete,this),this._winCounter.destroy()},t}();__reflect(WinPanel.prototype,"WinPanel",["IEventListener"]);var PortraitPaytable=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this),ApplicationData.isPc?this.initScrollMethod():this.initDragMethod(),ApplicationData.isPc?this._scroll.deactivate():this._drag.deactivate();var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawRect(0,0,ApplicationData.defaultWidth,ApplicationData.defaultHeight),e.graphics.endFill(),this._eui.PaytableContainer.addChild(e),this._eui.Contents.mask=e,this.initContents()},e.prototype.retrieveDragger=function(){return new PaytableDragger},e.prototype.initDragMethod=function(){this._drag=this.retrieveDragger(),this._drag.init(this._eui.Contents,0,0,0,ApplicationData.defaultHeight-50)},e.prototype.retrieveScroller=function(){return new PaytableScroller},e.prototype.initScrollMethod=function(){this._scroll=this.retrieveScroller(),this._scroll.init(this._eui.Contents,0,ApplicationData.defaultHeight-50)},e.prototype.initContents=function(){var t,e=this,i=RES.getRes(GameData.Language+".contents_json").Pay,o=function(o){i[o].forEach(function(t,i){e.parseContents(o,t,i)}),t=o};for(var n in i)o(n)},e.prototype.parseContents=function(t,e,i){var o=this._eui[t].getChildByName("content"+i),n=o.getChildByName("text");n.textFlow=(new egret.HtmlTextParser).parse(e)},e.prototype.showCustomMethod=function(){this.visible=!0;var t=this._eui.PaytableContainer;TweenMax.to(t,.5,{y:0,onComplete:this.onShowComplete,onCompleteScope:this}),TweenMax.fromTo(this._backdrop,.5,{alpha:0},{alpha:1})},e.prototype.onShowComplete=function(){this._isActive=!0,ApplicationData.isPc?this._scroll.activate():this._drag.activate()},e.prototype.hideCustomMethod=function(){var t=this._eui.PaytableContainer;TweenMax.to(t,.5,{y:this.height,onComplete:this.onHideComplete,onCompleteScope:this}),TweenMax.to(this._backdrop,.25,{alpha:0})},e.prototype.onHideComplete=function(){ApplicationData.isPc?this._scroll.deactivate():this._drag.deactivate(),this._isActive=this.visible=!1,this.dispatchHideComplete()},e.prototype.destroyCustomMethod=function(){ApplicationData.isPc?this._scroll.destroy():this._drag.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(Paytable);__reflect(PortraitPaytable.prototype,"PortraitPaytable");var Arc=function(t){function e(){var e=t.call(this)||this;return e._lineStyle=[],e._drawArc=[],e}return __extends(e,t),e.prototype.style=function(t,e,i,o,n,r,s,a,h){this._lineStyle=[t,e,i,o,n,r,s,a,h]},e.prototype.draw=function(t,e,i,o,n,r){void 0===o&&(o=0),void 0===n&&(n=0),this._drawArc=[t,e,i,o,n,r],this.update(n)},e.prototype.update=function(t){var e=this._lineStyle,i=this._drawArc;this.graphics.clear(),this.graphics.lineStyle(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]),this.graphics.drawArc(i[0],i[1],i[2],i[3],t*Math.PI/180,i[5]),this.graphics.endFill()},e}(egret.Shape);__reflect(Arc.prototype,"Arc");var EuiViewData={skins:[]},PaytableScroller=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._target=t,this._wlock=e,this._hlock=i},e.prototype.activate=function(){this._active||(this._active=!0,ApplicationData.stage.addEventListener("MosueWheel",this.onWheelScroll,this))},e.prototype.deactivate=function(){this._active=!1,ApplicationData.stage.removeEventListener("MosueWheel",this.onWheelScroll,this);var t=this._target;t.y=120},e.prototype.scrollUp=function(t){var e=this._target,i=this._hlock,o=i-e.height,n=e.y-t;n>o-.5*i&&o>n?TweenMax.to(e,.5,{y:n,onComplete:this.snapCheck,onCompleteParams:[t],onCompleteScope:this}):this.snapCheck(t)},e.prototype.scrollDown=function(t){var e=this._target,i=this._hlock,o=e.y-t;o>0&&.35*i>o?TweenMax.to(e,.5,{y:o,onComplete:this.snapCheck,onCompleteParams:[t],onCompleteScope:this}):this.snapCheck(t)},e.prototype.snapCheck=function(t){var e=this._target,i=this._hlock;if(t>0){var o=i-e.height,n=e.y-t;TweenMax.to(e,.5,{y:n>o?n:o,onComplete:this.onSnapComplete,onCompleteScope:this})}else if(0>t){var n=e.y-t;TweenMax.to(e,.5,{y:0>n?n:120,onComplete:this.onSnapComplete,onCompleteScope:this})}},e.prototype.onSnapComplete=function(){this.dispatchEventWith("snapped")},e.prototype.destroy=function(){this.deactivate(),t.prototype.destroy.call(this)},e}(Scroller);__reflect(PaytableScroller.prototype,"PaytableScroller",["IPaytableScroller","IScroller"]);var EVGameApplication=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createScene=function(){var t=this.retrieveGame();t.once("GameReady",this.onGameReady,this),this.addChildAt(t,0),t.load()},e.prototype.onGameReady=function(t){t.currentTarget.init(),this.destroyPreloaderView()},e}(GameApplication);__reflect(EVGameApplication.prototype,"EVGameApplication");var AlertSymbolHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.generateAlertSymbolsMethod=function(){this._alertsInReels.length=0;for(var t=0,e=this._symbolPriorities;t<e.length;t++){var i=e[t],o=this._symbolRules.get(i);o.counter=0;for(var n=0;n<this._resultIds.length;n++){var r=this._resultIds[n];if(1===o.inReel[n]){var s=-1!==r.indexOf(i);if(o.continuous&&!s)break;s&&this.verifyConditions(i,n)}}o.counter=0}},e.prototype.verifyConditions=function(t,e){var i=this.getRemainingPosibilitiesCount(t,e);if(0!==i){var o=this._symbolRules.get(t),n=o.minimumCount;o.counter+i>=n&&(void 0===this._alertsInReels[e]&&(this._alertsInReels[e]=[]),this._alertsInReels[e].push(t),ResultData.TriggerSymbolsMap.get(t)&&ResultData.TriggerSymbolsMap.get(t)[e].push(t)),o.counter++}},e.prototype.getRemainingPosibilitiesCount=function(t,e){var i=GameData.TotalReels,o=this._symbolRules.get(t),n=0;if(o.minimumCount<=1)return 1;for(var r=e;i>r;r++)o.inReel[r]>0&&n++;return n},e.prototype.destroyCustomMethod=function(){},e}(AlertSymbolHandlerPrototype);__reflect(AlertSymbolHandler.prototype,"AlertSymbolHandler");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,o){function n(t){e.call(o,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(o))}var s=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(o,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(o,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var a=t.split("/");a.pop();var h=a.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(o,generateJSON.paths[t])},this):RES.getResByUrl(h,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){e.call(o,generateJSON.paths[t])},s)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(o,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var SpinningClimaxHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.generateClimaxDurations=function(){for(var t=GameData.TotalReels,e="SFX_ReelSpinning-Climax",i=0;t-1>i;i++){if(!Sound.SoundManager.getSoundById(e+"_"+i)){Sound.SoundManager.getSoundById(e)&&this._durations.push(Sound.SoundManager.getSoundLength(e));break}this._durations.push(Sound.SoundManager.getSoundLength(e))}},e.prototype.generateClimaxReelsMethod=function(){this._climaxOnReels.length=0;for(var t=0,e=this._symbolPriorities;t<e.length;t++){var i=e[t],o=this._symbolRules.get(i);if(o.counter=0,o.triggerClimax)for(var n=0;n<this._resultIds.length;n++)this.verifyConditions(i,n);o.counter=0}},e.prototype.verifyConditions=function(t,e){var i=this._symbolRules.get(t);if(1==i.inReel[e]){var o=i.minimumCount;i.counter>=o-1&&(this._climaxOnReels[e]=1);var n=this._resultIds[e];-1!==n.indexOf(t)&&i.counter++}},e.prototype.destroyCustomMethod=function(){},e}(SpinningClimaxHandlerPrototype);__reflect(SpinningClimaxHandler.prototype,"SpinningClimaxHandler");var ThemeLoader=function(){function t(){this._retryCounter=3}return t.prototype.getTheme=function(t,e,i,o){this._src=t,this._completeFunc=e,this._errorFunc=i,this._scope=o,this._retryCounter=3,RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onResourceLoadError,null),RES.getResByUrl(t,this.onResouceLoadComplete,this,RES.ResourceItem.TYPE_TEXT)},t.prototype.onResouceLoadComplete=function(t){this._completeFunc.call(this._scope,t)},t.prototype.onResourceLoadError=function(t){this._retryCounter>0?(RES.getResByUrl(this._src,this.onResouceLoadComplete,this,RES.ResourceItem.TYPE_TEXT),this._retryCounter--):t.resItem.url===this._src&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onResourceLoadError,null),this._errorFunc.call(this._scope))},t}();__reflect(ThemeLoader.prototype,"ThemeLoader",["eui.IThemeAdapter"]);var Main=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initMobile=function(){t.prototype.initMobile.call(this),this.stage.orientation=egret.OrientationMode.PORTRAIT},e.prototype.retrieveGame=function(){return new CustomSlotGame},e}(SlotApplication);__reflect(Main.prototype,"Main");var PopupManager;!function(t){function e(t,e){r.set(e,t)}function i(t){t?r["delete"](t):r.clear()}function o(t,e){void 0===e&&(e=!1);for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(!e){var n=void 0;for(n in r)r.get(n).hide()}(s=r.get(t)).show.apply(s,i);var s}function n(t){r.get(t).hide()}var r=new Map;t.register=e,t.unregister=i,t.show=o,t.hide=n}(PopupManager||(PopupManager={}));var PopupPrototype=function(t){function e(){var e=t.call(this)||this;return e.create(),e}return __extends(e,t),e.prototype.create=function(){this._backdrop=this.retrieveBackDrop(),this.addChild(this._backdrop),this.createCustomMethod()},e.prototype.retrieveBackDrop=function(){var t=new egret.Sprite;return t.graphics.beginFill(0,.4),t.graphics.drawRect(0,0,ApplicationData.defaultWidth,ApplicationData.defaultHeight),t.graphics.endFill(),t},e.prototype.onBackdropTouchBegin=function(t){},e.prototype.init=function(){this.initCustomMethod(),this._backdrop.addEventListener(egret.TouchEvent.TOUCH_END,this.onBackdropTouchBegin,this),this._backdrop.touchEnabled=!0},e.prototype.show=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.showCustomMethod.apply(this,t)},e.prototype.hide=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.hideCustomMethod()},e.prototype.destroy=function(){this._backdrop.removeEventListener(egret.TouchEvent.TOUCH_END,this.onBackdropTouchBegin,this),this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(PopupPrototype.prototype,"PopupPrototype",["IPopup"]);var ColorMatrix;!function(t){function e(){return[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]}function i(t){return void 0===t&&(t=100),[1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0]}function o(t,e){return void 0===t&&(t=.5),void 0===e&&(e=-3.25),[t,0,0,0,e,0,t,0,0,e,0,0,t,0,e,0,0,0,1,0]}t.greyscale=e,t.brighten=i,t.darken=o}(ColorMatrix||(ColorMatrix={}));var Sound;!function(t){var e=function(t){function e(e,i,o,n){var r=t.call(this,e)||this;return r._scaleVolume=1,r._id=i,r._group=o,r._category=n,r}return __extends(e,t),e.prototype.tweenVolumeScales=function(t,e,i){TweenMax.killTweensOf(this._counter),this._counter={init:-1===t?this._scaleVolume:t},this._tween=TweenMax.to(this._counter,i,{init:e,onUpdate:this.onUpdate,onUpdateScope:this})},e.prototype.play=function(e){return this._isPaused=!1,t.prototype.play.call(this,e)},e.prototype.pause=function(e){return this._isPaused=!0,this._seek=this.seek(),t.prototype.pause.call(this,e)},e.prototype.resume=function(){this.play()},e.prototype.onUpdate=function(){this._scaleVolume=this._counter.init},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return this._group},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this._category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loops",{get:function(){return this._loops},set:function(t){this._loops=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleVolume",{get:function(){return this._scaleVolume},set:function(t){this._tween&&this._tween.kill(),this._scaleVolume=t},enumerable:!0,configurable:!0}),e.prototype.isPaused=function(){return this._isPaused},e}(Howl);t.SoundObject=e,__reflect(e.prototype,"Sound.SoundObject")}(Sound||(Sound={}));var Sound;!function(t){function e(i,o){if(void 0===o&&(o={}),"string"==typeof i){var n=p.get(i);if(void 0!==n&&(o.overlap||!n.playing())){if("unloaded"===n.state())return n.once("load",function(){o.insist&&e(i,o)},this),void n.load();void 0===o.loop?0:o.loop,0!==o.loop&&(o.loop===!0||-1===o.loop?n.loop(!0):n.loops=o.loop),n.once("end",function(){n.loops>0?(o.loop=--n.loops,e(i,o)):l(o)});var r=t.Volume.verify(i,o.volume);n.volume(r),n.seek(o.seek),n.play()}}else for(var s=0,a=i;s<a.length;s++){var h=a[s];e(h,o)}}function i(t){if("string"==typeof t){var e=p.get(t);void 0!==e&&e.playing()&&e.stop()}else for(var o=0,n=t;o<n.length;o++){var r=n[o];i(r)}}function o(t,e,i){void 0===e&&(e=1),void 0===i&&(i={}),r(t,-1,1,e,i)}function n(t,e,i){void 0===e&&(e=1),void 0===i&&(i={}),r(t,-1,0,e,i)}function r(i,o,n,s,a){if(void 0===s&&(s=1),void 0===a&&(a={}),"string"==typeof i){var h=p.get(i);if(void 0!==h){if("unloaded"===h.state())return h.once("load",function(){a.insist&&r(i,o,n,s,a)},this),void h.load();var u=t.Volume.verify(i,o),c=t.Volume.verify(i,n),d=1e3*s;c>0&&!h.playing()&&e(i,a),h.once("fade",function(){a.stop&&h.stop(),l(a)}),h.seek(a.seek),h.fade(u,c,d)}}else for(var _=0,y=i;_<y.length;_++){var m=y[_];r(m,o,n,s,a)}}function s(t){if(void 0===t)return void p.forEach(function(t){return t.playing()&&t.pause()});if("string"==typeof t){var e=p.get(t);e.pause()}else for(var i=0,o=t;i<o.length;i++){var n=o[i];s(n)}}function a(t){if(void 0===t)return void p.forEach(function(t){t.isPaused()&&t.resume()});if("string"==typeof t){var e=p.get(t);e.resume()}else for(var i=0,o=t;i<o.length;i++){var n=o[i];a(n)}}function h(e,i){if(i){if("string"!=typeof i){for(var o=0,n=i;o<n.length;o++){var r=n[o];h(e,r)}return}for(var s=i.toLowerCase(),a=t.SoundManager.getCategoryList(s),l=0,u=a;l<u.length;l++){var c=u[l],d=p.get(c);d.mute(e)}t.Volume.muteCategory(i,e)}else Howler.mute(e)}function l(t){t.onComplete&&t.onComplete()}var p=t.SoundManager.getSoundDictionary();t.play=e,t.stop=i,t.fadeIn=o,t.fadeOut=n,t.fade=r,t.pause=s,t.resume=a,t.mute=h}(Sound||(Sound={}));var Sound;!function(t){var e=function(){function e(){}return e.verify=function(t,e){var i,o=this._sndObjDict.get(t),n=o.category;switch(n){case"bgm":case"vo":i=this._volumeMap.get(n);break;default:i=this._volumeMap.get("sfx")}var r;return void 0===e?r=i:-1===e?r=o.volume()||0:(r=e,e>i&&(r*=i)),r*=o.scaleVolume},e.get=function(t){var e=this._sndObjDict.get(t),i=e.volume();return"number"!=typeof i&&(i=0),i},e.set=function(t,e){var i=this._sndObjDict.get(t);i.volume(e)},e.getCategory=function(t){var e=t.toLowerCase();return this._volumeMap.get(e)},e.setCategory=function(e,i){var o=e.toLowerCase();this._volumeMap.set(o,i);for(var n=t.SoundManager.getCategoryList(o),r=0,s=n;r<s.length;r++){var a=s[r],h=this._sndObjDict.get(a),l=i<h.scaleVolume?i:h.scaleVolume;h.volume(l)}},e.globalVolume=function(t){return t?void Howler.volume(t):Howler.volume()},e.scale=function(t,e){if("string"==typeof t)this._sndObjDict.get(t).scaleVolume=e;else for(var i=0,o=t;i<o.length;i++){var n=o[i];this.scale(n,e)}},e.muteCategory=function(t,e){this._muteMap.set(t,e)},e.isCategoryMute=function(t){return this._muteMap.get(t)},e._sndObjDict=t.SoundManager.getSoundDictionary(),e._volumeMap=new Map([["sfx",1],["bgm",1],["vo",1]]),e._muteMap=new Map([["sfx",!1],["bgm",!1],["vo",!1]]),e}();t.Volume=e,__reflect(e.prototype,"Sound.Volume")}(Sound||(Sound={}));var Sound;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._loadingQueue=[],i._idleSndGrpList=t.SoundManager.getIdleSoundList(),i._errorSndGrpList=t.SoundManager.getErrorSoundList(),i}return __extends(i,e),i.prototype.loadGroup=function(e){if(-1==this._loadingQueue.indexOf(e)){this._loadingQueue.push(e);for(var i=t.SoundManager.getGroupList(e),o=t.SoundManager.getSoundDictionary(),n=0,r=i;n<r.length;n++){var s=r[n],a=o.get(s);"unloaded"===a.state()?(a.on("load",this.onSoundLoadComplete.bind(this,a.id,a.group)),a.on("loaderror",this.onSoundLoadError.bind(this,a.id,a.group)),a.load()):TweenMax.delayedCall(0,this.onSoundLoadComplete,[a.id,a.group],this)}}},i.prototype.onSoundLoadComplete=function(t,e){var i=this._idleSndGrpList.get(e),o=i.indexOf(t);o>-1&&i.splice(o,1);var n=this._errorSndGrpList.get(e),r=n.indexOf(t);o>-1&&n.splice(r,1),this.soundLoadCompleteHandler(t,e),0===i.length&&this.groupLoadCompleteHandler(e)},i.prototype.onSoundLoadError=function(t,e,i,o){var n=this._idleSndGrpList.get(e),r=n.indexOf(t);r>-1&&n.splice(r,1),this.soundLoadErrorHandler(t,e,o),0===n.length&&this.groupLoadCompleteHandler(e)},i.prototype.soundLoadCompleteHandler=function(t,e){var i={};i.item=t,i.itemGroup=e,this.dispatchEventWith("SoundLoadComplete",!1,i)},i.prototype.soundLoadErrorHandler=function(e,i,o){var n={};n.item=e,n.itemGroup=i,n.message=o,this.dispatchEventWith("SoundLoadError",!1,n),t.SoundManager.getSoundDictionary()["delete"](e)},i.prototype.groupLoadCompleteHandler=function(t){if(this.removeQueue(t),this._loadingQueue.length>0)return void this.loadGroup(this._loadingQueue[0]);var e={};e.itemsFailed=this._errorSndGrpList.get(t),this.dispatchEventWith("GroupLoadComplete",!1,e),this.reset()},i.prototype.removeQueue=function(t){var e=this._loadingQueue,i=e.indexOf(t);-1===i?!1:e.splice(i,1)},i.prototype.reset=function(){this._loadingQueue.length=0},i.prototype.destroy=function(){},i}(egret.EventDispatcher);t.SoundLoader=e,__reflect(e.prototype,"Sound.SoundLoader")}(Sound||(Sound={}));var Timer=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.hour=!1,o.minute=!0,o.seconds=!0,o}return __extends(e,t),e.prototype.getTimeCode=function(){var t=Math.floor(this.currentCount/60),e=this.currentCount%60,i=t%60,o=Math.floor(t/60);e=Math.floor(e);var n;return this.hour&&(n+=this.getTwoDigits(o)+":"),this.minute&&(n+=this.getTwoDigits(i)+":"),this.seconds&&(n+=this.getTwoDigits(e)),n},e.prototype.getTwoDigits=function(t){return 10>t?"0"+t:t+""},e}(egret.Timer);__reflect(Timer.prototype,"Timer");
var GameMathUtil;!function(t){function e(t,e,i,o){var n=t-e,r=i-o;return Math.sqrt(n*n+r*r)}t.distanceBetweenTwoPoints=e}(GameMathUtil||(GameMathUtil={}));var TimeUtil;!function(t){function e(t){var e=Math.floor(t/60),i=t%60,o=e%60,n=Math.floor(e/60);return i=Math.floor(i),this.getTwoDigits(n)+":"+this.getTwoDigits(o)+":"+this.getTwoDigits(i)}t.secondsToTimecode=e}(TimeUtil||(TimeUtil={}));var SymbolManager;!function(t){function e(t){for(var e,i=0,o=t;i<o.length;i++){var n=o[i];p.has(n)||(e=RES.createBitmapByName("s"+n),p.set(n,e.texture))}}function i(t){e(t);for(var i=0,o=t;i<o.length;i++){var n=o[i];void 0===u[n]&&(MovieClipDataManager.parseSpriteSheetData("s"+n),u.push(n))}}function o(t){e(t);for(var i=0,o=t;i<o.length;i++){var n=o[i];void 0===c[n]&&c.push(n)}}function n(t,i,o){e(t),MovieClipDataManager.parseMultipackSpriteSheetData(i,o);for(var n=0,r=t;n<r.length;n++){var s=r[n];void 0===u[s]&&u.push(s)}}function r(t){return p.get(t)}function s(){return u}function a(t){return u.indexOf(t)>-1}function h(){return c}function l(t){return c.indexOf(t)>-1}var p=new Map,u=[],c=[];t.commonSymbols=[],t.generatesBitmapSymbols=e,t.generatesMovieClipSymbols=i,t.generatesDragonBonesSymboles=o,t.generatesMultipackMovieClipSymbols=n,t.getTexture=r,t.getMovieClipSymbolsList=s,t.isMovieClip=a,t.getDragonBonesSymbolsList=h,t.isDragonBones=l}(SymbolManager||(SymbolManager={}));var CustomGameViewController=function(t){function e(){var e=this;return e=t.call(this)||this}return __extends(e,t),e.prototype.resumeGameView=function(t){var e=GameData.CurrentGameMode;this._activeView=GameData.CurrentGameMode=t;var i=this._views.get(t);i.resume(e),0===GameData.CurrentGameMode&&this.registerListener()},e.prototype.goToFreeGameViewHandler=function(){var t=this._views.get(2);t.once("LoadComplete",this.onGameViewReady,this),t.once("HideComplete",this.onEnterViewHidden,this),t.show(),t.loadSoundGroups("free"),t.loadGroups(["free","exit"]);var e=this._views.get(1);t.loadEuiView(e);var i=this._views.get(3);t.loadEuiView(i,!0)},e.prototype.gotoBonusGameViewHandler=function(){var t=this._views.get(5);t.once("LoadComplete",this.onGameViewReady,this),t.once("HideComplete",this.onEnterViewHidden,this),t.show(),t.loadSoundGroups("bonus"),t.loadGroups(["bonus","exit"]);var e=this._views.get(4);t.loadEuiView(e);var i=this._views.get(6);t.loadEuiView(i,!0)},e}(GameViewController);__reflect(CustomGameViewController.prototype,"CustomGameViewController");var CustomSlotGame=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.retrieveGameViewController=function(){return new CustomGameViewController},e.prototype.retrieveGameLoaderView=function(){return new CustomGameLoaderView},e.prototype.retrieveGameInfoPanel=function(){return new CustomGameInfoPanel},e.prototype.retrieveNoticePanel=function(){return new CustomNoticePanel},e.prototype.retrieveCommonPanel=function(){return new CommonPanel},e.prototype.retrieveHisotry=function(){return new CustomHistoryPanel},e.prototype.retrieveSoundPanel=function(){return new CustomSoundPanel},e.prototype.retrieveRecord=function(){return new CustomRecordPanel},e.prototype.retrieveMainPanel=function(){return new CustomMainPanel},e.prototype.retrieveGameView=function(){return new CustomGameView},e.prototype.retrievePaytable=function(){return new CustomPaytable},e.prototype.configuration=function(){BuildData.Custom_Build=49,GameData.SymbolWidth=152,GameData.SymbolHeight=152,GameData.SymbolBmpWidth=152,GameData.SymbolBmpHeight=152,GameData.SymbolMcWidth=260,GameData.SymbolMcHeight=260},e.prototype.load=function(){t.prototype.load.call(this),this._preloadView.loadSoundGroups("custom"),this._preloadView.loadGroups("animations"),this._preloadView.loadGroups("enter"),this._fgEnter=new CustomFreeGameEnterView,this._preloadView.loadEuiView(this._fgEnter),this._bnEnter=new CustomBonusGameEnterView,this._preloadView.loadEuiView(this._bnEnter)},e.prototype.init=function(){t.prototype.init.call(this),this._viewCtrl.register(2,this._fgEnter),this._viewCtrl.initView(2),this._viewCtrl.register(5,this._bnEnter),this._viewCtrl.initView(5)},e.prototype.initCustomMethod=function(){SymbolManager.commonSymbols=[4,5,6,7,8,9,10],SymbolManager.generatesBitmapSymbols([1,2,3,4,5,6,7,8,9,10]),SymbolManager.generatesMultipackMovieClipSymbols([1,2,3,4,5,6],"symbols",2),t.prototype.initCustomMethod.call(this)},e.prototype.onSwitchFreeSpinGameView=function(){var t=new CustomFreeGameExitView;this._viewCtrl.register(3,t),t.visible=!1;var e=new CustomFreeSpinGameView;this._viewCtrl.register(1,e)},e.prototype.onSwitchBonusGameView=function(){var t=new CustomBonusGameExitView;this._viewCtrl.register(6,t),t.visible=!1;var e=new CustomBonusGameView;this._viewCtrl.register(4,e)},e}(SlotGame);__reflect(CustomSlotGame.prototype,"CustomSlotGame");var CustomBonusGameEnterView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.show=function(){this.hide()},e}(BonusGameEnterView);__reflect(CustomBonusGameEnterView.prototype,"CustomBonusGameEnterView");var CustomBonusGameExitView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.retrieveBigWinOverlay=function(){return new CustomBigWinOverlay},e.prototype.initCustomMethod=function(){this._win=this.retrieveBigWinOverlay(),this._win.load(),this._win.init(),this._win.visible=!1,this._eui.addChild(this._win),this.visible=!0,this._total=this._eui.Total,this._total.visible=!1,this._collect=this._eui.BtnCollect,this._collect.visible=!1,this._cont=this._eui.ExitContainer,this._open=this._cont.getChildByName("open"),this._close=this._cont.getChildByName("close"),this._open.visible=!1,this._close.visible=!0,this._light0=this._cont.getChildByName("light0"),this._light1=this._cont.getChildByName("light1"),this._light0.alpha=this._light1.alpha=0,this._label=this._eui.Label,this._label.alpha=0;var t=this._eui.Blings;this._blings=new CustomBlings,this._blings.init(t),t.visible=!1,this._win.once("HideComplete",this.onWinOverlayHidden,this)},e.prototype.showCustomMethod=function(){var t=this,e="BGM_BN";Sound.fadeOut(e,1,{stop:!0}),TweenMax.fromTo(this._eui.Backdrop,.5,{alpha:0},{alpha:1});var i=this._cont.y;TweenMax.fromTo(this._cont,1,{y:i+800},{y:i,ease:Back.easeOut,onComplete:function(e){return t.onPacketInPlace()}}),Sound.play("SFX_BN_appear")},e.prototype.onPacketInPlace=function(){this._collect.visible=!0,this.isBigWin()?this.bigWinCollect():this.instantCollect(),Sound.play("SFX_BN_open"),this._eui.CollectLabel.visible=!1},e.prototype.bigWinCollect=function(){this._win.visible=!0,this._win.show(BonusGameData.TotalWin)},e.prototype.instantCollect=function(){var t=this;TweenMax.fromTo(this._label,1,{y:this._label.y+100},{alpha:1,y:this._label.y}),TweenMax.to(this._light0,1,{alpha:1}),TweenMax.to(this._light1,1,{alpha:1}),TweenMax.to(this._light0,8,{rotation:"360",repeat:-1,ease:Linear.easeNone}),TweenMax.to(this._light1,10,{rotation:"-360",repeat:-1,ease:Linear.easeNone}),this._total.visible=!0,this._total.text=GameUtil.formatNumber(BonusGameData.TotalWin);var e=this._total.scaleX+.1;TweenMax.to(this._total,.3,{scaleX:e,scaleY:e,yoyo:!0,repeat:1}),this._eui.Blings.visible=!0,this._blings.start(),MovieClipDataManager.parseSpriteSheetData("coin_s001");var i=this._eui.ExitContainer;this._coins=new CustomFountain(["coin_s001"],10),this._eui.addChildAt(this._coins,this.getChildIndex(i)),this._coins.init(ApplicationData.defaultWidth,ApplicationData.defaultHeight),this._coins.start(),TweenMax.delayedCall(.5,function(e){return t._coins.stop()}),this._open.visible=!0,this._close.visible=!1,this._eui.setChildIndex(this._collect,this._eui.numChildren),this._collect.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCollectTouch,this),TweenMax.delayedCall(5,this.onCollectTouch,[],this),Sound.play("SFX_BN_loop",{loop:!0})},e.prototype.onCollectTouch=function(){TweenMax.killDelayedCallsTo(this.onCollectTouch),this._collect.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCollectTouch,this),this._collect.visible=!1,this.hide()},e.prototype.hideCustomMethod=function(){Sound.stop("SFX_BN_loop"),this._blings.stop(),TweenMax.killTweensOf(this._light0),TweenMax.killTweensOf(this._light1),this.visible=!1,this.dispatchHideComplete()},e.prototype.destroyCustomMethod=function(){this._blings.destroy(),this._coins&&this._coins.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(BonusGameExitView);__reflect(CustomBonusGameExitView.prototype,"CustomBonusGameExitView");var CustomBonusGameView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){this._timer=new NumbersLooper(this._eui.Timer);for(var t=this._eui.ButtonsContainer,e=0;e<t.numChildren;e++){var i=t.getChildAt(e),o=i.getChildByName("total");o.visible=!1,o.y=280;var n=new DBMovieClip("shizitiaofu","shizitiaofu");i.addChildAt(n,0),n.visible=!1,n.name="animation",n.gotoAndStop(1),n.scaleX=n.scaleY=.85,n.x+=n.width/2,n.x-=40,n.y+=n.height/2,n.y-=75;var r=new DBMovieClip("bonusidle","bonusidle");i.addChildAt(r,0),r.name="idle",r.gotoAndStop(1),r.x+=r.width/2,r.x+=30,r.y+=r.height/2}},e.prototype.startCustomMethod=function(){var t=this;Sound.play("BGM_BN",{loop:!0}),ResultData.TriggerSymbolsMap["delete"](3),this.notify("GameViewChannel",6),TweenMax.fromTo(this._eui,1,{alpha:0},{alpha:1,onComplete:function(e){return t.onShowComplete()}})},e.prototype.onShowComplete=function(){for(var t=this._eui.ButtonsContainer,e=0;e<t.numChildren;e++){var i=t.getChildAt(e),o=i.getChildByName("idle");TweenMax.delayedCall(2*e,this.shake,[o],this);var n=i.getChildByName("click");n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonTouch,this),n.visible=!0,TweenMax.delayedCall(.5*e,this.shake,[o],this)}this._eui.Timer.visible=!0;var r=10;this._timer.init(r),this._timer.update(0,r),TweenMax.delayedCall(r,this.autoSelect,[],this)},e.prototype.autoSelect=function(){this._eui.Timer.visible=!1;var t=this._eui.ButtonsContainer,e=t.getChildAt(RandomUtil.range(0,t.numChildren));this.onButtonTouchHandler(e.getChildByName("click"))},e.prototype.onButtonTouch=function(t){this._eui.Timer.visible=!1,TweenMax.killTweensOf(this.autoSelect),this.onButtonTouchHandler(t.currentTarget)},e.prototype.onButtonTouchHandler=function(t){var e=this;Sound.play("SFX_BN_click"),TweenMax.killTweensOf(this.shake);var i=t.parent;this._clicked.push(i);for(var o=this._eui.ButtonsContainer,n=0;n<o.numChildren;n++){var r=o.getChildAt(n),s=r.getChildByName("click");s.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonTouch,this)}o.setChildIndex(i,o.numChildren),TweenMax.to(i,.5,{scaleX:1.1,scaleY:1.1,ease:Back.easeInOut});var a=i.getChildByName("total");a.text=GameUtil.formatNumber(BonusGameData.TotalWin),a.visible=!0,TweenMax.fromTo(a,.3,{scaleX:0,scaleY:0},{scaleX:a.scaleX+.1,scaleY:a.scaleY+.1,ese:Elastic.easeOut});var h=i.getChildByName("idle");h.stop(),h.visible=!1;var l=i.getChildByName("animation");l.visible=!0,l.once(DBMovieClipEvent.ANIMATION_COMPLETE,function(t){return l.gotoAndPlay("xiao",-1)},this),l.gotoAndPlay("xiao_1"),TweenMax.delayedCall(1,function(t){return e.revealOthers()})},e.prototype.revealOthers=function(){var e=this,i=OneClickBonusGameData.Selections.indexOf(BonusGameData.TotalWin);OneClickBonusGameData.Selections.splice(i,1),ArrayUtil.randomize(OneClickBonusGameData.Selections),t.prototype.revealOthers.call(this),TweenMax.delayedCall(3,function(t){return e.onBonusGameComplete()})},e.prototype.reveal=function(t){var e=t.getChildByName("animation");e.visible=!0,e.once(DBMovieClipEvent.ANIMATION_COMPLETE,function(t){return e.gotoAndPlay("ku",-1)},this),e.gotoAndPlay("ku_1");var i=t.getChildByName("idle");i.stop(),i.visible=!1;var o=t.getChildByName("total");o.text=GameUtil.formatNumber(OneClickBonusGameData.Selections[0]),TweenMax.delayedCall(.5,function(t){return o.visible=!0}),OneClickBonusGameData.Selections.shift(),t.filters=[new egret.ColorMatrixFilter(ColorMatrix.darken())]},e.prototype.shake=function(t){Sound.play("SFX_BN_shake"),t.gotoAndPlay(1),TweenMax.delayedCall(12,this.shake,[t],this)},e.prototype.destroyCustomMethod=function(){this._timer.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(OneClickBonusGame);__reflect(CustomBonusGameView.prototype,"CustomBonusGameView");var CustomData={Character:null,Source:[]},AddFreeSpin=function(){function t(t){this._eui=t,this._img0=RES.createBitmapByName("trailer_glow_bg"),this._img1=RES.createBitmapByName("trailer_glow_bg"),this._img2=RES.createBitmapByName("trailer_glow_bg"),DisplayObjectUtil.setAnchor(this._img0,.5,.5),DisplayObjectUtil.setAnchor(this._img1,.5,.5),DisplayObjectUtil.setAnchor(this._img2,.5,.5),this._eui.addChild(this._img0),this._eui.addChild(this._img1),this._eui.addChild(this._img2),this._img0.alpha=0,this._img1.alpha=0,this._img2.alpha=0}return t.prototype.start=function(){for(var t=0;t<CustomData.Source.length;t++){var e=CustomData.Source[t],i=e.localToGlobal(),o=this["_img"+t];o.alpha=1,o.visible=!0,TweenMax.fromTo(o,.3,{alpha:.8,x:i.x,y:i.y,scaleX:2,scaleY:2},{alpha:1,scaleX:2.5,scaleY:2.5,yoyo:!0,repeat:-1}),TweenMax.to(o,3,{rotation:"360",repeat:-1,ease:Linear.easeNone}),TweenMax.to(o,1,{delay:2,x:ApplicationData.defaultWidth/2,y:ApplicationData.defaultHeight-100})}CustomData.Source.length=0,TweenMax.delayedCall(4,this.stop,[],this)},t.prototype.stop=function(){TweenMax.killTweensOf(this._img0),TweenMax.killTweensOf(this._img1),TweenMax.killTweensOf(this._img2),TweenMax.to(this._img0,.5,{alpha:0}),TweenMax.to(this._img1,.5,{alpha:0}),TweenMax.to(this._img2,.5,{alpha:0})},t}();__reflect(AddFreeSpin.prototype,"AddFreeSpin");var CustomBlings=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.start=function(){this._isStop=!1;for(var t=0;t<this._grp.numChildren;t++){var e=this._grp.getChildAt(t),i=RandomUtil.range(0,2,2),o=.3,n=RandomUtil.range(.8,1,2),r=RandomUtil.range(1.1,1.5,2);e.scaleX=e.scaleY=n,e.rotation=RandomUtil.range(0,360);var s=RandomUtil.range(1,1.5,2);TweenMax.to(e,s,{rotation:"360",repeat:-1,ease:Linear.easeNone}),TweenMax.delayedCall(i,this.alphaAnimation,[e],this),TweenMax.delayedCall(i,this.bling,[e,o,n,r],this)}},e.prototype.alphaAnimation=function(t){t.x=RandomUtil.range(-50,390),t.y=RandomUtil.range(-80,50),TweenMax.fromTo(t,1,{alpha:0},{alpha:1,yoyo:!0,repeat:1,onComplete:this.alphaAnimation,onCompleteParams:[t],onCompleteScope:this})},e}(RotationBlings);__reflect(CustomBlings.prototype,"CustomBlings");var CustomFreeGameEnterView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this),this._oriY=this._eui.EnterContainer.y},e.prototype.showCustomMethod=function(){this._timer=new NumbersLooper(this._eui.Timer),this._eui.Info.visible=!1},e.prototype.onLoadComplete=function(){var t=this;this.dispatchEventWith("LoadComplete"),TweenMax.delayedCall(1,function(e){return t.showScrollAnimation()})},e.prototype.showScrollAnimation=function(){var t=this;this._scroll=this.getDBMovieClip(),this._scroll.once(DBMovieClipEvent.ANIMATION_COMPLETE,this.onAnimationComplete,this),this.visible=!0;var e=this._eui.EnterContainer;TweenMax.fromTo(e,.5,{y:this._oriY,scaleX:1.5,scaleY:1.5},{scaleX:1,scaleY:1,ease:Back.easeOut,onComplete:function(e){return t.openScroll()}}),Sound.play("SFX_FS_freespin_2")},e.prototype.openScroll=function(){Sound.play("SFX_FS_freespin_3"),this._scroll.play()},e.prototype.getDBMovieClip=function(){var t;if(this._scroll)t=this._scroll;else{var e=this._eui.EnterContainer;t=new DBMovieClip("juanzhou_5","juanzhou_5",150),e.addChild(t),t.x=t.width/2,t.x-=10,t.y=t.height/2}return t.gotoAndStop(1),t},e.prototype.onAnimationComplete=function(){this._eui.Info.visible=!0;var t=10;this._timer.init(t),this._timer.update(0,t),TweenMax.delayedCall(t,this.onCollectTouch,[],this),this._eui.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCollectTouch,this)},e.prototype.onCollectTouch=function(){this._eui.Info.visible=!1,TweenMax.killTweensOf(this.onCollectTouch),this._eui.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCollectTouch,this),this.hide()},e.prototype.hideCustomMethod=function(){var e=this._eui.EnterContainer;TweenMax.to(e,1,{delay:.5,y:-ApplicationData.defaultHeight,ease:Back.easeIn,onComplete:t.prototype.hideCustomMethod,onCompleteScope:this}),TweenMax.delayedCall(.5,function(t){return Sound.play("SFX_FS_freespin_4")})},e.prototype.destroyCustomMethod=function(){this._scroll.destroy(),this._timer.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(FreeGameEnterView);__reflect(CustomFreeGameEnterView.prototype,"CustomFreeGameEnterView");var CustomFreeGameExitView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.retrieveBigWinOverlay=function(){return new CustomBigWinOverlay},e.prototype.initCustomMethod=function(){this._win=this.retrieveBigWinOverlay(),this._win.load(),this._win.init(),this._win.visible=!1,this._eui.addChild(this._win),this.visible=!0,this._total=this._eui.Total,this._total.visible=!1,this._collect=this._eui.BtnCollect,this._collect.visible=!1,this._cont=this._eui.ExitContainer,this._open=this._cont.getChildByName("open"),this._close=this._cont.getChildByName("close"),this._open.visible=!1,this._close.visible=!0,this._light0=this._cont.getChildByName("light0"),this._light1=this._cont.getChildByName("light1"),this._light0.alpha=this._light1.alpha=0,this._label=this._eui.Label,this._label.alpha=0;var t=this._eui.Blings;this._blings=new CustomBlings,this._blings.init(t),t.visible=!1,this._win.once("HideComplete",this.onWinOverlayHidden,this)},e.prototype.showCustomMethod=function(){var t=this,e="BGM_FG";Sound.fadeOut(e,1,{stop:!0}),TweenMax.fromTo(this._eui.Backdrop,.5,{alpha:0},{alpha:1});var i=this._cont.y;TweenMax.fromTo(this._cont,1,{y:i+800},{y:i,ease:Back.easeOut,onComplete:function(e){return t.onPacketInPlace()}}),Sound.play("SFX_Exit_appear")},e.prototype.onPacketInPlace=function(){this._collect.visible=!0,this.isBigWin()?this.bigWinCollect():this.instantCollect(),Sound.play("SFX_Exit_open"),this._eui.CollectLabel.visible=!1},e.prototype.bigWinCollect=function(){this._win.visible=!0,this._win.show(FreeGameData.TotalWin)},e.prototype.instantCollect=function(){var t=this;TweenMax.fromTo(this._label,1,{y:this._label.y+100},{alpha:1,y:this._label.y}),TweenMax.to(this._light0,1,{alpha:1}),TweenMax.to(this._light1,1,{alpha:1}),TweenMax.to(this._light0,8,{rotation:"360",repeat:-1,ease:Linear.easeNone}),TweenMax.to(this._light1,10,{rotation:"-360",repeat:-1,ease:Linear.easeNone}),this._total.visible=!0,this._total.text=GameUtil.formatNumber(FreeGameData.TotalWin);var e=this._total.scaleX+.1;TweenMax.to(this._total,.3,{scaleX:e,scaleY:e,yoyo:!0,repeat:1}),this._eui.Blings.visible=!0,this._blings.start(),MovieClipDataManager.parseSpriteSheetData("coin_s001");var i=this._eui.ExitContainer;this._coins=new CustomFountain(["coin_s001"],10),this._eui.addChildAt(this._coins,this.getChildIndex(i)),this._coins.init(ApplicationData.defaultWidth,ApplicationData.defaultHeight),this._coins.start(),TweenMax.delayedCall(.5,function(e){return t._coins.stop()}),this._open.visible=!0,this._close.visible=!1,this._eui.setChildIndex(this._collect,this._eui.numChildren),this._collect.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCollectTouch,this),TweenMax.delayedCall(5,this.onCollectTouch,[],this),Sound.play("SFX_Exit_loop",{loop:!0})},e.prototype.onCollectTouch=function(){TweenMax.killDelayedCallsTo(this.onCollectTouch),this._collect.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCollectTouch,this),this._collect.visible=!1,this.hide()},e.prototype.hideCustomMethod=function(){Sound.stop("SFX_Exit_loop"),this._blings.stop(),TweenMax.killTweensOf(this._light0),TweenMax.killTweensOf(this._light1),this.visible=!1,this.dispatchHideComplete()},e.prototype.destroyCustomMethod=function(){this._blings.destroy(),this._coins&&this._coins.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(FreeGameExitView);__reflect(CustomFreeGameExitView.prototype,"CustomFreeGameExitView");var CustomFreeGameSymbol=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.triggerMethod=function(){t.prototype.triggerMethod.call(this),CustomData.Source.push(this)},e}(CustomSlotSymbol);__reflect(CustomFreeGameSymbol.prototype,"CustomFreeGameSymbol");var CustomFreeGameViewStage=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this._add=new AddFreeSpin(e)},e.prototype.initCharacter=function(){var t=this._eui.StageContainer;this.character=CustomData.Character;var e=t.getChildIndex(t.getChildByName("drum0"));t.addChildAt(this.character,e-1),this.character.gotoAndPlay("idle",-1)},e.prototype.initFireworks=function(){for(var t=this._eui.StageContainer,e=0;30>e;e++){var i=new MovieClip("fireworks",18),o=RandomUtil["boolean"]()?0:2;t.addChildAt(i,o),this.fireworks.push(i);var n=[16764299,65419,9169919,16681983];ColorUtil.tint(i,ArrayUtil.randomChildOf(n)),i.x=RandomUtil.range(0,t.width),i.y=RandomUtil.range(0,200,1),i.scaleX=i.scaleY=RandomUtil.range(1,1.5,2),TweenMax.delayedCall(RandomUtil.range(0,4,2),this.randomPlayFireWork,[i],this)}},e.prototype.randomPlayFireWork=function(t){RandomUtil["boolean"]()&&RandomUtil["boolean"]()?(t.gotoAndPlay(1),TweenMax.delayedCall(RandomUtil.range(4,8,2),this.randomPlayFireWork,[t],this)):TweenMax.delayedCall(RandomUtil.range(0,5,2),this.randomPlayFireWork,[t],this)},e.prototype.onTrigger=function(){var t=this;"idle"===this.character.currentClip.name&&(this.character.once(DBMovieClipEvent.ANIMATION_COMPLETE,function(e){return t.character.gotoAndPlay("idle",-1)},this),this.character.gotoAndPlay("skill2"),this.firework1.visible=this.firework2.visible=!0,this.firework1.play(-1),this.firework2.play(-1),Sound.play("SFX_firework_flare",{loop:!0}),TweenMax.delayedCall(1,function(t){return Sound.fadeOut("SFX_firework_flare",3,{stop:!0})})),TweenMax.delayedCall(3,this.stopFireWork,[],this),this._add.start(),TweenMax.delayedCall(4.5,this._add.stop,[],this._add)},e.prototype.stopFireWork=function(){this.firework1.stop(),this.firework2.stop(),this.firework1.visible=this.firework2.visible=!1},e.prototype.destroy=function(){for(var t=0,e=this.fireworks;t<e.length;t++){var i=e[t];i.destroy()}},e}(CustomGameViewStage);__reflect(CustomFreeGameViewStage.prototype,"CustomFreeGameViewStage");var CustomFreeSpinGameView=function(t){function e(){var e=t.call(this)||this;return e._stage=new CustomFreeGameViewStage,e._winInd=new CustomWinIndicator,e}return __extends(e,t),e.prototype.retrieveResultDataHandler=function(){return new CustomFreeGameResultDataHandler},e.prototype.retrieveSequenceController=function(){return new CustomFreeGameSequence},e.prototype.retrieveSpinController=function(){return new CustomFreeSpinController},e.prototype.retrieveSoundController=function(){return new CustomSoundController},e.prototype.retrieveSpinningClimax=function(){return new CustomSpinningClimax},e.prototype.retrieveSpinningReel=function(){return new CustomSpinningReel},e.prototype.retrieveSpinPanel=function(){return new CustomFreeGameSpinPanel},e.prototype.retrieveResultReel=function(){return new CustomResultReel},e.prototype.retrieveSymbol=function(){return new CustomFreeGameSymbol},e.prototype.retrievePayLineController=function(){return new CustomPayLineController},e.prototype.retrievePayLine=function(){return new CustomPayLine},e.prototype.viewConfigurations=function(){t.prototype.viewConfigurations.call(this)},e.prototype.initCustomMethod=function(e,i){t.prototype.initCustomMethod.call(this,e,i);var o=this._eui.WinIndicator;this._winInd.init(o),this._spinningClimax.init(),this._eui.ToastContainer.getChildByName("message").visible=!1,this._stage.init(this._eui);var n=this._eui.ReelsContainer;n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onContainerTouch,this)},e.prototype.initInactiveGroup=function(){t.prototype.initInactiveGroup.call(this);var e=this._eui.InactiveReelsContainer;e.filters=[new egret.ColorMatrixFilter(ColorMatrix.darken())]},e.prototype.startCustomMethod=function(){TweenMax.delayedCall(.5,t.prototype.startCustomMethod,[],this)},e.prototype.registerListeners=function(){t.prototype.registerListeners.call(this),EventManager.register("CustomChannel",this._panel),EventManager.register("SequenceChannel",this._stage),EventManager.register("SpinChannel",this._stage)},e.prototype.unregisterListeners=function(){t.prototype.unregisterListeners.call(this),EventManager.unregisterChannel("CustomChannel")},e.prototype.onContainerTouch=function(){102===this._panel.status&&this._panel.updateStatus("CustomChannel","reelsContainerTouch")},e.prototype.updateStatus=function(e,i,o){t.prototype.updateStatus.call(this,e,i,o),"SequenceChannel"===e&&4===i&&this._winInd.show(ResultData.CurrentWin,1)},e.prototype.destroyCustomMethod=function(){var e=this._eui.ReelsContainer;e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onContainerTouch,this),this._stage.destroy(),this._winInd.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(LineWinFreeSpinGameView);__reflect(CustomFreeSpinGameView.prototype,"CustomFreeSpinGameView");var CustomFreeGameResultDataHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(FreeGameResultDataHandler);__reflect(CustomFreeGameResultDataHandler.prototype,"CustomFreeGameResultDataHandler");var CustomFreeSpinController=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initSpinningSymbolRules=function(){var t,e=this._symbolRules;t={inReel:[0,1,1,1,1],minimumCount:1,trigger:!1,triggerClimax:!1,hasAnimation:!1,hasSound:!1,continuous:!1},e.set(1,t),t={inReel:[0,1,1,1,0],minimumCount:1,trigger:!0,triggerClimax:!1,hasAnimation:!0,hasSound:!0,continuous:!1},e.set(2,t),this._symbolPriorities=[2,1]},e}(CustomSpinController);__reflect(CustomFreeSpinController.prototype,"CustomFreeSpinController");var CustomFreeGameSequence=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.noWinHandler=function(){t.prototype.noWinHandler.call(this),this.onSpinReady(),this.onBetReady()},e.prototype.showAllWinSymbols=function(){t.prototype.showAllWinSymbols.call(this),this.onSpinReady(),this.onBetReady()},e.prototype.onSpinReady=function(){},e}(FreeGameWinSequence);__reflect(CustomFreeGameSequence.prototype,"CustomFreeGameSequence");var CustomPayLineIndicator=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.create=function(){var t=this.retrieveBase();this.addChild(t),this._activeBase=this.retrieveActiveBase(),this.addChild(this._activeBase),this._activeBase.visible=!1;var e=GameData.TotalReels,i=GameData.TotalRows,o=5,n=this.width/e;n-=o,n-=o/e;var r=this.height/i;r-=o,r-=o/i;for(var s=0;e>s;s++)for(var a=void 0,h=0;i>h;h++)if(a=this.retrieveDefault(n,r),this.addChild(a),a.x=(n+o)*s,a.x+=o,a.y=(r+o)*h,a.y+=o,this._positions[s]===h){var l=this.retrieveWinDisplayObject(n,r,this._color);this.addChild(l),l.x=(n+o)*s,l.x+=o,l.y=(r+o)*h,l.y+=o,this._points.push(l)}},e.prototype.retrieveBase=function(){var t=5,e=new egret.Shape;return e.graphics.beginFill(0,.5),e.graphics.drawRect(-t/2,-t/2,this.width+t,this.height+t),e},e.prototype.show=function(t,e){this.alpha=1},e}(PayLineIndicator);__reflect(CustomPayLineIndicator.prototype,"CustomPayLineIndicator");var CustomGameLoaderView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.retrievePreloader=function(){return new CustomPreloader},e.prototype.create=function(){document.getElementById("loaddiv").style.animationPlayState="paused",document.getElementById("loaddiv").style.visibility="hidden";var e=RES.createBitmapByName("bg_preload_jpg");this.addChild(e),MovieClipDataManager.parseSpriteSheetData("preload-animations"),this._kid=new MovieClip("preload-animations"),this.addChild(this._kid),this._kid.x=274,this._kid.x-=15,this._kid.y=813,this._kid.setWidth(187),this._kid.setHeight(245),this._kid.play(-1),t.prototype.create.call(this);RES.createBitmapByName("preloader-frame_png");this._preload.x=96,this._preload.y=1168,this._message=new egret.TextField,this.addChild(this._message),this._message.y=this._preload.y-50,this._message.width=ApplicationData.defaultWidth,this._message.textAlign="center",this.showMessage(RES.getRes("zh-cn.preload_json").Preload.slice(0))},e.prototype.showMessage=function(t){this._message.textFlow=(new egret.HtmlTextParser).parse(t[0]),t.push(t.shift()),TweenMax.fromTo(this._message,1,{alpha:0},{alpha:1,yoyo:!0,repeat:1,repeatDelay:2,onComplete:this.showMessage,onCompleteParams:[t],onCompleteScope:this})},e.prototype.onSoundResourceError=function(e){this._loadedItems++,t.prototype.onSoundResourceError.call(this,e)},e.prototype.onResourceLoadComplete=function(){var e=this;this.isLoaded()?TweenMax.delayedCall(.1,function(i){return t.prototype.onResourceLoadComplete.call(e)}):t.prototype.onResourceLoadComplete.call(this)},e.prototype.destroy=function(){TweenMax.killTweensOf(this._message),this._kid.destroy(),t.prototype.destroy.call(this)},e}(GameLoaderView);__reflect(CustomGameLoaderView.prototype,"CustomGameLoaderView");var CustomPreloader=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.create=function(){var t=RES.createBitmapByName("preloader-bg_png");this.addChild(t),this.progress=new CustomProgressBar,this.addChild(this.progress),this.progress.init();var e=RES.createBitmapByName("preloader-masker_png");e.scale9Grid=new egret.Rectangle(10,0,10,0),this.addChild(e);var i=RES.createBitmapByName("preloader-frame_png");this.addChild(i),this.progress.mask=this._masker=e,this._masker.scaleX=0,this._light=new MovieClip("preload-light"),this.addChild(this._light),this._light.anchorOffsetX=110,this._light.anchorOffsetY=80,this._light.scaleX=this._light.scaleY=1.5,this._light.x=25,this._light.y=25,this._light.play(-1)},e.prototype.updateProgress=function(t,e){var i=t/e;this._masker.scaleX=i,this.progress.updateProgress(t,e),this._light.x=this._masker.width*i},e.prototype.destroy=function(){this._light.destroy(),this.progress.destroy()},e}(Preloader);__reflect(CustomPreloader.prototype,"CustomPreloader");var CustomProgressBar=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.create=function(){this._bar=RES.createBitmapByName("preloader-bar_png"),this.addChild(this._bar)},e.prototype.init=function(){},e.prototype.updateProgress=function(t,e){},e.prototype.destroy=function(){this.removeChildren()},e}(ProgressBar);__reflect(CustomProgressBar.prototype,"CustomProgressBar");var CustomFountain=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){this._speed=1,this._gravity=.6,this._src.x=this.width/2,this._src.y=472},e}(ParticleSystem.Fountain);__reflect(CustomFountain.prototype,"CustomFountain");var CustomToaster=function(t){function e(){var e=t.call(this)||this;return e._isWinCounting=!1,e}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this._totalWin=e.WinContainer.getChildByName("totalWin"),this._totalWin.visible=!1},e.prototype.updateStatus=function(e,i,o){switch(e){case"SequenceChannel":switch(i){case 101:this.onUpdateWin();break;case 103:this.onUpdateWinComplete();break;case 11:this.onTrigger()}break;default:t.prototype.updateStatus.call(this,e,i,o)}},e.prototype.onSpinStart=function(){var e=this;ResultData.CurrentWin>0?(this._totalWin.visible=!0,this._isWinCounting?TweenMax.delayedCall(.3,function(t){return e.spinStartHandler()}):this.spinStartHandler()):(t.prototype.onSpinStart.call(this),this._totalWin.visible=!1)},e.prototype.onSpinComplete=function(){0===ResultData.CurrentWin&&GameData.CurrentGameMode===ResultData.GameMode&&(this._message.visible=!0,this._message.text=this._contents.TryAgain,TweenMax.to(this._message,.5,{alpha:1}))
},e.prototype.onUpdateWin=function(){this._isWinCounting=!0,this._totalWin.visible=!0,this._message.visible=!1},e.prototype.onUpdateWinComplete=function(){var t=this;TweenMax.delayedCall(.3,function(e){return t._isWinCounting=!1})},e.prototype.spinStartHandler=function(){this._totalWin.visible=!1,t.prototype.onSpinStart.call(this)},e.prototype.onTrigger=function(){4===ResultData.GameMode?this._message.text=this._contents.BonusStart:1===ResultData.GameMode&&(this._message.text=this._contents.FreeGameStart),this._totalWin.visible=!1,TweenMax.killTweensOf(this._message),this._message.visible=!0,this._message.alpha=1},e}(Toaster);__reflect(CustomToaster.prototype,"CustomToaster");var CustomGameView=function(t){function e(){var e=t.call(this)||this;return e._toast=new CustomToaster,e._stage=new CustomGameViewStage,e._winInd=new CustomWinIndicator,e}return __extends(e,t),e.prototype.retrieveResultDataHandler=function(){return new CustomResultDataHandler},e.prototype.retrieveSoundController=function(){return new CustomSoundController},e.prototype.retrieveSequenceController=function(){return new CustomSequence},e.prototype.retrieveSpinController=function(){return new CustomSpinController},e.prototype.retrieveSpinningClimax=function(){return new CustomSpinningClimax},e.prototype.retrieveAutoSpinPanel=function(){return new CustomAutoSpinPanel},e.prototype.retrieveSpinningReel=function(){return new CustomSpinningReel},e.prototype.retrieveBigWinOverlay=function(){return new CustomBigWinOverlay},e.prototype.retrieveResultReel=function(){return new CustomResultReel},e.prototype.retrieveSpinPanel=function(){return new CustomBetPanel},e.prototype.retrieveSymbol=function(){return new CustomSlotSymbol},e.prototype.retrievePayLineController=function(){return new CustomPayLineController},e.prototype.retrievePayLine=function(){return new CustomPayLine},e.prototype.retrieveLineWinIndicator=function(){return new CustomLineWinIndicator},e.prototype.viewConfigurations=function(){t.prototype.viewConfigurations.call(this)},e.prototype.initCustomMethod=function(e,i){MovieClipDataManager.parseMultipackSpriteSheetData("animations",4),t.prototype.initCustomMethod.call(this,e,i);var o=this._eui.WinIndicator;this._winInd.init(o),this._toast.init(this._eui),this._stage.init(this._eui);var n=this._eui.ReelsContainer;n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onContainerTouch,this)},e.prototype.initInactiveGroup=function(){t.prototype.initInactiveGroup.call(this);var e=this._eui.InactiveReelsContainer;e.filters=[new egret.ColorMatrixFilter(ColorMatrix.darken())]},e.prototype.initSequenceController=function(){this._seqCtrl=this.retrieveSequenceController(),this._seqCtrl.init(this._resultReels,this._bigWin,this._panel,this._pay,this._eui)},e.prototype.resumeCustomMethod=function(e){t.prototype.resumeCustomMethod.call(this),this._stage.resume(),this._toast.updateStatus("GameViewChannel",6),1===e&&this._panel.updateStatus("CustomChannel","openCover")},e.prototype.registerListeners=function(){t.prototype.registerListeners.call(this),EventManager.register("CustomChannel",this._panel),EventManager.register("SequenceChannel",this._toast),EventManager.register("SpinChannel",this._toast),EventManager.register("SequenceChannel",this._stage),EventManager.register("SpinChannel",this._stage)},e.prototype.unregisterListeners=function(){t.prototype.unregisterListeners.call(this),EventManager.unregisterChannel("CustomChannel")},e.prototype.onContainerTouch=function(){102===this._panel.status&&this._panel.updateStatus("CustomChannel","reelsContainerTouch")},e.prototype.updateStatus=function(e,i,o){t.prototype.updateStatus.call(this,e,i,o),"SequenceChannel"===e&&4===i&&this._winInd.show(ResultData.CurrentWin,1)},e.prototype.showWinSequence=function(t){this._winInd.hide(),this._lineWinInd.show(t);var e=GameData.TotalReels,i=GameData.SymbolWidth,o=GameData.SymbolHeight,n=t.SymbolsId.length,r=Math.floor(e/2),s=r>n?n:r,a=t.Position[s][0];s*=i,s+=i/2,a*=o,a+=o/2;var h=this._eui.LineWinIndicator;h.x=s,h.y=a,h.x-=15,h.y+=50;var l=h.getChildByName("bg"),p=h.getChildByName("total");l.width=p.textWidth-130},e.prototype.destroyCustomMethod=function(){var e=this._eui.ReelsContainer;e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onContainerTouch,this),this._toast.destroy(),this._stage.destroy(),this._winInd.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(LineWinGameView);__reflect(CustomGameView.prototype,"CustomGameView");var CustomResultDataHandler=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onBonusGameHandler=function(t){ResultData.GameMode=4;var e=this.getTriggerSymbol(4),i=GameUtil.getEmptyNumArr();ResultData.TriggerSymbolsMap.set(e,i),OneClickBonusGameData.Selections=t.bonusGameResult.resultList.slice(0),ResultData.Balance-=BonusGameData.TotalWin=t.bonusGameResult.winAmount},e.prototype.onFreeGameHandler=function(t){ResultData.GameMode=1,FreeGameData.TotalSpin=t.baseGameResult.freeTimeNum;var e=this.getTriggerSymbol(1),i=GameUtil.getEmptyNumArr();ResultData.TriggerSymbolsMap.set(e,i);var o=new FreeSpinConnector;o.parseResult(t.freeTimeResultList),ResultData.Balance-=FreeGameData.TotalWin},e}(ResultDataHandler);__reflect(CustomResultDataHandler.prototype,"CustomResultDataHandler");var CustomGameInfoPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this),this._eui.BuildInfo.text=BuildData.Context},e.prototype.onCloseTouch=function(t){t.currentTarget===this._closeBtn&&Sound.play("SFX_Btn_Default-Click"),this.hide()},e}(PortraitGameInfoPanel);__reflect(CustomGameInfoPanel.prototype,"CustomGameInfoPanel");var CustomBigWinOverlay=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._container=this._eui.Container,this._total=this._eui.Total,this.visible=!1,this._counter=this.retrieveCounter(),this._counter.register(this._total),this._counter.addEventListener("updateWinComplete",this.onUpdateWinComplete,this),this._db=new DBMovieClip("win","bigwin",30,3),this._container.addChildAt(this._db,0),this._db.x=this._container.width/2,this._db.y=this._container.height/2,this._oriScales=this._total.scaleX},e.prototype.showCustomMethod=function(t){var e=this;this.visible=!0,this._totalAmount=t,this._win=this.getWinType(t);var i=this.getLoopTime(t);this._counter.update(t,i.pop()),this.collect(0),i.length>0&&this.exceedBigWinHandler(),TweenMax.delayedCall(1,function(t){return e._container.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onCloseTouch,e)})},e.prototype.loopHandler=function(){switch(this._currentWin){case 2:this._db.gotoAndStop("chaojijujiang_xunhuan"),Sound.play("SFX_Super_loop_0",{loop:!0}),Sound.play("SFX_Super_loop_1",{loop:!0}),Sound.play("SFX_Super_loop_2",{loop:!0});break;case 1:this._db.gotoAndStop("jujiang_xunhuan"),Sound.play("SFX_Mega_loop_0",{loop:!0});break;default:this._db.gotoAndStop("dajiang_xunhuan")}this._db.play(-1)},e.prototype.onUpdateWinComplete=function(){var t=this;this._container.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this),TweenMax.to(this._total,.3,{scaleX:this._oriScales+.1,scaleY:this._oriScales+.1,yoyo:!0,repeat:1});var e=3;TweenMax.delayedCall(e,function(e){return t.hide()}),Sound.stop("SFX_Coin-Count"),TweenMax.killDelayedCallsTo(this.playCoinCounterSound),Sound.fadeOut("SFX_Big_loop_0",e,{stop:!0}),Sound.fadeOut("SFX_Big_loop_1",e,{stop:!0}),Sound.fadeOut("SFX_Big_loop_0",e,{stop:!0}),Sound.fadeOut("SFX_Mega_loop_0",e,{stop:!0}),Sound.fadeOut("SFX_Super_loop_0",e,{stop:!0}),Sound.fadeOut("SFX_Super_loop_1",e,{stop:!0}),Sound.fadeOut("SFX_Super_loop_2",e,{stop:!0})},e.prototype.collect=function(t){switch(TweenMax.killDelayedCallsTo(this.loopBig),this._db.once(DBMovieClipEvent.ANIMATION_COMPLETE,this.loopHandler,this),t){case 2:this._currentWin=2,this._db.gotoAndStop("chaojijujiang_kaishi"),Sound.play("SFX_Super_start");break;case 1:this._currentWin=1,this._db.gotoAndStop("jujiang_kaishi"),Sound.play("SFX_Mega_start");break;default:this._currentWin=0,this._db.gotoAndStop("dajiang_kaishi"),TweenMax.fromTo(this._total,1,{scaleX:0,scaleY:0},{scaleX:this._oriScales,scaleY:this._oriScales,ease:Back.easeOut}),Sound.play("SFX_Big_start"),TweenMax.delayedCall(.5,this.loopBig,[],this),this.playCoinCounterSound()}this._db.play()},e.prototype.loopBig=function(){Sound.play("SFX_Big_loop_0",{loop:!0}),Sound.play("SFX_Big_loop_1",{loop:!0})},e.prototype.playCoinCounterSound=function(){Sound.play("SFX_Coin-Count"),TweenMax.delayedCall(.03,this.playCoinCounterSound,[],this)},e.prototype.destroyCustomMethod=function(){this._db&&this._db.destroy(),this._counter&&this._counter.removeEventListener("updateWinComplete",this.onUpdateWinComplete,this)},e}(ProgressiveBigWinOverlay);__reflect(CustomBigWinOverlay.prototype,"CustomBigWinOverlay");var CustomAutoSpinPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.retrieveAutoSpinSelector=function(){return new CustomAutoSpinSelector},e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this),this._y=this._eui.AutoSpinContainer.y,this._stopFG=this._eui.BtnStopOnFreeGame,this._stopBN=this._eui.BtnStopOnBonusGame,this._stopFG.selected=this._stopBN.selected=!1,this._stopFG.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onToggleButtonTouch,this),this._stopBN.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onToggleButtonTouch,this);var e=new egret.DropShadowFilter(1,90,16777215);this._eui.Start.filters=[e];var i=RES.getRes(GameData.Language+"_json").autospinpanel;this._eui.StopOnFreeGame.text=i.StopOnFreeGame,this._eui.StopOnBonusGame.text=i.StopOnBonusGame},e.prototype.onToggleButtonTouch=function(t){var e;switch(t.currentTarget){case this._stopFG:e=1;break;case this._stopBN:e=4}t.currentTarget.selected?AutoSpinData.StopOnGameMode=ArrayUtil.removeValue(AutoSpinData.StopOnGameMode,e):AutoSpinData.StopOnGameMode.push(e)},e.prototype.showCustomMethod=function(){this._isActive=this.visible=!0,TweenMax.fromTo(this._backdrop,.5,{alpha:0},{alpha:1});var t=this._eui.AutoSpinContainer;TweenMax.fromTo(t,.5,{y:ApplicationData.defaultHeight},{y:this._y,ease:Back.easeOut}),this._eui.Start.textColor=5066061},e.prototype.hideCustomMethod=function(){var t=this._eui.AutoSpinContainer;TweenMax.to(t,.5,{y:ApplicationData.defaultHeight,ease:Back.easeIn,onComplete:this.onHideComplete,onCompleteScope:this}),this._spinBtn.enabled=!1,this._eui.Start.textColor=5066061,TweenMax.to(this._backdrop,.5,{alpha:0})},e.prototype.onSpinCountSelected=function(){this._loss.activate(),this._win.activate(),this._spinBtn.enabled=!0,this._eui.Start.textColor=7873538,Sound.play("SFX_Btn_Default-Click")},e.prototype.onSpinButtonTouch=function(){t.prototype.onSpinButtonTouch.call(this),Sound.play("SFX_Btn_Default-Click")},e.prototype.onCloseTouch=function(t){this._isActive&&(this._isActive=!1,t.currentTarget===this._closeBtn&&Sound.play("SFX_Btn_Default-Click"),this.hide())},e.prototype.onHideComplete=function(){this.visible=!1,this._select.reset(),this._loss.deactivate(),this._win.deactivate(),this._stopFG.selected=!1,this._stopBN.selected=!1,this.dispatchHideComplete()},e.prototype.destroyCustomMethod=function(){this._stopFG.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onToggleButtonTouch,this),this._stopBN.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onToggleButtonTouch,this),t.prototype.destroyCustomMethod.call(this)},e}(AutoSpinPanel);__reflect(CustomAutoSpinPanel.prototype,"CustomAutoSpinPanel");var CustomAutoSpinSelector=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t){var e=this,i=RES.getRes("config_json").AutoSpinRange.slice(0);i.forEach(function(i,o){var n=t.getChildByName("select"+o);n.label=i.toString();var r=n.labelDisplay;r.textColor=3081477,r.y;var s=new egret.TextField;t.addChild(s),s.name="label"+o,s.x=n.x,s.y=n.y-2,s.text=n.label,s.textColor=16777215,s.width=n.width,s.height=n.height,s.textAlign="center",s.verticalAlign="middle",n.addEventListener(eui.UIEvent.CHANGE,e.onTouchBegin,e),e._buttons.push(n)}),this.reset()},e.prototype.onTouchBegin=function(t){this.reset();var e=t.currentTarget;e.selected=!0;var i=StringUtil.afterFirst(e.name,"select"),o=e.parent.getChildByName("label"+i);o.textColor=3081477,AutoSpinData.Total=parseInt(e.label);var n=e.labelDisplay;n.textColor=16777215,this.dispatchEventWith("selected")},e.prototype.reset=function(){for(var t=0,e=this._buttons;t<e.length;t++){var i=e[t],o=i.labelDisplay;o.textColor=3081477;var n=StringUtil.afterFirst(i.name,"select"),r=i.parent.getChildByName("label"+n);r.textColor=16777215,i.selected=!1}AutoSpinData.isActive||(AutoSpinData.Total=0)},e}(AutoSpinSelector);__reflect(CustomAutoSpinSelector.prototype,"CustomAutoSpinSelector");var CustomBetPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this),this._arrow=this._eui.BtnArrow,this._cover=this._eui.FreeGameCover,this._cover.visible=!1,this._oriY=this._cover.y;var e=this._eui.SpinStopContainer;this._light=new MovieClip("spin_light"),e.addChild(this._light),this._light.x-=275.5,this._light.x+=e.width/2,this._light.y-=274,this._light.y+=e.height/2,this._light.touchEnabled=!1},e.prototype.onSpinContolButtonsTouch=function(e){e.currentTarget===this._spin&&(TweenMax.to(this._arrow,.7,{rotation:"360"}),this._light.gotoAndPlay(1));var i=this._eui.SpinStopContainer;TweenMax.to(i,.05,{scaleX:.95,scaleY:.95,yoyo:!0,repeat:1}),t.prototype.onSpinContolButtonsTouch.call(this,e)},e.prototype.onSpinReady=function(){this._spin.visible=this._spin.enabled=!0,this._stop.visible=this._stop.enabled=!1},e.prototype.onSpinBlock=function(){this._spin.enabled=!1},e.prototype.onStopReady=function(){TweenMax.delayedCall(.3,t.prototype.onStopReady,[],this)},e.prototype.onStopBlock=function(){this._stop.enabled=!1},e.prototype.updateStatus=function(e,i,o){switch(e){case"CustomChannel":this.customStatusHandler(i,o);break;default:t.prototype.updateStatus.call(this,e,i,o)}},e.prototype.customStatusHandler=function(t,e){var i=this;"reelsContainerTouch"===t?this._stop.enabled&&(this._stop.enabled=!1,this.notify("SpinPanelChannel",1)):"openCover"===t&&(this._cover.visible=!0,TweenMax.fromTo(this._cover,1.5,{y:this._oriY},{y:this._oriY+this._cover.height,onComplete:function(t){return i._cover.visible=!1}}),Sound.play("SFX_FS_freespin_1"))},e.prototype.destroyCustomMethod=function(){this._light.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(BetPanel);__reflect(CustomBetPanel.prototype,"CustomBetPanel");var CustomCommonPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onConfirmTouch=function(){Sound.play("SFX_Btn_Default-Click"),t.prototype.onConfirmTouch.call(this)},e.prototype.onCloseTouch=function(){Sound.play("SFX_Btn_Default-Click"),t.prototype.onCloseTouch.call(this)},e}(CommonPanel);__reflect(CustomCommonPanel.prototype,"CustomCommonPanel");var CustomFreeGameSpinPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.retrieveCounter=function(){return new FreeSpinCountDownCounter},e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this),this._arrow=this._eui.BtnArrow,this._cover=this._eui.FreeGameCover,this._eui.TotalFreeSpinAmount.text=FreeGameData.TotalSpin,TweenMax.fromTo(this._cover,1,{y:this._cover.y+this._cover.height},{y:this._cover.y}),Sound.play("SFX_FS_freespin_1")},e.prototype.onSpinContolButtonsTouch=function(e){TweenMax.to(this._arrow,.5,{rotation:"360"}),t.prototype.onSpinContolButtonsTouch.call(this,e)},e.prototype.updateStatus=function(e,i,o){switch(e){case"CustomChannel":this.customStatusHandler(i,o);break;default:t.prototype.updateStatus.call(this,e,i,o)}},e.prototype.customStatusHandler=function(t,e){"reelsContainerTouch"===t&&this._stop.enabled&&(this._stop.enabled=!1,this.notify("SpinPanelChannel",1))},e.prototype.onTrigger=function(){TweenMax.delayedCall(1,t.prototype.onTrigger,[],this)},e.prototype.destroyCustomMethod=function(){t.prototype.destroyCustomMethod.call(this)},e}(FreeGameSpinPanel);__reflect(CustomFreeGameSpinPanel.prototype,"CustomFreeGameSpinPanel");var CustomHistoryPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this),this._y=this._eui.HistoryContainer.y},e.prototype.onCloseTouch=function(t){this._isActive&&(this._isActive=!1,t.currentTarget===this._closeBtn&&Sound.play("SFX_Btn_Default-Click"),this.hide())},e.prototype.onHistoryRecievedFailed=function(e){t.prototype.onHistoryRecievedFailed.call(this,e),this.hide()},e.prototype.showCustomMethod=function(){this._isActive=this.visible=!0,TweenMax.fromTo(this._backdrop,.5,{alpha:0},{alpha:1});var t=this._eui.HistoryContainer;TweenMax.fromTo(t,.5,{y:ApplicationData.defaultHeight},{y:this._y,ease:Back.easeOut}),this._connect.connect()},e.prototype.hideCustomMethod=function(){var t=this._eui.HistoryContainer;TweenMax.to(t,.5,{y:ApplicationData.defaultHeight,ease:Back.easeIn,onComplete:this.onHideComplete,onCompleteScope:this}),TweenMax.to(this._backdrop,.5,{alpha:0})},e.prototype.onHideComplete=function(){this._isActive=this.visible=!1,this.dispatchHideComplete()},e}(HistoryPanel);__reflect(CustomHistoryPanel.prototype,"CustomHistoryPanel");var CustomMainPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.retrieveSubPanel=function(){return new CustomSubPanel},e.prototype.initCustomMethod=function(){var t=new egret.DropShadowFilter(1,90,0);this._eui.Balance.filters=[t]},e.prototype.onBackTouch=function(){Sound.play("SFX_Btn_Default-Click"),t.prototype.onBackTouch.call(this)},e.prototype.onReloadTouch=function(){Sound.play("SFX_Btn_Default-Click"),t.prototype.onReloadTouch.call(this)},e.prototype.onSettingTouch=function(){Sound.play("SFX_Btn_Default-Click"),t.prototype.onSettingTouch.call(this)},e}(MainPanel);__reflect(CustomMainPanel.prototype,"CustomMainPanel");var CustomNoticePanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this);var e=new egret.DropShadowFilter(1,90,15785474);this._eui.BtnLabel.filters=[e]},e.prototype.onCloseTouch=function(){Sound.play("SFX_Btn_Default-Click"),t.prototype.onCloseTouch.call(this)},e}(NoticePanel);__reflect(CustomNoticePanel.prototype,"CustomNoticePanel");var CustomRecordPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this),this._y=this._eui.RecordContainer.y},e.prototype.onCloseTouch=function(t){this._isActive&&(this._isActive=!1,t.currentTarget===this._closeBtn&&Sound.play("SFX_Btn_Default-Click"),this.hide())},e.prototype.onRecordRecievedFailed=function(e){t.prototype.onRecordRecievedFailed.call(this,e),this.hide()},e.prototype.showCustomMethod=function(){this._isActive=this.visible=!0,TweenMax.fromTo(this._backdrop,.5,{alpha:0},{alpha:1});var t=this._eui.RecordContainer;TweenMax.fromTo(t,.5,{y:ApplicationData.defaultHeight},{y:this._y,ease:Back.easeOut}),this._connect.connect()},e.prototype.hideCustomMethod=function(){var t=this._eui.RecordContainer;TweenMax.to(t,.5,{y:ApplicationData.defaultHeight,ease:Back.easeIn,onComplete:this.onHideComplete,onCompleteScope:this}),TweenMax.to(this._backdrop,.5,{alpha:0})},e.prototype.onHideComplete=function(){this._isActive=this.visible=!1,this.dispatchHideComplete()},e}(RecordPanel);__reflect(CustomRecordPanel.prototype,"CustomRecordPanel");var CustomSoundPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this),this._y=this._eui.SoundContainer.y},e.prototype.onCloseTouch=function(t){this._isActive&&(this._isActive=!1,t.currentTarget===this._closeBtn&&Sound.play("SFX_Btn_Default-Click"),this.hide())},e.prototype.showCustomMethod=function(){this._isActive=this.visible=!0,TweenMax.fromTo(this._backdrop,.5,{alpha:0},{alpha:1});var t=this._eui.SoundContainer;TweenMax.fromTo(t,.5,{y:ApplicationData.defaultHeight},{y:this._y,ease:Back.easeOut})},e.prototype.onButtonToggle=function(e){Sound.play("SFX_Btn_Default-Click"),t.prototype.onButtonToggle.call(this,e)},e.prototype.hideCustomMethod=function(){var t=this._eui.SoundContainer;TweenMax.to(t,.5,{y:ApplicationData.defaultHeight,ease:Back.easeIn,onComplete:this.onHideComplete,onCompleteScope:this}),TweenMax.to(this._backdrop,.5,{alpha:0})},e.prototype.onHideComplete=function(){this._isActive=this.visible=!1,this.dispatchHideComplete()},e}(SoundPanel);__reflect(CustomSoundPanel.prototype,"CustomSoundPanel");var CustomSubPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e);var i=RES.getRes(GameData.Language+"_json").subpanel;for(var o in i){var n=this._eui[o],r=n.getChildByName("btn_bg");r.width=n.width+10,r.visible=!1}this._grp.width+=40,this._grp.height+=40},e.prototype.onButtonTouch=function(e){t.prototype.onButtonTouch.call(this,e),Sound.play("SFX_Btn_Default-Click");var i=e.currentTarget.parent,o=i.getChildByName("btn_bg");o.visible=!0,TweenMax.delayedCall(.1,function(t){return o.visible=!1})},e}(SubPanel);__reflect(CustomSubPanel.prototype,"CustomSubPanel");var CustomPayLine=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getPosition=function(){var t=[18,4,12,6,16,2,22,20,24,10,15,8,1,9,14,11,25,21,23,3,17,7,13,5,19];return t.indexOf(this.id+1)},e.prototype.getBufferY=function(){var t=GameData.PayLines.length,e=.8*GameData.SymbolHeight,i=e/t;return i*=this.getPosition(),i-=e/2},e.prototype.initCustomMethod=function(){this.drawLineShadow(),this.drawLine(),this.cacheAsBitmap=!0},e.prototype.drawLine=function(){var t=this.getBufferY(),e=this.retrieveLine(),i=this.retrieveStackLine(),o=this._positions[0],n=o[0],r=o[1];e.graphics.moveTo(n,r+t),i.graphics.moveTo(n,r+2+t);for(var s=0,a=this._positions;s<a.length;s++){var h=a[s],l=h[0],p=h[1];e.graphics.lineTo(l,p+t),i.graphics.lineTo(l,p+2+t)}this.addChild(e),this.addChild(i)},e.prototype.drawLineShadow=function(){var t=this.getBufferY(),e=this.retrieveLineShadow(),i=this._positions[0],o=i[0],n=i[1];e.graphics.moveTo(o,n+t+4);for(var r=0;r<this._positions.length;r++){var s=this._positions[r],a=s[0],h=s[1];e.graphics.lineTo(a,h+t+4)}this.addChild(e)},e.prototype.retrieveLine=function(){var t=new egret.Shape;return t.graphics.lineStyle(8,this._color,1,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.MITER),t},e.prototype.retrieveStackLine=function(){var t=new egret.Shape;return t.graphics.lineStyle(3,16744989,1,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.MITER),t},e.prototype.retrieveLineShadow=function(){var t=new egret.Shape;return t.graphics.lineStyle(11,0,.4,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.MITER),t},e}(StackPayLine);__reflect(CustomPayLine.prototype,"CustomPayLine");var CustomPayLineController=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateStatus=function(e,i,o){if("SequenceChannel"===e)switch(i){case 200:this.showLine(o);break;default:t.prototype.updateStatus.call(this,e,i,o)}else t.prototype.updateStatus.call(this,e,i,o)},e}(PayLineController);__reflect(CustomPayLineController.prototype,"CustomPayLineController");var CustomPayRatesController=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.resetRatesLabels=function(){for(var t=0,e=this._indexLabels;t<e.length;t++){var i=e[t];i.textColor=16777215}for(var o=0,n=this._ratesLabels;o<n.length;o++){var i=n[o];i.textColor=16776192}},e.prototype.showWinRate=function(t,e){t.textColor=16777215,e.textColor=1824487},e}(PayRatesController);__reflect(CustomPayRatesController.prototype,"CustomPayRatesController");var CustomPaySymbol=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){this._viewBmp.visible=!0,this._viewMc.visible=!1},e}(CustomSlotSymbol);__reflect(CustomPaySymbol.prototype,"CustomPaySymbol");var CustomPaySymbolsAnimator=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.retrieveSymbol=function(){return new CustomPaySymbol},e}(PaySymbolsAnimator);__reflect(CustomPaySymbolsAnimator.prototype,"CustomPaySymbolsAnimator");var CustomPaytable=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.retrievePayRatesController=function(){return new CustomPayRatesController},e.prototype.retrievePayLineIndicator=function(){return new CustomPayLineIndicator},e.prototype.createPayLineIndicator=function(t,e,i){var o=this._eui["Line"+t],n=o.getChildByName("index");n.text=(t+1).toString(),n.visible=!1;var r=this.retrievePayLineIndicator();o.addChild(r),this._linesInd.push(r);var s=2;r.width=o.width-s,r.height=o.height,r.init(e,i),r.x=s,r.cacheAsBitmap=!0},e.prototype.initCustomMethod=function(){t.prototype.initCustomMethod.call(this),this._animator=new CustomPaySymbolsAnimator,this._animator.init(this._eui)},e.prototype.onCloseTouch=function(t){t.currentTarget===this._closeBtn&&Sound.play("SFX_Btn_Default-Click"),this.hide()},e.prototype.updateStatus=function(e,i,o){t.prototype.updateStatus.call(this,e,i,o),this._animator.updateStatus(e,i,o)},e.prototype.showCustomMethod=function(){t.prototype.showCustomMethod.call(this),this._animator.updateStatus("PanelsChannel",0)},e.prototype.hideCustomMethod=function(){t.prototype.hideCustomMethod.call(this),this._animator.updateStatus("PanelsChannel",1)},e.prototype.destroyCustomMethod=function(){this._animator.destroy(),t.prototype.destroyCustomMethod.call(this)},e}(PortraitLineWinPaytable);__reflect(CustomPaytable.prototype,"CustomPaytable");var CustomResultReel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.symbolHitBaseHandler=function(t){for(var e=0;e<this._symbols.length;e++){var i=this._symbols[e];if(t&&t.indexOf(i.viewId)>-1){i.updateStatus("SymbolChannel",8),i.visible=!0;var o=this._spinningReel.resultSymbols[e];o.visible=!1}else i.updateStatus("SymbolChannel",7)}},e.prototype.showWinSymbolsMethod=function(e,i){2===i?this.showProgressiveWinSymbolsMethod(e,i):t.prototype.showWinSymbolsMethod.call(this,e,i)},e.prototype.showProgressiveWinSymbolsMethod=function(t,e){for(var i=!1,o=0;o<this._symbols.length;o++){var n=this._symbols[o],r=this._inactiveSymbols[o];-1===t.indexOf(o)||(this._activeSymbols.push(n),n.updateStatus("SymbolChannel",e),n.visible=!0,r.visible=!1,i=!0)}i||this.dispatchWinMethodComplete()},e}(ResultReel);__reflect(CustomResultReel.prototype,"CustomResultReel");var MovieClip2=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._sequences=[],o}return __extends(e,t),e.prototype.addNewClip=function(e){return this._isPlaying?(this._sequences.push(["addNewClip",e]),this):(t.prototype.addNewClip.call(this,e),this)},e.prototype.play=function(e){return this._isPlaying?(this._sequences.push(["play",e]),this):(t.prototype.play.call(this,e),this)},e.prototype.playToAndStop=function(e){return this._isPlaying?(this._sequences.push(["playToAndStop",e]),this):(t.prototype.playToAndStop.call(this,e),this)},e.prototype.gotoAndPlay=function(e,i){return this._isPlaying?(this._sequences.push(["gotoAndPlay",e,i]),this):(t.prototype.gotoAndPlay.call(this,e,i),this)},e.prototype.gotoAndStop=function(e){return this._isPlaying?(this._sequences.push(["gotoAndStop",e]),this):(t.prototype.gotoAndStop.call(this,e),this)},e.prototype.stop=function(){return this._isPlaying?(this._sequences.push(["stop"]),this):(t.prototype.stop.call(this),this)},e.prototype.rewind=function(e){return this._isPlaying?(this._sequences.push(["rewind",e]),this):(t.prototype.rewind.call(this,e),this)},e.prototype.rewindToAndStop=function(e){return this._isPlaying?(this._sequences.push(["rewindToAndStop",e]),this):(t.prototype.rewindToAndStop.call(this,e),this)},e.prototype.nextFrame=function(){return this._isPlaying?(this._sequences.push(["nextFrame"]),this):(t.prototype.nextFrame.call(this),this)},e.prototype.prevFrame=function(){return this._isPlaying?(this._sequences.push(["prevFrame"]),this):(t.prototype.prevFrame.call(this),this)},e.prototype.setHeight=function(e){return this._isPlaying?(this._sequences.push(["setHeight",e]),this):(t.prototype.setHeight.call(this,e),this)},e.prototype.setWidth=function(e){return this._isPlaying?(this._sequences.push(["setWidth",e]),this):(t.prototype.setWidth.call(this,e),this)},e.prototype.setFrameRate=function(t){return this._isPlaying?(this._sequences.push(["setFrameRate",t]),this):(this.frameRate=t,this)},e.prototype.loopController=function(){return this._loopCounter>0?void t.prototype.loopController.call(this):(this._isLoop=!1,this._isRewind=!1,this._isPlaying=!1,void(0===this._sequences.length?this.dispatchAnimationComplete():this.chainedMethod()))},e.prototype.chainedMethod=function(){var t=this._sequences[0][0];switch(this._sequences[0].shift(),this[t].apply(this,this._sequences[0]),this._sequences.shift(),t){case"addNewClip":case"gotoAndStop":case"stop":case"setWidth":case"setHeight":case"setFrameRate":this.loopController()}},e.prototype.killSequence=function(e){this._sequences.length=0,e&&t.prototype.stop.call(this)},e.prototype.destroy=function(){this.killSequence(!0),t.prototype.destroy.call(this)},e}(MovieClip);__reflect(MovieClip2.prototype,"MovieClip2",["IMovieClip2"]);var CustomSpinningClimax=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createCustomMethod=function(){this._mc=new MovieClip("climax",50),this.addChild(this._mc)},e.prototype.initCustomMethod=function(){this._mc.scaleY=.88;var t=this._mc.currentClip.data[0].sourceSize,e=t.w,i=t.h;this._mc.x-=e/2,this._mc.y-=i/2,this._mc.y+=48,this.visible=!1},e}(SpinningClimax);__reflect(CustomSpinningClimax.prototype,"CustomSpinningClimax");var CustomSpinningReel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSpinTime=function(){var t=.025,e=this._totalRows*t;return e*=GameData.TotalSymbolsPerReels},e.prototype.startMethod=function(){TweenMax.to(this._camera,.2,{y:"+=25",onUpdate:this.onAnimationUpdate,onUpdateScope:this,onComplete:t.prototype.startMethod,onCompleteScope:this})},e.prototype.onAnimationHitBase=function(){this._stopTween=null,this.checkLoopHackReset(),this._status=3,this.dispatchAnimationHitBase(),TweenMax.to(this._camera,.15,{y:"-=20",yoyo:!0,repeat:1,onUpdate:this.onAnimationUpdate,onUpdateScope:this,onComplete:this.onAnimationComplete,onCompleteScope:this})},e}(SpinningBitmapReel);__reflect(CustomSpinningReel.prototype,"CustomSpinningReel");var CustomSequence=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(e,i,o,n,r){t.prototype.initCustomMethod.call(this,e,i,o,n),this._eui=r},e.prototype.noWinHandler=function(){t.prototype.noWinHandler.call(this),this.onSpinReady(),this.onBetReady()},e.prototype.showProgressiveWinSequence=function(){t.prototype.showProgressiveWinSequence.call(this);var e=this._eui.ReelsContainer,i=(this._eui.PayLinesContainer,this._eui.ResultReelsContainer),o=this._eui.InactiveReelsContainer;e.setChildIndex(i,e.getChildIndex(o)+2)},e.prototype.showAllWinSymbols=function(){t.prototype.showAllWinSymbols.call(this);var e=this._eui.ReelsContainer,i=this._eui.PayLinesContainer,o=(this._eui.ResultReelsContainer,this._eui.InactiveReelsContainer);e.setChildIndex(i,e.getChildIndex(o)+2),this.onSpinReady(),this.onBetReady()},e}(ProgressiveWinSequenceController);__reflect(CustomSequence.prototype,"CustomSequence");var CustomBackgroundSoundHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this
}return __extends(e,t),e.prototype.onTriggerGameView=function(){0===GameData.CurrentGameMode&&t.prototype.onTriggerGameView.call(this)},e.prototype.onShowAllWinSymbols=function(){},e}(BackgroundSoundHandler);__reflect(CustomBackgroundSoundHandler.prototype,"CustomBackgroundSoundHandler");var CustomPanelSoundHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(PanelSoundHandler);__reflect(CustomPanelSoundHandler.prototype,"CustomPanelSoundHandler");var CustomSoundController=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.retrieveBackgroundSoundHandler=function(){return new CustomBackgroundSoundHandler},e.prototype.retrievePanelSoundHandler=function(){return new CustomPanelSoundHandler},e.prototype.retrieveSpinSoundHandler=function(){return new CustomSpinSoundHandler},e.prototype.retrieveWinSoundHandler=function(){return new CustomWinSoundHandler},e}(SoundController);__reflect(CustomSoundController.prototype,"CustomSoundController");var CustomSpinSoundHandler=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._alertCounter=0,e}return __extends(e,t),e.prototype.onSpinStart=function(){this._alertCounter=0,t.prototype.onSpinStart.call(this)},e.prototype.onSpinHitBase=function(t){var e="SFX_ReelStop";if(t.ids){var i=t.ids,o=t.idsCounter,n=(t.reelId,"SFX_ReelStop-Alert");i[0],o[0];e=n+"_"+this._alertCounter,this._alertCounter++}var r=this._isInstant?!1:void 0!=t.overlap?t.overlap:!0;Sound.play(e,{overlap:r})},e.prototype.onClimaxResult=function(){this.climaxResultHit()?this.playSound("SFX_ReelStop-Alert_4"):this.playSound("SFX_ReelSpinning-Climax_Miss")},e}(SpinSoundHandler);__reflect(CustomSpinSoundHandler.prototype,"CustomSpinSoundHandler");var CustomWinSoundHandler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onTrigger=function(){if(0===GameData.CurrentGameMode)switch(ResultData.GameMode){case 1:Sound.play("SFX_Trigger_2");break;case 4:Sound.play("SFX_Trigger_3")}else Sound.play("SFX_FS_faguang")},e}(WinSoundHandler);__reflect(CustomWinSoundHandler.prototype,"CustomWinSoundHandler");var CustomLineWinIndicator=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(LineWinIndicator);__reflect(CustomLineWinIndicator.prototype,"CustomLineWinIndicator");var CustomWinIndicator=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.showCustotmMethod=function(t,e){void 0===e&&(e=0),this._winCounter.init(0),this._winCounter.update(t,e),this._grp.visible=!0;var i=this._grp.getChildByName("bg"),o=this._grp.getChildByName("total");i.width=o.textWidth-130},e.prototype.onUpdateWinComplete=function(){var t=this;TweenMax.delayedCall(.3,function(e){return t.hide()})},e}(WinIndicator);__reflect(CustomWinIndicator.prototype,"CustomWinIndicator");var MovieClipDataManager;!function(t){function e(t){o(t+"_json");for(var e=0,i=h;e<i.length;e++){var n=i[e];r(n)}h.length=0}function i(t,e){for(var i=0;e>i;i++)o(t+"-"+i+"_json");for(var n=0,s=h;n<s.length;n++){var a=s[n],l=p.get(a).getData();l.sort(function(t,e){return t.filename>e.filename?1:e.filename>t.filename?-1:0}),r(a)}h.length=0}function o(t){if(!l.has(t)){l.add(t);for(var e=RES.getRes(t),i=StringUtil.beforeLast(e.meta.image,"."),o=StringUtil.afterLast(e.meta.image,"."),r=0,s=e.frames;r<s.length;r++){var a=s[r],p=a.filename,u=StringUtil.beforeLast(p,"/"),c=u.includes("/")?StringUtil.afterLast(u,"/"):u;a.textureId=i,a.fileType=o,-1===h.indexOf(c)&&h.push(c),n(c,a)}}}function n(t,e){var i,o=t,n=e;p.has(o)?(i=p.get(o),i.addData(n)):(i=new ClipData,p.set(o,i),i.id=o,i.addData(n))}function r(t){var e=p.get(t),i=e.getData(),o=[],n=new Map;u.has(t)?o=u.get(t):u.set(t,o);for(var r=0;r<i.length;r++){var s=i[r],a=s.frame;if(!n.has(s.textureId)){var h=RES.getRes(s.textureId+"_"+s.fileType);n.set(s.textureId,new egret.SpriteSheet(h))}s.rotated?n.get(s.textureId).createTexture(t+r,a.x,a.y,a.h,a.w):n.get(s.textureId).createTexture(t+r,a.x,a.y,a.w,a.h),o.push(n.get(s.textureId).getTexture(t+r))}}function s(t){return p.get(t)}function a(t){return u.get(t)}var h=[],l=new Set,p=new Map,u=new Map;t.parseSpriteSheetData=e,t.parseMultipackSpriteSheetData=i,t.getClipData=s,t.getTextures=a}(MovieClipDataManager||(MovieClipDataManager={}));var BonusGameData={TotalWin:0},Swiper=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o=this._target=t||ApplicationData.stage;o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),o.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this._wlock=e,this._hlock=i},e.prototype.onTouchMove=function(t){this._isTouch&&(this._currentX>t.stageX?(this._directX=1,this.moveRightHandler()):this._currentX<t.stageX?(this._directX=-1,this.moveLeftHandler()):this._directX=0,this._currentY>t.stageY?(this._directY=1,this.moveUpHandler()):this._currentY<t.stageY?(this._directY=-1,this.moveDownHandler()):this._directY=0,this._currentX=t.stageX,this._currentY=t.stageY)},e.prototype.moveRightHandler=function(){},e.prototype.moveLeftHandler=function(){},e.prototype.moveUpHandler=function(){},e.prototype.moveDownHandler=function(){},e}(SwiperPrototype);__reflect(Swiper.prototype,"Swiper",["ISwipper"]);var OneClickBonusGameData={Selections:[0]},Clip=function(t){function e(e){var i=t.call(this)||this;return i._data=[],i._textures=[],i.name=e,i.create(),i}return __extends(e,t),e.prototype.create=function(){this._bmp=new egret.Bitmap,this.update(this.name),this.addChild(this._bmp)},e.prototype.init=function(){this._currentFrame=1;var t=this._data[0];this._bmp.rotation=0,this._bmp.x=t.spriteSourceSize.x,this._bmp.y=t.spriteSourceSize.y,t.rotated&&(this._bmp.rotation=-90,this._bmp.y+=t.spriteSourceSize.h)},e.prototype.update=function(t){this.name=t;var e=MovieClipDataManager.getClipData(this.name);this._data=e.getData(),this._textures=MovieClipDataManager.getTextures(this.name),this._bmp.texture=this._textures[0],this.init()},e.prototype.addNewData=function(t){this._data.push(t)},Object.defineProperty(e.prototype,"currentFrame",{get:function(){return this._currentFrame},set:function(t){if(void 0!==this._data){this._currentFrame=t;var e=this._data[this._currentFrame-1];this._bmp.texture=this._textures[this._currentFrame-1],this._bmp.rotation=0,this._bmp.x=e.spriteSourceSize.x,this._bmp.y=e.spriteSourceSize.y,e.rotated&&(this._bmp.rotation=-90,this._bmp.y+=e.spriteSourceSize.h)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalFrame",{get:function(){return this._data.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeChildren()},e}(egret.DisplayObjectContainer);__reflect(Clip.prototype,"Clip",["IClip"]);var MovementTracker=function(){function t(t){this._timer=new egret.Timer(t),this._timer.addEventListener(egret.TimerEvent.TIMER,this.tracking,this),this._timer.stop(),this.speed=this._prevSpeed=0}return t.prototype.tracking=function(){this._prevX&&this._currX&&(this.moveX=Math.round(Math.abs(this._currX-this._prevX)),this.moveY=Math.round(Math.abs(this._currY-this._prevY)),this.move=Math.round(Math.sqrt(this.moveX*this.moveX+this.moveY*this.moveY)),this.speed=Math.round(10*this.move),this.acceleration=Math.round(10*(this.speed-this._prevSpeed))),this._prevX=this._currX,this._prevY=this._currY,this._prevSpeed=this.speed},t.prototype.start=function(){ApplicationData.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this._timer.start()},t.prototype.stop=function(){ApplicationData.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this._timer.stop()},t.prototype.onTouchMove=function(t){this._currX=t.stageX,this._currY=t.stageY},t.prototype.destroy=function(){this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.tracking,this)},t}();__reflect(MovementTracker.prototype,"MovementTracker");var FreeSpinGameView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getSkinName=function(){return"resource/exml/view/FreeSpinGameView.exml"+GameUtil.preventCache("FreeSpinGameView")},e.prototype.retrieveResultDataHandler=function(){return new FreeGameResultDataHandler},e.prototype.retrieveSequenceController=function(){return new FreeGameWinSequence},e.prototype.retrieveConnector=function(){return new FreeSpinConnector},e.prototype.retrieveSpinPanel=function(){return new FreeGameSpinPanel},e.prototype.initOverlays=function(){this._bigWin.init()},e.prototype.startCustomMethod=function(){ResultData.TriggerSymbolsMap["delete"](2),this.notify("GameViewChannel",6),this.registerListeners(),this._snd.updateStatus("GameViewChannel",0),this._spinCtrl.updateStatus("SequenceChannel",9)},e.prototype.initPaytable=function(){this._pay.init()},e}(GameView);__reflect(FreeSpinGameView.prototype,"FreeSpinGameView");var FreeGameData={TotalSpin:0,SpinCounter:0,Additional:0,TotalWin:0,Results:[]},ClipData=function(){function t(){this._id="",this._data=[],this._textureId=""}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),t.prototype.getData=function(){return this._data},t.prototype.addData=function(t){this._data.push(t)},Object.defineProperty(t.prototype,"textureId",{get:function(){return this._textureId},set:function(t){this._textureId=t},enumerable:!0,configurable:!0}),t}();__reflect(ClipData.prototype,"ClipData");var FreeSpinConnector=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.connect=function(){this.dispatchResultData()},e.prototype.parseResult=function(t){FreeGameData.Results=t.concat(),this.winTotalAmountHanlder(t),this.spinAmountHandler(t)},e.prototype.winTotalAmountHanlder=function(t){FreeGameData.Results;FreeGameData.TotalWin=FreeGameData.Results.reduce(function(t,e,i,o){return e=o[i].totalWinAmount,t+e},0)},e.prototype.spinAmountHandler=function(t){},e.prototype.dispatchResultData=function(){var t=FreeGameData.Results[0];FreeGameData.Results.shift(),EventManager.notify("ConnectorChannel",3,t)},e}(Fetcher);__reflect(FreeSpinConnector.prototype,"FreeSpinConnector");var HTTPconnectorPrototype=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t){this._url=t,this._xhr=new XMLHttpRequest;var e=this;this._xhr.onreadystatechange=function(){e.onReadyStateChange()},this._xhr.onerror=function(){e.onError()}},e.prototype.call=function(t,e){var i=this._url+"/"+t;this._xhr.open("POST",i,!0),this._xhr.send(JSON.stringify(e))},e.prototype.onReadyStateChange=function(){var t=this._xhr;t.readyState===t.DONE&&200===t.status&&this.onReadyState()},e.prototype.onReadyState=function(){console.log("suceed")},e.prototype.onError=function(){console.log("error")},e}(egret.EventDispatcher);__reflect(HTTPconnectorPrototype.prototype,"HTTPconnectorPrototype");var BuildData={Version:1,Major_Update:0,Minor_Update:0,Custom_Build:0,Context:""},VersionController=function(){function t(){var t=this;this.resourceRoot="resource/",this.versionPath="assets/",this.versionConfigPath="resource/version.json",this._currentVersion="",this.versionCacheWxgame=function(){var e=egret.localStorage.getItem("resVersion");if(e!=t._currentVersion){egret.localStorage.setItem("resVersion",t._currentVersion);var i=wx.getFileSystemManager(),o=wx.env.USER_DATA_PATH+"/cache_crc32/assets";i.readdir({dirPath:o,success:function(e){for(var n=t.getRemoveList(e.files),r=n.length,s=0;r>s;++s)i.unlinkSync(o+"/"+n[s])},fail:function(t){}})}},this.versionCacheWeb=function(){var e=egret.localStorage.getItem("resVersion");e!=t._currentVersion&&egret.localStorage.setItem("resVersion",t._currentVersion)}}return t.prototype.init=function(){var t=this;return this._currentVersion=BuildData.Version+"."+BuildData.Major_Update+"."+BuildData.Minor_Update+" build "+BuildData.Custom_Build,new Promise(function(e,i){var o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT,o.open(t.versionConfigPath,egret.HttpMethod.GET),o.send(),o.addEventListener(egret.Event.COMPLETE,function(i){var o=i.currentTarget;t.versionConfig=JSON.parse(o.response),egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME?t.versionCacheWxgame():egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&t.versionCacheWeb(),e()},t),o.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){i()},t)})},t.prototype.getRemoveList=function(t){var e=[],i="";for(var o in this.versionConfig)i+=this.versionConfig[o]+",";for(var n=t.length,r=0;n>r;++r){var s=t[r],a=s.slice(0,s.indexOf("."));-1==i.indexOf(a)&&e.push(s)}return e},t.prototype.getVirtualUrl=function(t){return this.getResUrlByVersion(t)},t.prototype.getResUrlByVersion=function(t){if(-1==t.indexOf(this.resourceRoot))return t;if(t=t.replace(this.resourceRoot,""),this.versionConfig){var e=t.indexOf("?v=");-1!=e&&(t=t.slice(0,e));var i=t.replace(this.versionPath,"");if(this.versionConfig&&this.versionConfig[i]){var o=this.versionConfig[i],n=t.slice(t.lastIndexOf("."));t=this.versionPath+o+n}}return t=this.resourceRoot+t},t}();__reflect(VersionController.prototype,"VersionController",["RES.IVersionController"]),RES.registerVersionController(new VersionController);var FreeSpinCountDownCounter=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t){void 0===t&&(t=0),this._counter={init:t},this._tf.text=t.toString();var e=(FreeGameData.SpinCounter,this._counter.init);this._tf.text=e},e.prototype.updateSpinCounter=function(){var t=FreeGameData.SpinCounter,e=this._counter.init=FreeGameData.TotalSpin;this._tf.text=e-t},e.prototype.loopMethod=function(t,e){this._tween=new TweenMax(this._counter,e,{init:t,target:t,onUpdate:this.onUpdate,onUpdateScope:this,onComplete:this.onComplete,onCompleteScope:this})},e.prototype.onUpdate=function(){var t=FreeGameData.SpinCounter,e=Math.ceil(this._counter.init);this._tf.text=e-t},e.prototype.onComplete=function(){this.dispatchEventWith("updateCounterComplete")},e}(NumbersLooper);__reflect(FreeSpinCountDownCounter.prototype,"FreeSpinCountDownCounter",["IFreeSpinCounter"]);var FreeSpinCounter=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t){void 0===t&&(t=0),this._counter={init:t},this._tf.text=t.toString();var e=FreeGameData.SpinCounter,i=this._counter.init;this._tf.text=e+"/"+i},e.prototype.updateSpinCounter=function(){var t=FreeGameData.SpinCounter,e=this._counter.init=FreeGameData.TotalSpin;this._tf.text=t+"/"+e},e.prototype.loopMethod=function(t,e){this._tween=new TweenMax(this._counter,e,{init:t,target:t,onUpdate:this.onUpdate,onUpdateScope:this,onComplete:this.onComplete,onCompleteScope:this})},e.prototype.onUpdate=function(){var t=FreeGameData.SpinCounter,e=Math.ceil(this._counter.init);this._tf.text=t+"/"+e},e.prototype.onComplete=function(){this.dispatchEventWith("updateCounterComplete")},e}(NumbersLooper);__reflect(FreeSpinCounter.prototype,"FreeSpinCounter",["IFreeSpinCounter"]);var PayLineIndex=function(t){function e(){var e=t.call(this)||this;return e.create(),e}return __extends(e,t),e.prototype.create=function(){},e.prototype.initCustomMethod=function(){},e.prototype.showCustomMethod=function(){},e.prototype.hideCustomMethod=function(){},e.prototype.destroyCustomMethod=function(){},e}(PayLineIndexPrototype);__reflect(PayLineIndex.prototype,"PayLineIndex",["IPayLineIndex"]);var EventManager;!function(t){var e=function(){function t(t){this._listeners=new Set,this._id=t,this.strict=!0}return t.prototype.register=function(t){this._listeners.add(t)},t.prototype.unregister=function(t){this._status=void 0,this._listeners["delete"](t)},t.prototype.notify=function(t,e,i){var o=this;this._status===t&&this.strict||(i&&(this._status=t),this._listeners.forEach(function(i){return i.updateStatus(o._id,t,e)}))},t.prototype.destroy=function(){this._status=void 0,this._listeners.clear()},t}();t.EventChannel=e,__reflect(e.prototype,"EventManager.EventChannel")}(EventManager||(EventManager={}));var SlotMobileAppViewController=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onVisibilityChange=function(){document.hidden?EventManager.notify("AppCannel",0):EventManager.notify("AppCannel",1)},e.prototype.updateStatus=function(t,e,i){if("AppCannel"===t)switch(e){case 0:this.pause();break;case 1:this.resume()}},e.prototype.pause=function(){egret.ticker.pause(),Sound.pause()},e.prototype.resume=function(){egret.ticker.resume(),Howler.ctx.resume(),Sound.resume()},e}(MobileAppViewController);__reflect(SlotMobileAppViewController.prototype,"SlotMobileAppViewController",["IEventListener"]);var Base64=function(){function t(){}return t.prototype.encode=function(e){var i,o,n,r,s,a,h,l="",p=0;for(e=this._utf8_encode(e);p<e.length;)i=e.charCodeAt(p++),o=e.charCodeAt(p++),n=e.charCodeAt(p++),r=i>>2,s=(3&i)<<4|o>>4,a=(15&o)<<2|n>>6,h=63&n,isNaN(o)?a=h=64:isNaN(n)&&(h=64),l=l+t._keyStr.charAt(r)+t._keyStr.charAt(s)+t._keyStr.charAt(a)+t._keyStr.charAt(h);return l},t.prototype.decode=function(e){var i,o,n,r,s,a,h,l="",p=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");p<e.length;)r=t._keyStr.indexOf(e.charAt(p++)),s=t._keyStr.indexOf(e.charAt(p++)),a=t._keyStr.indexOf(e.charAt(p++)),h=t._keyStr.indexOf(e.charAt(p++)),i=r<<2|s>>4,o=(15&s)<<4|a>>2,n=(3&a)<<6|h,l+=String.fromCharCode(i),64!=a&&(l+=String.fromCharCode(o)),64!=h&&(l+=String.fromCharCode(n));return l=this._utf8_decode(l)},t.prototype._utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var o=t.charCodeAt(i);128>o?e+=String.fromCharCode(o):o>127&&2048>o?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e},t.prototype._utf8_decode=function(t){for(var e,i,o="",n=0,r=0;n<t.length;)e=t.charCodeAt(n),128>e?(o+=String.fromCharCode(e),n++):e>191&&224>e?(i=t.charCodeAt(n+1),o+=String.fromCharCode((31&e)<<6|63&i),n+=2):(i=t.charCodeAt(n+1),r=t.charCodeAt(n+2),o+=String.fromCharCode((15&e)<<12|(63&i)<<6|63&r),n+=3);return o},t._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t}();__reflect(Base64.prototype,"Base64");var AutoSpinData={Range:[],isActive:!1,Total:0,isTrackLoss:!1,AllowedLossRange:[],AllowedLoss:0,isTrackWin:!1,AllowedWinRange:[],AllowedWin:0,StopOnGameMode:[]},PayLineTrailer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){this._tracker=this.retrieveTracker(),this.addChild(this._tracker),this._tween=this.retrieveTimeLine();var t=this._positions[0],e=t[0],i=t[1];this._tween.set(this._tracker,{x:e,y:i});for(var o=1;o<this._positions.length;o++){var n=this._positions[o-1],r=n[0],s=n[1],a=this._positions[o],h=a[0],l=a[1],p=this.getTime(r,s,h,l);this._tween.to(this._tracker,p,{x:h,y:l,ease:Linear.easeNone})}},e.prototype.retrieveTracker=function(){var t=new egret.Shape;return t.graphics.beginFill(16766720),t.graphics.drawCircle(0,0,5),t.graphics.endFill(),t},e.prototype.retrieveTimeLine=function(){return new TimelineMax({onStart:this.onStart,onStartScope:this,onUpdate:this.onUpdate,onUpdateScope:this,onComplete:this.onComplete,onCompleteScope:this,paused:!0})},e.prototype.getTime=function(t,e,i,o){var n=GameMathUtil.distanceBetweenTwoPoints(t,e,i,o);return.001*n},e.prototype.onStart=function(){},e.prototype.onUpdate=function(){},e.prototype.onComplete=function(){},e.prototype.showCustomMethod=function(){this._tween.restart(),this.visible=!0},e.prototype.hideCustomMethod=function(){this._tween.kill(),this.visible=!1},e.prototype.destroyCustomMethod=function(){this._tween.kill()},e}(PayLinePrototype);__reflect(PayLineTrailer.prototype,"PayLineTrailer");var GameData={Language:"",PayLines:[],PayRates:[],BetRange:[0],BetValue:0,BetLineAmount:0,TotalBet:0,TotalReels:5,TotalRows:3,TotalSymbolsPerReels:15,SymbolWidth:100,SymbolHeight:100,SymbolBmpWidth:100,SymbolBmpHeight:100,SymbolMcWidth:100,SymbolMcHeight:100,isQuickStop:!1,BigWinRatio:[0],CurrentGameMode:0,FreeSpins:0},ResultData={GameMode:0,Balance:0,WinRatio:0,CurrentWin:0,TotalWin:0,ResultGrid:[[0]],WinningSymbols:[[0]],WinSequenceMap:new Map,TriggerSymbolsMap:new Map},ConnectingEdgePayLineController=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._index=[],e._leftSeq=[],e._rightSeq=[],e._edgeLeft=new Map,e._edgeRight=new Map,e}return __extends(e,t),e.prototype.registerIndex=function(t){this._index.push(t)},e.prototype.initCustomMethod=function(){this._linesConfig=RES.getRes("config_json").PayLines;var t=this._leftSeq=this.getLeftSequence(),e=this._rightSeq=this.getRightSequence();t.length>0&&this.initLeftEdgePosition(),e.length>0&&this.initRightEdgePosition();for(var i=this.getColorList(),o=0;o<this._lines.length;o++){var n=this._lines[o];n.id=o;var r=this.getLineConnectingDirection(o),s=this.getLinePositions(o);n.init(s,i[o]||i[0],r),n.visible=!1}},e.prototype.getLineConnectingDirection=function(t){var e,i=this._leftSeq.indexOf(t)>-1,o=this._rightSeq.indexOf(t)>-1;return i&&o?e=0:i?e=1:o&&(e=-1),e},e.prototype.getLeftSequence=function(){for(var t=GameData.PayLines.length,e=[],i=0;t>i;i++)e.push(i);return e},e.prototype.getRightSequence=function(){return this.getLeftSequence()},e.prototype.getLinePositions=function(e){var i=t.prototype.getLinePositions.call(this,e);return this._edgeLeft.has(e)&&i.unshift(this._edgeLeft.get(e)),this._edgeRight.has(e)&&i.push(this._edgeRight.get(e)),i},e.prototype.getLeftX=function(){for(var t=[],e=this._leftSeq.length,i=0;e>i;i++)t.push(0);return t},e.prototype.getLeftY=function(){for(var t=[],e=this._leftSeq.length,i=GameData.TotalRows*GameData.SymbolHeight,o=i/(e+1),n=0;e>n;n++)t.push(o*n);return t},e.prototype.getRightX=function(){for(var t=[],e=this._rightSeq.length,i=this._resultReels[Math.floor(GameData.TotalReels/2)].symbols[0],o=i.x,n=0;e>n;n++)t.push(2*o);return t},e.prototype.getRightY=function(){return this.getLeftY()},e.prototype.initLeftEdgePosition=function(){for(var t=this.getLeftX(),e=this.getLeftY(),i=this._leftSeq,o=i.length,n=0;o>n;n++)this._edgeLeft.set(i[n],[t[n],e[n]])},e.prototype.initRightEdgePosition=function(){for(var t=this.getRightX(),e=this.getRightY(),i=this._rightSeq,o=i.length,n=0;o>n;n++)this._edgeRight.set(i[n],[t[n],e[n]])},e}(PayLineController);__reflect(ConnectingEdgePayLineController.prototype,"ConnectingEdgePayLineController",["IConnectingEdgePayLineController"]);var ConnectingEdgeStackCrossedPayLine=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){this._stack=new egret.Sprite,this.drawLineShadow(),this.drawConnector(),this.drawLine(),this.drawStackConnector(),this.addChild(this._stack),this._stack.cacheAsBitmap=!0,this._stack.alpha=.2},e.prototype.drawLineShadow=function(){var t=this.retrieveLineShadow(),e=this.retrieveStackLine(),i=this._positions[0],o=i[0],n=i[1];t.graphics.moveTo(o,n),e.graphics.moveTo(o,n+2);for(var r=this.getBufferX(),s=this.getBufferY(),a=1;a<this._positions.length;a++){var h=this._positions[a],l=h[0],p=h[1];this.isBetween(0,a,this._positions.length-1)?(t.graphics.lineTo(l-r,p+s),t.graphics.lineTo(l+r,p+s),e.graphics.lineTo(l-r,p+s+2),e.graphics.lineTo(l+r,p+s+2)):(t.graphics.lineTo(l,p),e.graphics.lineTo(l,p+2))}this.addChild(t),this._stack.addChild(e)},e.prototype.retrieveStackLine=function(){var t=new egret.Shape;return t.graphics.lineStyle(2.5,0,1,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.MITER),t},e.prototype.drawConnector=function(){var t=this.retrieveEdgeConnector();if(this.addChild(t),0!=this._dir){var e=this._dir>0?this._positions[0]:this._positions[this._positions.length-1],i=e[0],o=e[1];t.x=i,t.y=o}else{var n=this._positions[0],i=n[0],o=n[1];t.x=i,t.y=o;var r=this.retrieveEdgeConnector(),s=this._positions[this._positions.length-1],a=s[0],h=s[1];r.x=a,r.y=h,this.addChild(r)}},e.prototype.drawStackConnector=function(){var t=this.retrieveStackEdgePoint();this._stack.addChild(t);var e=this.retrieveEdgeConnector();if(this._stack.addChild(e),0!=this._dir){var i=this._dir>0?this._positions[0]:this._positions[this._positions.length-1],o=i[0],n=i[1];t.x=o,t.y=n}else{var r=this._positions[0],o=r[0],n=r[1];t.x=o,t.y=n;var s=this.retrieveStackEdgePoint(),a=this._positions[this._positions.length-1],h=a[0],l=a[1];s.x=h,s.y=l,this._stack.addChild(s),e.x=o-1,e.y=n+1,e.scaleX=e.scaleY=.9;var p=this.retrieveEdgeConnector();p.x=h+1,p.y=l-1,p.scaleX=p.scaleY=.9,this._stack.addChild(p)}},e.prototype.retrieveStackEdgePoint=function(){var t=new egret.Shape;return t.graphics.beginFill(0),t.graphics.drawCircle(0,0,6),t.graphics.endFill(),t},e}(ConnectingEdgeCrossedPayLine);__reflect(ConnectingEdgeStackCrossedPayLine.prototype,"ConnectingEdgeStackCrossedPayLine");var ConnectingEdgeStackCurvePayLine=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){this._stack=new egret.Sprite,this.drawLineShadow(),this.drawConnector(),this.drawLine(),this.drawStackConnector(),this.addChild(this._stack),this._stack.cacheAsBitmap=!0,this._stack.alpha=.2},e.prototype.drawLine=function(){var t=this.retrieveLine(),e=this.retrieveStackLine(),i=this._positions[0],o=i[0],n=i[1];t.graphics.moveTo(o,n),e.graphics.moveTo(o,n+2);for(var r=0;r<this._positions.length;r++){var s=this._positions[r],a=s[0],h=s[1],l=t.globalToLocal(a,h);if(r+1<this._positions.length){var p=this._positions[r+1],u=p[0],c=p[1],d=t.globalToLocal(u,c),_=l.x+.5*(d.x-l.x),y=l.y+.5*(d.y-l.y);t.graphics.curveTo(l.x,l.y,_,y),e.graphics.curveTo(l.x,l.y,_,y+2)}else t.graphics.lineTo(a,h),e.graphics.lineTo(a,h+2)}this.addChild(t),this._stack.addChild(e)},e.prototype.retrieveStackLine=function(){var t=new egret.Shape;return t.graphics.lineStyle(2.5,0,1,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.MITER),t},e.prototype.drawConnector=function(){var t=this.retrieveEdgeConnector();if(this.addChild(t),0!=this._dir){var e=this._dir>0?this._positions[0]:this._positions[this._positions.length-1],i=e[0],o=e[1];t.x=i,t.y=o}else{var n=this._positions[0],i=n[0],o=n[1];t.x=i,t.y=o;var r=this.retrieveEdgeConnector(),s=this._positions[this._positions.length-1],a=s[0],h=s[1];r.x=a,r.y=h,this.addChild(r)}},e.prototype.drawStackConnector=function(){var t=this.retrieveStackEdgePoint();this._stack.addChild(t);var e=this.retrieveEdgeConnector();if(this._stack.addChild(e),0!=this._dir){var i=this._dir>0?this._positions[0]:this._positions[this._positions.length-1],o=i[0],n=i[1];t.x=o,t.y=n}else{var r=this._positions[0],o=r[0],n=r[1];t.x=o,t.y=n;var s=this.retrieveStackEdgePoint(),a=this._positions[this._positions.length-1],h=a[0],l=a[1];s.x=h,s.y=l,this._stack.addChild(s),e.x=o-1,e.y=n+1,e.scaleX=e.scaleY=.9;var p=this.retrieveEdgeConnector();p.x=h+1,p.y=l-1,p.scaleX=p.scaleY=.9,this._stack.addChild(p)}},e.prototype.retrieveStackEdgePoint=function(){var t=new egret.Shape;return t.graphics.beginFill(0),t.graphics.drawCircle(0,0,6),t.graphics.endFill(),t},e}(ConnectingEdgeCurvePayLine);__reflect(ConnectingEdgeStackCurvePayLine.prototype,"ConnectingEdgeStackCurvePayLine");var ConnectingEdgeStackPayLine=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){this._stack=new egret.Sprite,this.drawLineShadow(),this.drawConnector(),this.drawLine(),this.drawStackConnector(),this.addChild(this._stack),this._stack.cacheAsBitmap=!0,this._stack.alpha=.2},e.prototype.drawLine=function(){var t=this.retrieveLine(),e=this.retrieveStackLine(),i=this._positions[0],o=i[0],n=i[1];t.graphics.moveTo(o,n),e.graphics.moveTo(o,n+2);for(var r=0,s=this._positions;r<s.length;r++){var a=s[r],h=a[0],l=a[1];t.graphics.lineTo(h,l),e.graphics.lineTo(h,l+2)}this.addChild(t),this._stack.addChild(e)},e.prototype.retrieveStackLine=function(){var t=new egret.Shape;return t.graphics.lineStyle(2.5,0,1,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.MITER),t},e.prototype.drawConnector=function(){var t=this.retrieveEdgeConnector();if(this.addChild(t),0!=this._dir){var e=this._dir>0?this._positions[0]:this._positions[this._positions.length-1],i=e[0],o=e[1];t.x=i,t.y=o}else{var n=this._positions[0],i=n[0],o=n[1];t.x=i,t.y=o;var r=this.retrieveEdgeConnector(),s=this._positions[this._positions.length-1],a=s[0],h=s[1];r.x=a,r.y=h,this.addChild(r)}},e.prototype.drawStackConnector=function(){var t=this.retrieveStackEdgePoint();this._stack.addChild(t);var e=this.retrieveEdgeConnector();if(this._stack.addChild(e),0!=this._dir){var i=this._dir>0?this._positions[0]:this._positions[this._positions.length-1],o=i[0],n=i[1];t.x=o,t.y=n}else{var r=this._positions[0],o=r[0],n=r[1];t.x=o,t.y=n;var s=this.retrieveStackEdgePoint(),a=this._positions[this._positions.length-1],h=a[0],l=a[1];s.x=h,s.y=l,this._stack.addChild(s),e.x=o-1,e.y=n+1,e.scaleX=e.scaleY=.9;var p=this.retrieveEdgeConnector();p.x=h+1,p.y=l-1,p.scaleX=p.scaleY=.9,this._stack.addChild(p)}},e.prototype.retrieveStackEdgePoint=function(){var t=new egret.Shape;return t.graphics.beginFill(0),t.graphics.drawCircle(0,0,6),t.graphics.endFill(),t},e}(ConnectingEdgePayLine);__reflect(ConnectingEdgeStackPayLine.prototype,"ConnectingEdgeStackPayLine");var StackCrossedPayLine=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.drawLine=function(){var t=this.retrieveLine(),e=this.retrieveStackLine(),i=this._positions[0],o=i[0],n=i[1];t.graphics.moveTo(o,n),t.graphics.moveTo(o,n+2);for(var r=this.getBufferX(),s=this.getBufferY(),a=0,h=this._positions;a<h.length;a++){var l=h[a],p=l[0],u=l[1];t.graphics.lineTo(p-r,u+s),t.graphics.lineTo(p+r,u+s),e.graphics.lineTo(p-r,u+s+2),e.graphics.lineTo(p+r,u+s+2)}this.addChild(t),this.addChild(e)},e.prototype.retrieveStackLine=function(){var t=new egret.Shape;return t.graphics.lineStyle(2.5,16777215,.5,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.MITER),t},e}(CrossedPayLine);__reflect(StackCrossedPayLine.prototype,"StackCrossedPayLine");var StackCurvePayLine=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.drawLine=function(){var t=this.retrieveLine(),e=this.retrieveStackLine(),i=this._positions[0],o=i[0],n=i[1];t.graphics.moveTo(o,n),e.graphics.moveTo(o,n+2);for(var r=0;r<this._positions.length;r++){var s=this._positions[r],a=s[0],h=s[1],l=t.globalToLocal(a,h);if(r+1<this._positions.length){var p=this._positions[r+1],u=p[0],c=p[1],d=t.globalToLocal(u,c),_=l.x+.5*(d.x-l.x),y=l.y+.5*(d.y-l.y);t.graphics.curveTo(l.x,l.y,_,y),e.graphics.curveTo(l.x,l.y+2,_,y+2)}else t.graphics.lineTo(a,h),e.graphics.lineTo(a,h+2)}this.addChild(t),this.addChild(e)},e.prototype.retrieveStackLine=function(){var t=new egret.Shape;return t.graphics.lineStyle(2.5,16777215,.5,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.MITER),t},e}(CurvePayLine);__reflect(StackCurvePayLine.prototype,"StackCurvePayLine");var ConnectedPayLineIndicator=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.create=function(){t.prototype.create.call(this),this.connectPoints()},e.prototype.connectPoints=function(){var t=this.retrieveLine(),e=this._points[0],i=e.x+e.width/2,o=e.y+e.height/2;t.graphics.moveTo(i,o);for(var n=0,r=this._points;n<r.length;n++){var s=r[n],a=s.x+s.width/2,h=s.y+s.height/2;t.graphics.lineTo(a,h)}this.addChild(t)},e.prototype.retrieveLine=function(){var t=new egret.Shape;return t.graphics.lineStyle(1.5,this._color,1,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.MITER),t},e.prototype.show=function(t,e){this.alpha=1},e}(PayLineIndicator);__reflect(ConnectedPayLineIndicator.prototype,"ConnectedPayLineIndicator");var BrandingLoaderView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(PreloaderView);__reflect(BrandingLoaderView.prototype,"BrandingLoaderView");
var ConnectorData={JumpData:"",SessionId:"",Url:"",Token:"",HttpUrl:"",BackUrl:"",ClientId:0,GameId:0,GameName:""},LoginConnector=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.connect=function(){var t=ConnectorData.Url+"user/login";t+="?gameId="+ConnectorData.GameId+"&gameName="+ConnectorData.GameName;var e={headers:{Authorization:"bearer "+ConnectorData.Token}};return this.post(t,e)},e.prototype.successHandler=function(t){ConnectorData.SessionId=t.sessionId,ResultData.Balance=t.userBalance,GameData.PayLines=t.lineConfigList.slice(0),GameData.PayRates=t.iconPayRateList.slice(0),GameData.BetRange=t.betQuotaRangeList.slice(0),GameData.BetValue=t.betValue||GameData.BetRange[0],GameData.BetLineAmount=GameData.PayLines.length,GameData.TotalBet=GameData.BetLineAmount*GameData.BetValue,GameData.PayLines.forEach(function(t){return t.forEach(function(e,i){return t[i]=e-1})})},e.prototype.errorHandler=function(t){console.error("[LogIn]:",t)},e}(Fetcher);__reflect(LoginConnector.prototype,"LoginConnector");var LogoutConnector=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.fetch=function(t,e){var i=this;return new Promise(function(o,n){return window.fetch(t,e).then(i.status).then(function(t){i.successHandler(t),o()})})},e.prototype.status=function(t){return Promise.resolve(t)},e.prototype.connect=function(){var t=ConnectorData.Url+"user/logout",e={headers:{Authorization:"bearer "+ConnectorData.Token,sessionId:ConnectorData.SessionId}};switch(this.post(t,e),SlotApplicationData.environment){case 0:window.top.postMessage(JSON.stringify({action:"game_back"}),"*");break;case 1:window.top.postMessage(JSON.stringify({action:"game_back"}),"*");break;case 2:window.top.postMessage(JSON.stringify({action:"game_back"}),"*")}},e.prototype.successHandler=function(t){},e.prototype.errorHandler=function(t){console.error("[LogOut]:",t)},e}(Fetcher);__reflect(LogoutConnector.prototype,"LogoutConnector");var ReloadConnector=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.connect=function(){window.top.postMessage(JSON.stringify({action:"game_recharge",data:ConnectorData.JumpData}),"*")},e}(Fetcher);__reflect(ReloadConnector.prototype,"ReloadConnector");var HackData={requestIds:[]},Hacker=function(t){function e(){var e=t.call(this)||this;return e._selected=[],e}return __extends(e,t),e.prototype.getSkinName=function(){return"resource/hack/HackView.exml"+GameUtil.preventCache("HackView")},e.prototype.initCustomMethod=function(){var t=this._eui.SymbolsSelection;this._backdrop=this._eui.Backdrop,this._backdrop.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this);for(var e,i,o=0;o<t.numChildren;o++){var n=t.getChildByName("s"+(o+1));n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onSymbolTouch,this),e=n.scaleX,i=n.scaleY}for(var o=(this._eui.SymbolsPosition,0);o<GameData.TotalReels;o++)for(var r=this._eui["Reel"+o],s=0;s<GameData.TotalRows;s++){var n=r.getChildByName("row"+s);n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onPositionTouch,this)}var a=GameData.SymbolWidth,h=GameData.SymbolHeight,l=GameData.SymbolBmpWidth,p=GameData.SymbolBmpHeight,u=15,c=this._frame=new egret.Shape;c.graphics.lineStyle(5,16776960,1,!1,"normal",egret.CapsStyle.NONE,egret.JointStyle.MITER),c.graphics.moveTo(l-a-u,p-h-u),c.graphics.lineTo(a+u,p-h-u),c.graphics.lineTo(a+u,h+u),c.graphics.lineTo(l-a-u,h+u),c.graphics.lineTo(l-a-u,p-h-u),t.addChild(c),c.scaleX=e,c.scaleY=i,c.visible=!1;var d=this._eui.BtnReset;d.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.reset,this);var _=this._eui.BtnSend;_.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.submit,this),this._error=this._eui.Error,this._error.text="",this.visible=!1},e.prototype.onCloseTouch=function(){this.hide()},e.prototype.onSymbolTouch=function(t){this._error.text="";var e=t.currentTarget;this._select=e.name,this._frame.visible=!0,this._frame.x=e.x,this._frame.y=e.y},e.prototype.onPositionTouch=function(t){if(void 0===this._select)return void(this._error.text="Select a symbol to place on the position.");var e=t.currentTarget;e.texture=RES.getRes(this._select);var i=Number.parseInt(StringUtil.afterFirst(e.parent.name,"reel")),o=Number.parseInt(StringUtil.afterFirst(e.name,"row")),n=Number.parseInt(StringUtil.afterFirst(this._select,"s"));this._selected[i][o]=n},e.prototype.reset=function(){this._select=void 0,this._frame.visible=!1,this._selected=GameUtil.getEmptyNumArr();for(var t=(this._eui.SymbolsPosition,0);t<GameData.TotalReels;t++)for(var e=this._eui["Reel"+t],i=0;i<GameData.TotalRows;i++){var o=e.getChildByName("row"+i);o.texture=RES.getRes("hack-box")}},e.prototype.submit=function(){for(var t=[],e=0;e<GameData.TotalRows;e++)for(var i=0;i<GameData.TotalReels;i++){var o=this._selected[i][e];if(o)t.push(this._selected[i][e]);else{var n=SymbolManager.commonSymbols;t.push(ArrayUtil.randomChildOf(n))}}this._error.text="",HackData.requestIds=t.slice(0),EventManager.notify("SequenceChannel",9),this.hide()},e.prototype.showCustomMethod=function(){this.visible=!0,0===this._selected.length&&(this._selected=GameUtil.getEmptyNumArr())},e.prototype.hideCustomMethod=function(){this.visible=!1},e.prototype.destroyCustomMethod=function(){for(var t=this._eui.SymbolsSelection,e=0;e<t.numChildren;e++){var i=t.getChildByName("s"+(e+1));i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onSymbolTouch,this)}for(var e=(this._eui.SymbolsPosition,0);e<GameData.TotalReels;e++)for(var o=this._eui["Reel"+e],n=0;n<GameData.TotalRows;n++){var i=o.getChildByName("row"+e);i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onPositionTouch,this)}this._backdrop.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onCloseTouch,this);var r=this._eui.BtnReset;r.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.reset,this);var s=this._eui.BtnSend;s.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.submit,this)},e}(OverlayPrototype);__reflect(Hacker.prototype,"Hacker",["IEuiView"]);var SpinConnector=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.connect=function(){if(HackData.requestIds.length>0)return void this.hackConnection();var t=ConnectorData.Url+"game/startBaseGame?";t+="betLines="+GameData.BetLineAmount+"&betQuota="+GameData.BetValue;var e={headers:{Authorization:"bearer "+ConnectorData.Token,sessionId:ConnectorData.SessionId}};this.post(t,e)},e.prototype.hackConnection=function(){var t=ConnectorData.Url+"game/testBaseGame?";t+="betLines="+GameData.BetLineAmount+"&betQuota="+GameData.BetValue,t+="&resultData="+HackData.requestIds.toString();var e={headers:{Authorization:"bearer "+ConnectorData.Token,sessionId:ConnectorData.SessionId}};this.get(t,e)},e.prototype.successHandler=function(t){HackData.requestIds.length=0;return t.code?void EventManager.notify("NoticeChannel",t.code):void EventManager.notify("ConnectorChannel",3,t)},e.prototype.errorHandler=function(t){console.error("[Spin]:",t),EventManager.notify("NoticeChannel",1008)},e}(Fetcher);__reflect(SpinConnector.prototype,"SpinConnector");var ParticleSystem;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.draw(),e}return __extends(e,t),e.prototype.draw=function(){var t=10;this.graphics.lineStyle(3,16777215),this.graphics.moveTo(-t,-t),this.graphics.lineTo(t,t),this.graphics.moveTo(-t,t),this.graphics.lineTo(t,-t)},e.prototype.registerParticle=function(t){t.x=this.x,t.y=this.y,t.visible=!0,t.update()},e}(egret.Shape);t.Source=e,__reflect(e.prototype,"ParticleSystem.Source")}(ParticleSystem||(ParticleSystem={}));var EventManager;!function(t){function e(e,i){h.has(e)||h.set(e,new t.EventChannel(e)),h.get(e).strict=i}function i(e,i){h.has(e)||h.set(e,new t.EventChannel(e)),h.get(e).register(i)}function o(t,e){h.get(t).unregister(e)}function n(t){h.get(t).destroy()}function r(t){h.forEach(function(e){return e.unregister(t)})}function s(){h.forEach(function(t){return t.destroy()})}function a(t,e,i,o){void 0===o&&(o=!0),h.get(t).notify(e,i,o)}var h=new Map;t.strictChannel=e,t.register=i,t.unregister=o,t.unregisterChannel=n,t.unregisterListener=r,t.unresgisterAll=s,t.notify=a}(EventManager||(EventManager={}));var ParticleSystem;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.initCustomMethod=function(){},e.prototype.startCustomMethod=function(){},e.prototype.stopCustomMethod=function(){},e.prototype.update=function(){this._rotationRate=1,this.scaleX=RandomUtil.positiveNegative(1),this.scaleY=RandomUtil.positiveNegative(1),this._vx=30*Math.random()-15,this._vy=-20},Object.defineProperty(e.prototype,"vx",{get:function(){return this._vx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vy",{get:function(){return this._vy},set:function(t){this._vy=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationRate",{get:function(){return this._rotationRate},enumerable:!0,configurable:!0}),e.prototype.destroyCustomMethod=function(){},e}(t.ParticlePrototype);t.FountainParticle=e,__reflect(e.prototype,"ParticleSystem.FountainParticle",["IFountainParticle"])}(ParticleSystem||(ParticleSystem={}));var PaytableDragger=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(t,e,i,o,n){this._target=t,this._target=t,this._minX=e,this._maxX=i,this._minY=o,this._maxY=n,this._active=!1,this._tracker=new MovementTracker(100)},e.prototype.onSnapUp=function(){var t=this._target,e=120,i=t.y+this.getEaseSpeedMovement();TweenMax.to(t,.5,{y:e>i?i:e})},e.prototype.activate=function(){if(!this._active){this._active=!0;var t=this._target;t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)}},e.prototype.deactivate=function(){this._active=!1;var t=this._target;t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),t.y=120},e.prototype.destroy=function(){this.deactivate(),t.prototype.destroy.call(this)},e}(EaseDragger);__reflect(PaytableDragger.prototype,"PaytableDragger",["IPaytableDragger","IDragger"]);