!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("Geetest requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";if(void 0===t)throw new Error("Geetest requires browser environment");var n=t.document,o=t.Math,r=n.getElementsByTagName("head")[0];function _Object(t){this._obj=t}function Config(t){var e=this;new _Object(t)._each(function(t,n){e[t]=n})}_Object.prototype={_each:function(t){var e=this._obj;for(var n in e)e.hasOwnProperty(n)&&t(n,e[n]);return this}},Config.prototype={api_server:"api.geetest.com",protocol:"http://",type_path:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){return i(this.type)?this.fallback_config[this.type]:this.new_captcha?this.fallback_config.fullpage:this.fallback_config.slide},_extend:function(t){var e=this;new _Object(t)._each(function(t,n){e[t]=n})}};var i=function(t){return"string"==typeof t},c={},a={},f=function(t,e,n,o){e=function(t){return t.replace(/^https?:\/\/|\/$/g,"")}(e);var r=function(t){return 0!==(t=t.replace(/\/+/g,"/")).indexOf("/")&&(t="/"+t),t}(n)+function(t){if(!t)return"";var e="?";return new _Object(t)._each(function(t,n){(i(n)||function(t){return"number"==typeof t}(n)||function(t){return"boolean"==typeof t}(n))&&(e=e+encodeURIComponent(t)+"="+encodeURIComponent(n)+"&")}),"?"===e&&(e=""),e.replace(/&$/,"")}(o);return e&&(r=t+e+r),r},s=function(t,e,o,i,c){var a=function(s){!function(t,e){var o=n.createElement("script");o.charset="UTF-8",o.async=!0,o.onerror=function(){e(!0)};var i=!1;o.onload=o.onreadystatechange=function(){i||o.readyState&&"loaded"!==o.readyState&&"complete"!==o.readyState||(i=!0,setTimeout(function(){e(!1)},0))},o.src=t,r.appendChild(o)}(f(t,e[s],o,i),function(t){t?s>=e.length-1?c(!0):a(s+1):c(!1)})};a(0)},l=function(e,n,r,i){if("object"==typeof(c=r.getLib)&&null!==c)return r._extend(r.getLib),void i(r);var c;if(r.offline)i(r._get_fallback_config());else{var a="geetest_"+(parseInt(1e4*o.random())+(new Date).valueOf());t[a]=function(e){"success"===e.status?i(e.data):e.status?i(r._get_fallback_config()):i(e),t[a]=void 0;try{delete t[a]}catch(t){}},s(r.protocol,e,n,{gt:r.gt,callback:a},function(t){t&&i(r._get_fallback_config())})}},u=function(t,e){var n={networkError:"网络错误"};if("function"!=typeof e.onError)throw new Error(n[t]);e.onError(n[t])};t.Geetest&&(a.slide="loaded");var p=function(e,n){var o=new Config(e);e.https?o.protocol="https://":e.protocol||(o.protocol=t.location.protocol+"//","file:"==t.location.protocol&&(o.protocol="http://")),l([o.api_server||o.apiserver],o.type_path,o,function(e){var r=e.type,i=function(){o._extend(e),n(new t.Geetest(o))};c[r]=c[r]||[];var f=a[r]||"init";"init"===f?(a[r]="loading",c[r].push(i),s(o.protocol,e.static_servers||e.domains,e[r]||e.path,null,function(t){if(t)a[r]="fail",u("networkError",o);else{a[r]="loaded";for(var e=c[r],n=0,i=e.length;n<i;n+=1){var f=e[n];"function"==typeof f&&f()}c[r]=[]}})):"loaded"===f?i():"fail"===f?u("networkError",o):"loading"===f&&c[r].push(i)})};return t.initGeetest=p,p});