!function(){"use strict";class e{constructor(){}static init(){Laya.ClassUtils.regClass}}e.width=1334,e.height=750,e.scaleMode="fixedheight",e.screenMode="horizontal",e.alignV="top",e.alignH="left",e.startScene="UpdateView.scene",e.sceneRoot="",e.debug=!1,e.stat=!1,e.physicsDebug=!1,e.exportSceneToJson=!0,e.init();var t,a=Laya.ClassUtils.regClass;!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:1334,height:750},compId:1,child:[{type:"Image",props:{skin:"update/updatabg.jpg",height:750,centerX:0},compId:2},{type:"Image",props:{y:721,width:1334,var:"infoBar",skin:"update/img_denglu_banbenhao.png",centerX:0},compId:11,child:[{type:"Label",props:{y:6,text:"抵制不良游戏 拒绝盗版游戏 注意自我保护 谨防受骗上当 适度游戏益脑 沉迷游戏伤身 合理安排时间 享受健康生活",fontSize:16,color:"#ccffff",centerX:0},compId:13}]},{type:"SkeletonPlayer",props:{y:374,x:666,width:1,var:"logoClip",url:"update/loginAnim.sk",height:1,runtime:"laya.ani.bone.Skeleton"},compId:14},{type:"Image",props:{y:70,var:"serviceBtn",skin:"update/icon_kf.png",right:28,anchorY:.5,anchorX:.5},compId:3},{type:"Image",props:{y:20,x:28,width:398,var:"logo",height:120},compId:9},{type:"ProgressBar",props:{y:668,width:1290,var:"progress",skin:"update/jdt.png",centerX:0,sizeGrid:"0,28,0,25"},compId:5,child:[{type:"Text",props:{y:-35,x:345,width:600,var:"progressTxt",height:28,fontSize:28,color:"#ffffff",align:"center",runtime:"laya.display.Text"},compId:10}]}],loadList:["update/updatabg.jpg","update/img_denglu_banbenhao.png","update/loginAnim.sk","update/icon_kf.png","update/jdt.png"],loadList3D:[]},e.UpdateViewUI=t,a("ui.UpdateViewUI",t)}(t||(t={}));class i extends t.UpdateViewUI{constructor(){super(),this.initView()}initView(){this.setLayout(),this.logoClip.mouseEnabled=!1,this.progressTxt.text="正在检查游戏是否有更新...",this.progress.value=0,this.serviceBtn.on(Laya.Event.CLICK,this,this.serviceClick),this.logo.skin="../brand/login_icon.png",this.serviceBtn.visible=!this.channelOpen}setLayout(){this.width=Laya.stage.width,this.infoBar.width=this.width;let e=this.getScreencOffset(28,78);this.logo.x=e,this.serviceBtn.right=e,this.logoClip.x=this.width>>1,this.serviceBtn.visible=!this.channelOpen}serviceClick(){s.game_common({do:"customerService"})}showLoading(e){if("loading"==e.do){let t=100*e.percent;this.progressTxt.text="正在下载更新内容"+t.toFixed(0)+"%",this.progress.value=e.percent}else"loadFinish"==e.do&&(this.progressTxt.text="资源加载准备中...",this.progress.value=0)}getScreencOffset(e,t){var a=Laya.stage.width/Laya.stage.height;return a<=1.778666?e:a>=2.165333?t:(a-1.778666)*(t-e)/(2.165333-1.778666)+e}get channelOpen(){return s.isAndroidHack}}class s{static getQueryVariable(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var i=t[a].split("=");if(decodeURIComponent(i[0])==e)return decodeURIComponent(i[1])}}static game_common(e={}){window.top.postMessage(JSON.stringify(Object.assign({action:"game_common"},e)),"*")}}class n{constructor(){Laya.init(e.width,e.height,Laya.WebGL),s.isAndroidHack="true"==s.getQueryVariable("isAndroidHack"),n.inst=this,Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=e.scaleMode,Laya.stage.screenMode=e.screenMode,Laya.stage.alignV=e.alignV,Laya.stage.alignH=e.alignH,Laya.URL.exportSceneToJson=e.exportSceneToJson,(e.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),e.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,window.document.addEventListener("message",this.nativeMess,!1),window.addEventListener("message",this.nativeMess,!1),Laya.stage.on(Laya.Event.RESIZE,this,this.resizeView),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}resizeView(){this.view&&this.view.setLayout()}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){Laya.loader.load("res/atlas/update.atlas",Laya.Handler.create(this,this.initView))}initView(){this.view=new i,Laya.stage.addChild(this.view)}nativeMess(e){let t=JSON.parse(e.data);if(t)switch(t.action){case"game_loading":n.inst.showLoading(t.data)}}showLoading(e){this.view&&this.view.showLoading(e)}}new n}();