var SaveManager=function(){function o(){var t;this.commonKeyMap=(t={},t[o.KEY_MUSIC_VL]=!0,t[o.KEY_MUSIC_SWITCH]=!0,t[o.KEY_SFX_VL]=!0,t[o.KEY_SFX_SWITCH]=!0,t[o.KEY_AVATOR_ID]=!0,t[o.KEY_TOKEN]=!0,t[o.KEY_API_URL]=!0,t),this.lobbyJosnObj=null,this.commonJosnObj=null,this.compatibleSaveObj(),this.refreshSaveObj()}return o.getObj=function(){return o.obj||(o.obj=new o),o.obj},o.prototype.clearAll=function(){Laya.LocalStorage.clear(),this.refreshSaveObj(),Debug.log("SaveManager.clearAll-----------")},o.prototype.compatibleSaveObj=function(){var t=Laya.LocalStorage.getJSON(o.SAVE_KEY_LOBBY)||{};if(!t.isCompatible){var a=Laya.LocalStorage.getJSON(o.SAVE_KEY_NN)||{};for(var e in a){var n=a[e];this.commonKeyMap[e]||null==n||void 0==n||(t[e]=n,delete a[e])}t.isCompatible=!0,Laya.LocalStorage.setJSON(o.SAVE_KEY_LOBBY,t),Laya.LocalStorage.setJSON(o.SAVE_KEY_NN,a)}},o.prototype.refreshSaveObj=function(){this.commonJosnObj=this.getObjTotal(o.SAVE_KEY_NN,{}),this.lobbyJosnObj=this.getObjTotal(o.SAVE_KEY_LOBBY,{})},o.prototype.saveObjTotal=function(o,t){Laya.LocalStorage.setJSON(o,t)},o.prototype.getObjTotal=function(o,t){var a=Laya.LocalStorage.getJSON(o);return a||t},o.prototype.set=function(o,t){this.commonKeyMap[o]?this.commonJosnObj[o]=t:this.lobbyJosnObj[o]=t},o.prototype.save=function(t,a){this.commonKeyMap[t]?(this.commonJosnObj[t]=a,this.saveObjTotal(o.SAVE_KEY_NN,this.commonJosnObj)):(this.lobbyJosnObj[t]=a,this.saveObjTotal(o.SAVE_KEY_LOBBY,this.lobbyJosnObj))},o.prototype.get=function(o,t){if(this.commonKeyMap[o]){if(null!=this.commonJosnObj[o]&&void 0!=this.commonJosnObj[o])return this.commonJosnObj[o]}else if(null!=this.lobbyJosnObj[o]&&void 0!=this.lobbyJosnObj[o])return this.lobbyJosnObj[o];return this.save(o,t),t},o.prototype.initCommon=function(t,a){t=this.get(o.KEY_TOKEN,t),this.get(o.KEY_API_URL,a)},o.prototype.saveData=function(){this.saveObjTotal(o.SAVE_KEY_NN,this.commonJosnObj),this.saveObjTotal(o.SAVE_KEY_LOBBY,this.lobbyJosnObj)},o.SAVE_KEY_NN="MT-Card",o.KEY_MUSIC_VL="music",o.KEY_MUSIC_SWITCH="music_switch",o.KEY_SFX_VL="sound",o.KEY_SFX_SWITCH="sound_switch",o.KEY_AVATOR_ID="avator_id",o.KEY_TOKEN="token",o.KEY_API_URL="httpUrl",o.SAVE_KEY_LOBBY="MT-Card-Lobby",o.KEY_UID="uuid",o}();