var __extends=this&&this.__extends||function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),KeyboardView=function(t){function i(){var i=t.call(this)||this;return i.initView(),i}return __extends(i,t),i.prototype.initView=function(){var t=this;this.width=Laya.stage.width,this.numGroup.width=this.width;var n=this.width-1334>>1;n>0&&(this.confirmBtn.right+=n),this.bgmc.on(Laya.Event.MOUSE_DOWN,this,function(){t.isclick&&i.hide()}),EventManager.addTouchScaleListener(this.confirmBtn,this,function(){SoundPlayer.closeSound(),t.isclick&&(t.target&&(t.target.text=t.input),t.vo.caller&&t.vo.callback&&t.vo.callback.call(t.vo.caller,t.input),i.hide())},null,.7,!0);for(var e,s=0;s<12;s++)(e=this["btn"+s])&&(EventManager.addTouchScaleListener(e,this,this.btnHandler,s,.95,!1,!1),e.on(Laya.Event.MOUSE_DOWN,this,this.downBtn,[e,11==s]))},i.prototype.downBtn=function(t,i){t.alpha=.5,t.on(Laya.Event.MOUSE_OUT,this,this.outBtn,[t]),t.on(Laya.Event.MOUSE_UP,this,this.outBtn,[t]),i&&Laya.timer.once(500,this,this.startDel)},i.prototype.startDel=function(){this.doDel(),Laya.timer.loop(200,this,this.doDel)},i.prototype.doDel=function(){this.input.length?(this.input=this.input.substr(0,this.input.length-1),this.inputTxt.text=this.input,this.target&&(this.target.text=this.input),SoundPlayer.clickSound()):Laya.timer.clear(this,this.doDel)},i.prototype.outBtn=function(t){t.off(Laya.Event.MOUSE_OUT,this,this.outBtn),t.off(Laya.Event.MOUSE_UP,this,this.outBtn),Laya.timer.clearAll(this),t.alpha=1},i.prototype.btnHandler=function(t,i){SoundPlayer.clickSound(),this.vo.maxLen&&this.input.length>=this.vo.maxLen&&11!=i||(i<10?this.input+=i:10==i?this.input+=".":11==i&&(this.input=this.input.substr(0,this.input.length-1)),this.inputTxt.text=this.input,this.target&&(this.target.text=this.input))},i.bindKeyboard=function(t,i){var n=this;i||(i={}),i.input=t,i.hint||(i.hint=t.prompt),!i.maxLen&&t.maxChars&&(i.maxLen=t.maxChars),t.editable=!1,t.on(Laya.Event.MOUSE_DOWN,this,function(){t.focus=!1,n.show(t.text,i)})},i.prototype.update=function(t,i){this.isclick=!1,this.target=i.input,this.vo=i,this.input=t||"",this.inputTxt.text=this.input,this.setType=!1,i.hint?this.inputTxt.prompt=i.hint:this.inputTxt.prompt="请输入金额",this.inputTxt.type!=this.target.type&&(this.inputTxt.type=this.target.type,this.setType=!0)},i.prototype.active=function(){this.setType&&(this.inputTxt.focus=!0),this.isclick=!0},i.show=function(t,n){var e=this;void 0===t&&(t=""),this.view||(this.view=new i),this.view.update(t,n),this.view.zOrder=Dialog.manager.zOrder+10,this.view.y=Laya.stage.height,Laya.stage.addChild(this.view),Laya.Tween.to(this.view,{y:0},200,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){e.view.active()}))},i.hide=function(){var t=this;this.view&&Laya.Tween.to(this.view,{y:Laya.stage.height},200,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){t.view.removeSelf()},null,!1))},i}(ui.comp.KeyboardViewUI);