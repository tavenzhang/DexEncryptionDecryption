var PayManager=function(){function e(){if(this.viewbox=new Laya.Sprite,e._inst)throw new Error("instanded!");e._inst=this}return Object.defineProperty(e,"inst",{get:function(){return e._inst||new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e){this.viewbox||(this.viewbox=new Laya.Sprite),e.contains(this.viewbox)||(e.addChild(this.viewbox),this.viewbox.pos(e.width>>1,e.height>>1))},e.prototype.clearLastView=function(){this.lastView&&(this.lastView.removeSelf(),this.lastView=null)},e.prototype.showLastView=function(){this.lastView&&(this.lastView.visible=!0),this.clearOther()},e.prototype.hideLastView=function(){this.lastView&&(this.lastView.visible=!1),this.clearOther()},e.prototype.clearOther=function(){this.viewbox&&this.viewbox.destroyChildren()},e.prototype.startPay=function(e,i,t){var a;if(e.amount=i,t){a=(o=e).realNameReq}else{var o=e;a=o.realNameReq||o.mobileNoReq||o.cardNoReq,o.platform&&o.webBankList&&(a=!0)}if(a){this.hideLastView();var n=new view.dlg.pay.AccountInfoView;n.show(e,t),this.viewbox.addChild(n)}else t?this.showBankPayInfoView(e):this.showOtherPayInfoView(e)},e.prototype.doWechatPublicPay=function(e){this.hideLastView();var i={qrUrl:e.bankCardNo,isBank:!0},t=new view.dlg.pay.SaveQrInfoView;t.show(e,i),this.viewbox.addChild(t)},e.prototype.doBankPay=function(e,i){var t=this;PayModel.payByBankList(e,e.amount,i,this,function(i,a){if(Debug.log("银行转账结果:",i,a),i)if(e.isCombine){t.hideLastView();var o=new view.dlg.pay.SaveQrInfoView,n={amount:a.amount,orderNo:a.transactionNo,qrUrl:e.bankCardNo,isBank:!0};o.show(e,n),t.viewbox.addChild(o)}else t.showPayResultView(a.amount)})},e.prototype.showBankPayInfoView=function(e,i){if(e.isCombine)this.doBankPay(e,i);else{this.hideLastView();var t=new view.dlg.pay.BankTransferInfoView;t.show(e,i),this.viewbox.addChild(t)}},e.prototype.showPayResultView=function(e){this.hideLastView();var i=new view.dlg.pay.PayResultView;i.show(e),this.viewbox.addChild(i)},e.prototype.showOtherPayInfoView=function(e,i){var t=this;PayModel.payByListV2(e,e.amount,i,this,function(i,a){if(Debug.log("支付结果:",i,a),i)if(a.webview)t.showPayResultView(a.amount),GameUtils.openWeb(a.data);else if(!(a.webview||a.paymentJumpTypeEnum&&PayMentJumpType[a.paymentJumpTypeEnum]!=PayMentJumpType.IMG)){t.hideLastView();var o=new view.dlg.pay.SaveQrInfoView,n={amount:a.amount,orderNo:a.transactionId,qrUrl:a.data,creatQR:!a.paymentJumpTypeEnum};o.show(e,n),t.viewbox.addChild(o)}})},e.prototype.reset=function(){this.clearLastView(),this.clearOther(),this.viewbox&&(this.viewbox=null)},e}();