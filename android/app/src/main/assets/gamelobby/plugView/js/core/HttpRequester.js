var HttpRequester=function(){function t(){}return t.getHttpData=function(t,e,o,n,s){var a=Common.apihome;a+=t,Common.access_token&&(a+="?access_token="+Common.access_token),n&&(a+=n);var i=["Accept","application/json"];s&&(i=i.concat(s)),this.doRequest(a,i,null,e,o,"get")},t.postHttpData=function(t,e,o,n,s){void 0===e&&(e=null),void 0===s&&(s=!0);var a=Common.apihome;a+=t,Common.access_token&&(a+="?access_token="+Common.access_token);var i=null;e&&(i=JSON.stringify(e));var c=["Content-Type","application/json; charset=utf-8","Accept","*/*"];s&&Common.access_token&&c.push("Authorization","bearer "+Common.access_token),this.doRequest(a,c,i,o,n,"post")},t.deleteHttpData=function(t,e,o){var n=Common.apihome;n+=t,Common.access_token&&(n+="?access_token="+Common.access_token);this.doRequest(n,["Accept","application/json"],null,e,o,"delete")},t.putHttpData=function(t,e,o,n){void 0===e&&(e=null);var s=Common.apihome;s+=t,Common.access_token&&(s+="?access_token="+Common.access_token);var a=null;e&&(a=JSON.stringify(e));var i=["Content-Type","application/json; charset=utf-8","Accept","*/*"];Common.access_token&&i.push("Authorization","bearer "+Common.access_token),this.doRequest(s,i,a,o,n,"put")},t.doRequest=function(t,e,o,n,s,a,i){void 0===a&&(a="post"),this.httpConnect(t,this,function(a,i,c){var p,r=!1;if("complete"==i){try{p=JSON.parse(a)}catch(t){p=a}p||(p=c),r=!0}else{var u=c.http.status;if(p=c,u>=200&&u<300)r=!0;else{if(Debug.error("request-err:",t,e,o,c.http),401==u)return Toast.showToast("登录过期,请重新登录"),void LoadingView.hide();var m=c.http.response;if(m){var l=JSON.parse(m);Toast.showToast(l.message||"")}else Toast.showToast("未知错误")}}n&&s&&s.apply(n,[r,p])},e,o,a,"json")},t.httpConnect=function(t,e,o,n,s,a,i,c){void 0===n&&(n=null),void 0===s&&(s=null),void 0===a&&(a="get"),void 0===i&&(i="json");var p=t||"",r=p+"_"+JSON.stringify(n||{})+"_"+JSON.stringify(s||{}),u=new Laya.HttpRequest;u.once(Laya.Event.COMPLETE,this,this.httpRequestComplete,[e,o,u,r]),u.once(Laya.Event.ERROR,this,this.httpRequestError,[e,o,u,r]),n?u.send(p,s,a,i,n):u.send(p,null,a,i),LoadingView.isLoading&&GameUtils.addTimeOut(r,e,o,c)},t.httpRequestComplete=function(t,e,o,n,s){e.apply(t,[s,"complete",o]),GameUtils.clearTimeout(n)},t.httpRequestError=function(t,e,o,n,s){204==o.http.status?e.apply(t,[s,"complete",o]):e.apply(t,[s,"error",o]),GameUtils.clearTimeout(n)},t.httpRequestList=[],t}();